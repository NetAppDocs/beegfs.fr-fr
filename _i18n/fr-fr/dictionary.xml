<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="e3b88cba18358b065044f4788449026b" category="summary">Solution capable de prendre en charge le système de fichiers en cluster parallèle BeeGFS qui s'exécute sur un stockage NetApp E-Series haute performance à faible latence. Solution HPC économique, facile à gérer et hautement disponible avec la prise en charge de NetApp.</block>
  <block id="28e8b3e83af233fe7085ba954fc6fd36" category="doc">BeeGFS sur NetApp avec E-Series Storage</block>
  <block id="1b6582c92d5f0e47bd102f2e16686662" category="summary">Avant de commencer le déploiement, veillez à bien comprendre comment utiliser Ansible pour configurer et déployer la solution BeeGFS sur NetApp en utilisant la conception d'élément de base BeeGFS deuxième génération.</block>
  <block id="4aa1cf90ffa01d3b63825bad839d9e29" category="doc">Découvrez l'inventaire Ansible</block>
  <block id="91177a5a4b0c27f810e6deb9395eef4a" category="inline-link">NetApp E-Series BeeGFS GitHub</block>
  <block id="489a8841f96385c3fca8ff239dc24250" category="paragraph">L'inventaire Ansible définit la configuration des nœuds de fichiers et de blocs et représente le système de fichiers BeeGFS que vous souhaitez déployer. L'inventaire inclut les hôtes, les groupes et les variables décrivant le système de fichiers BeeGFS souhaité. Les inventaires d'échantillons peuvent être téléchargés à partir de<block ref="5f5a4f2bb780d1d47d6a1c5865c757e8" category="inline-link-rx"></block>.</block>
  <block id="2b030b2e370bebb88648070cda0b66eb" category="section-title">Modules et rôles Ansible</block>
  <block id="2c237568ac6f7bc2fd09645044287519" category="paragraph">Pour appliquer la configuration décrite dans l'inventaire Ansible, utilisez les différents modules et rôles Ansible fournis dans la collection NetApp E-Series Ansible, en particulier le rôle BeeGFS HA 7.2 (disponible sur le<block ref="aa2af16a93b1d617ca7c38eef1d0c556" category="inline-link-rx"></block>) qui déploie la solution de bout en bout.</block>
  <block id="27633c2a48532dabf935531ba52193df" category="paragraph">Chaque rôle de la collection NetApp E-Series Ansible est un déploiement de bout en bout complet de la solution BeeGFS sur NetApp. Les rôles utilisent les collections NetApp E-Series SANtricity, Host et BeeGFS qui vous permettent de configurer le système de fichiers BeeGFS avec la haute disponibilité. Vous pouvez ensuite provisionner et mapper le stockage, et vérifier que le stockage du cluster est prêt à être utilisé.</block>
  <block id="ca467fdffa66288bc6eeca1d49467e2e" category="paragraph">Bien que la documentation approfondie soit fournie avec les rôles, les procédures de déploiement décrivent comment utiliser le rôle de déploiement d'une architecture vérifiée NetApp à l'aide de la conception de l'élément de base BeeGFS deuxième génération.</block>
  <block id="7c1be9d0f9dc743e2a1540004da3eb1d" category="admonition">Bien que la procédure de déploiement tenter d'offrir suffisamment de détails pour que l'expérience précédente avec Ansible ne soit pas une condition préalable, vous devez avoir quelques connaissances de Ansible et de la terminologie connexe.</block>
  <block id="e9b6dfb59ebbe3c2a8e47b9bec2ada24" category="section-title">Disposition de l'inventaire pour un cluster BeeGFS HA</block>
  <block id="5585bfe6d81b9366f1160e16fcf3464f" category="paragraph">Utilisez la structure d'inventaire Ansible pour définir un cluster BeeGFS HA.</block>
  <block id="ea969b9d9b8b0a66432c22ea23412c18" category="paragraph">Tout le monde disposant d'une expérience Ansible précédente doit être conscient que le rôle BeeGFS HA implémente une méthode personnalisée pour découvrir quelles variables (ou faits) s'appliquent à chaque hôte. Pour simplifier la création d'un inventaire Ansible, qui décrit les ressources pouvant être exécutées sur plusieurs serveurs.</block>
  <block id="fcf695220ea603b6d461ed9aaa63c323" category="paragraph">Un inventaire Ansible comprend généralement les fichiers dans<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> et<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block>, et un<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> fichier qui affecte des hôtes à des groupes spécifiques (et éventuellement des groupes à d'autres groupes).</block>
  <block id="927527f499c87b83ee052f9a293c0293" category="admonition">Ne créez pas de fichiers contenant le contenu de cette sous-section, qui est uniquement un exemple.</block>
  <block id="a7a48a32496dcd14ea6f94f7d89ab599" category="paragraph">Bien que cette configuration soit prédéterminée en fonction du profil de configuration, vous devez généralement comprendre comment tout s'établit comme un inventaire Ansible, comme suit :</block>
  <block id="9d92e1d6c46a5db6f99457758b8c71dc" category="paragraph">Pour chaque service, un fichier supplémentaire est créé sous<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> description de sa configuration :</block>
  <block id="7c98bb1c0d887b40b12614cc2cce909e" category="inline-link">NetApp accélère le déploiement de HA pour BeeGFS avec Ansible</block>
  <block id="2c3ce0f08dbef62630d61052bdd46f20" category="paragraph">Cette disposition permet de définir le service, le réseau et la configuration de stockage BeeGFS pour chaque ressource à un seul emplacement. En arrière-plan, le rôle BeeGFS rassemble la configuration nécessaire pour chaque fichier et nœud de bloc en fonction de cette structure d'inventaire. Pour plus d'informations, consultez ce bulletin de blog :<block ref="500a149f08c7164c80066a24197a4f46" category="inline-link-rx"></block>.</block>
  <block id="bab8955d49a06dc041f1cf99ae3c65aa" category="admonition">L'ID de noeud de type BeeGFS numérique et chaîne pour chaque service est automatiquement configuré en fonction du nom du groupe. Ainsi, en plus de l'exigence générale Ansible pour que les noms de groupe soient uniques, les groupes représentant un service BeeGFS doivent se terminer par un nombre unique pour le type de service BeeGFS que le groupe représente. Par exemple, META_01 et stor_01 sont autorisés, mais Metadata_01 et META_01 ne le sont pas.</block>
  <block id="fefc21957cc1bbb1f6a7704d95ad5e0d" category="summary">Vous pouvez déployer BeeGFS sur NetApp pour des nœuds de fichiers et de blocs validés en utilisant la deuxième génération de l'architecture de base BeeGFS de NetApp.</block>
  <block id="42f8643eb52a942747937327c72c8361" category="doc">Présentation du déploiement</block>
  <block id="ef200d7e9d983785df6b4e01fa65bf59" category="section-title">Collections et rôles Ansible</block>
  <block id="31f2ceaa03965649e2e37df5634511e7" category="paragraph">Vous déployez la solution BeeGFS sur NetApp à l'aide d'Ansible, un moteur d'automatisation IT très populaire qui permet d'automatiser les déploiements d'applications. Ansible utilise ensemble de fichiers appelés « inventaire », qui modélise le système de fichiers BeeGFS que vous souhaitez déployer.</block>
  <block id="87d27d52f7fc81e8a134f2e3d2a57ecf" category="inline-link">Collection NetApp E-Series BeeGFS</block>
  <block id="f4bf5484498b52d77cb39955020e5321" category="paragraph">Ansible permet à des entreprises telles que NetApp de développer leurs fonctionnalités intégrées à l'aide des collections sur Ansible Galaxy (voir<block ref="8dd9c2247c6151110981020f59a5fca3" category="inline-link-rx"></block>). Les collections incluent des modules qui effectuent une fonction ou une tâche spécifique (comme créer un volume E-Series) et incluent des rôles qui peuvent appeler plusieurs modules et d'autres rôles. Cette approche automatisée réduit la durée de déploiement du système de fichiers BeeGFS et du cluster HA sous-jacent. Il simplifie en outre l'ajout d'éléments de base pour développer les systèmes de fichiers existants.</block>
  <block id="1325754275d5677e560f21035bc1ac47" category="paragraph">Pour plus de détails, voir <block ref="dd39ef1fcc2e17fe1fe509b7ac2d5dea" category="inline-link-macro-rx"></block>.</block>
  <block id="5b3ae76175242b9c0c63ba5668657f49" category="admonition">Comme de nombreuses étapes sont nécessaires pour déployer la solution BeeGFS sur NetApp, NetApp ne prend pas en charge le déploiement manuel de la solution.</block>
  <block id="6201cef3e5bb8f42f2aa1876b8c1f544" category="section-title">Profils de configuration pour les éléments de base BeeGFS</block>
  <block id="3c411e2f06cd1b5275d2be84bb18a641" category="paragraph">Les procédures de déploiement couvrent les profils de configuration suivants :</block>
  <block id="3c1ad21a1c1a2804f8ace80b84822bfe" category="list-text">Un seul élément de base inclut des services de gestion, de métadonnées et de stockage.</block>
  <block id="416ad52da618754efb3680e957b1a048" category="list-text">Un second élément de base qui inclut les métadonnées et les services de stockage.</block>
  <block id="11047a79bd1eab4d52ba658a48a430e8" category="list-text">Un troisième élément inclut uniquement des services de stockage.</block>
  <block id="886066871646e69724c15beede051aa6" category="paragraph">Ces profils illustrent la gamme complète de profils de configuration recommandés pour les éléments de base NetApp BeeGFS. Pour chaque déploiement, le nombre de métadonnées et d'éléments de base de stockage ou d'éléments de base uniquement destinés aux services de stockage peut varier selon les procédures appliquées à la capacité et aux performances.</block>
  <block id="20cf8ff34f34ae23669e586d1092a0f9" category="section-title">Présentation des étapes de déploiement</block>
  <block id="9d863a0564ad86180bde2b2a6c27a6ed" category="paragraph">Le déploiement implique plusieurs tâches générales :</block>
  <block id="fd2f8c173ade715231c21c932686e38b" category="list-title">Déploiement matériel</block>
  <block id="f08d36149d715ffbb8eca9f7159e0d27" category="list-text">Assembler physiquement chaque élément de bâtiment.</block>
  <block id="abd55e01ead6dac45d997ad9c82c8019" category="inline-link-macro">Déployez le matériel</block>
  <block id="65353eb96f13d02029086d1790108e3c" category="list-text">Installez le rack et le matériel de câblage. Pour des procédures détaillées, voir <block ref="19367e6e5e194f2806703eb905741326" category="inline-link-macro-rx"></block>.</block>
  <block id="b9205e876aa43217d9358621cf2c6187" category="list-title">De déploiement logiciel</block>
  <block id="359f84c66084d8c8c9d4cb7ca3945bcd" category="inline-link-macro">Configurez les nœuds de fichiers et de blocs</block>
  <block id="f8367dab28e2315251df9dcf227916b5" category="list-text"><block ref="4cfaa56cb8da11f04e7ee8ae6dd86bcc" category="inline-link-macro-rx"></block>.</block>
  <block id="ee63db10faeceba4efb3b03145e0ec26" category="list-text">Configurez les adresses IP BMC sur les nœuds de fichiers</block>
  <block id="aa51221099b00aa6e09e3cb6b1b03f47" category="list-text">Installez un système d'exploitation pris en charge et configurez la mise en réseau de gestion sur les nœuds de fichiers</block>
  <block id="a75b117cd8d7af9205b2185d8afb8537" category="list-text">Configurez les adresses IP de gestion sur les nœuds de bloc</block>
  <block id="14f10d91a4d4d076d9f025fdb6134949" category="inline-link-macro">Configurez un nœud de contrôle Ansible</block>
  <block id="b81f7e6126c9f5040f05685e56e57af1" category="list-text"><block ref="6848fc9a1ed48359bab6d9326922d03c" category="inline-link-macro-rx"></block>.</block>
  <block id="51d961299f8aa9bb882574aae2a219eb" category="inline-link-macro">Réglez les paramètres du système en fonction des performances</block>
  <block id="9312585e52fd3b0a0898c7f73fdfd8cc" category="list-text"><block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block>.</block>
  <block id="2903652ee31835883feeb469228b4406" category="inline-link-macro">Créez l'inventaire Ansible</block>
  <block id="914b8eb4568f7c438e1d415af01c2787" category="list-text"><block ref="dbbcb9482f49ee969cddb7f10864cbd0" category="inline-link-macro-rx"></block>.</block>
  <block id="c8f38adfaba8270e793616e0556571c7" category="inline-link-macro">Définissez l'inventaire Ansible pour les éléments de base BeeGFS</block>
  <block id="2640957ad14de18b2d308da5e116b4a0" category="list-text"><block ref="56ee4018bb6227ffe39900ebf12f2472" category="inline-link-macro-rx"></block>.</block>
  <block id="d21cb96c35176f0f0ea13876f354d072" category="inline-link-macro">Déploiement de BeeGFS avec Ansible</block>
  <block id="a8169193bd5718bbe78111b3a1f874d7" category="list-text"><block ref="dffbd1bc941e2f4395de7cba04c6653b" category="inline-link-macro-rx"></block>.</block>
  <block id="096a6674c1f4ef681d88a6eb229299b7" category="inline-link-macro">Configurer les clients BeeGFS</block>
  <block id="f159952d71e33cd0a1ffbb2bcc4ce2ad" category="list-text"><block ref="75197807ccb18c9f99e8f2a2a3443aea" category="inline-link-macro-rx"></block>.</block>
  <block id="d6dd015562e1d088d87d28007ecfa541" category="admonition">Les procédures de déploiement incluent plusieurs exemples où du texte doit être copié dans un fichier. Portez une attention particulière aux commentaires en ligne signalés par les caractères “#” ou “//” pour tout ce qui doit ou peut être modifié pour un déploiement spécifique. Par exemple :<block ref="f791b43c55fc3520a5d297b1addbd507" prefix=" " category="inline-code"></block></block>
  <block id="d8ca15234a274a841f06a1d429141054" category="summary">Configurez la mise en réseau sur le contrôleur de gestion de la carte mère (BMC) de chaque serveur et configurez le port de gestion sur chaque contrôleur.</block>
  <block id="1cfd8029b1372ddacb436890446b43fd" category="doc">Configurez les nœuds de fichiers et les nœuds en mode bloc</block>
  <block id="d900235d99f416c3bfda0461cbb71f26" category="paragraph">Si la plupart des tâches de configuration logicielle sont automatisées au moyen des collections Ansible fournies par NetApp, vous devez configurer la mise en réseau sur le contrôleur de gestion de la carte de base (BMC) de chaque serveur et configurer le port de gestion sur chaque contrôleur.</block>
  <block id="02f510b4f0f01c83fb0898c7c21472f3" category="section-title">Configurez les nœuds de fichiers</block>
  <block id="58ee770c560ec650edbb0731c6882d53" category="list-text">Configurez la mise en réseau sur le contrôleur de gestion de la carte mère (BMC) de chaque serveur.</block>
  <block id="75ae096871a25daf3dcd5da902c66ecf" category="inline-link">Documentation Lenovo ThinkSystem</block>
  <block id="501998f9bebe4eeda8377a94578e9255" category="paragraph">Pour savoir comment configurer le réseau pour les nœuds de fichiers validés du serveur Lenovo SR665, consultez le<block ref="3a3ba9924e08a04d2eb4947b4cdb2550" category="inline-link-rx"></block>.</block>
  <block id="0c112c89dd8c3ce2b92d5e4844ea4641" category="admonition">Un contrôleur de gestion de la carte mère (BMC), parfois appelé processeur de service, est le nom générique de la fonctionnalité de gestion hors bande intégrée dans diverses plates-formes de serveurs qui fournissent un accès à distance même si le système d'exploitation n'est pas installé ou accessible. Les fournisseurs vendent généralement cette fonctionnalité avec leur propre marque. Par exemple, sur le Lenovo SR665, le contrôleur BMC est appelé le contrôleur XClarity (XCC)_ de _Lenovo.</block>
  <block id="290a84841d7341364c4abf862a74583f" category="list-text">Configurez les paramètres du système pour des performances maximales.</block>
  <block id="04c7f6322804081c61ca0d88cef85904" category="paragraph">Vous configurez les paramètres système à l'aide de la configuration UEFI (anciennement appelée BIOS) ou en utilisant les API Redfish fournies par de nombreux BMCs. Les paramètres système varient en fonction du modèle de serveur utilisé comme nœud de fichier.</block>
  <block id="354f37da23eacae1fc163775964a0a2e" category="paragraph">Pour savoir comment configurer les paramètres système des nœuds de fichiers Lenovo SR665 validés, reportez-vous à la section <block ref="dbe1843153b6696d3dd846d3a25ea7b2" category="inline-link-macro-rx"></block>.</block>
  <block id="7e57b24d8418675e1eb9185b3a783ef7" category="list-text">Installez Red Hat 8.4 et configurez le nom d'hôte et le port réseau utilisés pour gérer le système d'exploitation, y compris la connectivité SSH à partir du nœud de contrôle Ansible.</block>
  <block id="63b34e32fcac1724c46edd575672332b" category="paragraph">Ne configurez pas d'adresses IP sur l'un des ports InfiniBand pour le moment.</block>
  <block id="e9074e57167186919a163cd099187dd0" category="admonition">Bien qu'il ne soit pas strictement nécessaire, les sections suivantes présument que les noms d'hôte sont numérotés séquentiellement (comme h1-HN) et font référence aux tâches qui doivent être effectuées sur les hôtes impairs et pairs.</block>
  <block id="0123fb5bcbcd68deb7c43ec913e70705" category="inline-link">Comment enregistrer et souscrire un système RHEL</block>
  <block id="29f7e22c9a0b8d15ea802eee7a5e07cf" category="inline-link">Comment limiter les mises à jour</block>
  <block id="da5ddad82ac3e5b8ada040f6f5d0b4b1" category="list-text">Utilisez RedHat Subscription Manager pour enregistrer et abonner le système afin de permettre l'installation des packages requis dans les référentiels Red Hat officiels et de limiter les mises à jour vers la version prise en charge de Red Hat :<block ref="2663dc23102930c1933b613d215814ae" prefix=" " category="inline-code"></block>. Pour obtenir des instructions, reportez-vous à la section<block ref="2e2e1be81972e19947d90393d5319b6e" category="inline-link-rx"></block> et <block ref="bbd834e2960f33a50fb102fd4d31a6d9" category="inline-link-rx"></block>.</block>
  <block id="577885e812bad7e4780317a271722339" category="list-text">Activez le référentiel Red Hat contenant les packages requis pour la haute disponibilité.</block>
  <block id="3c438be737391744e2fed6f73c418638" category="inline-link-macro">Exigences technologiques</block>
  <block id="f12bdbd9e0ff4f2d314f49b8ae9d6e79" category="list-text">Mettez à jour tous les micrologiciels de l'HCA ConnectX-6 avec la version recommandée dans <block ref="27ecbcefd12957257b84a6d4c5608591" category="inline-link-macro-rx"></block>.</block>
  <block id="de2787072a70ede6b3c4b90ff28fe789" category="inline-link">Mlxup - Utilitaire de mise à jour et de requête</block>
  <block id="99ed7995ed20393c8d6d7d2ecdad4b12" category="paragraph">Cette mise à jour peut être effectuée en téléchargeant et en exécutant une version de l'outil mlxup qui regroupe le micrologiciel recommandé. Vous pouvez télécharger cet outil à partir de<block ref="83a01ab1999878f97a01b97d35857307" category="inline-link-rx"></block>.</block>
  <block id="febfb51b621938c49980eee52ab6a373" category="section-title">Configurez les nœuds en mode bloc</block>
  <block id="1dab115fdeed11b46ad9a32f690cfc8a" category="paragraph">Configurez les nœuds en mode bloc EF600 en configurant le port de gestion sur chaque contrôleur.</block>
  <block id="0631592349fc286da7627270b9c9b359" category="list-text">Configurez le port de gestion sur chaque contrôleur EF600.</block>
  <block id="3f7c08d9f511dbd36a44bc681e25e3bf" category="inline-link">Centre de documentation E-Series</block>
  <block id="83398f0ded44dc933df951171f29b604" category="paragraph">Pour obtenir des instructions sur la configuration des ports, reportez-vous à la section<block ref="4719a190e5f3bfbda84ab0e6295af1ef" category="inline-link-rx"></block>.</block>
  <block id="a1cdd0715dd7993c1664eea6d7f39810" category="list-text">Vous pouvez également définir le nom de la matrice de stockage pour chaque système.</block>
  <block id="6c8f452018d59ce25e69f9d3f8851b32" category="paragraph">La définition d'un nom peut faciliter la référence à chaque système dans les sections suivantes. Pour obtenir des instructions sur la définition du nom de la matrice, accédez à<block ref="4719a190e5f3bfbda84ab0e6295af1ef" category="inline-link-rx"></block>.</block>
  <block id="561abcc4bd5f30a9d5ee1e4c64d9a10d" category="admonition">Bien qu'il ne soit pas strictement nécessaire, les rubriques suivantes présument que les noms des matrices de stockage sont numérotés de façon séquentielle (comme c1 - CN) et font référence aux étapes à suivre sur les systèmes pairs ou impairs.</block>
  <block id="7042a03d018b94aee36197baf79897b2" category="summary">Pour optimiser les performances, nous vous recommandons de configurer les paramètres système sur le modèle de serveur que vous utilisez en tant que nœuds de fichiers.</block>
  <block id="bb2fcb1abe8d0829558e398d9acb4589" category="doc">Réglez les paramètres du système de nœud de fichiers en fonction des performances</block>
  <block id="e95c3b26aabb0242b0a38d72568b125a" category="paragraph">Pour optimiser les performances, nous vous recommandons de configurer les paramètres système sur le modèle de serveur que vous utilisez en tant que nœuds de fichiers.</block>
  <block id="291e90fb83bca326d06b5479d0ae7197" category="paragraph">Les paramètres système varient en fonction du modèle de serveur que vous utilisez comme nœud de fichier. Cette rubrique décrit comment configurer les paramètres système des nœuds de fichiers serveur Lenovo ThinkSystem SR665 validés.</block>
  <block id="cfa9d7ef51eae23751a0ea54765b99fd" category="section-title">Utilisez l'interface UEFI pour régler les paramètres du système</block>
  <block id="7afe745e5e5ded0e0cf311f6ab05ce41" category="paragraph">Le micrologiciel système du serveur Lenovo SR665 contient de nombreux paramètres de réglage qui peuvent être définis via l'interface UEFI. Ces paramètres de réglage peuvent affecter tous les aspects du fonctionnement du serveur et de son fonctionnement.</block>
  <block id="01d5e77f89697d310442aa744d5c4068" category="paragraph">Sous *Configuration UEFI &gt; Paramètres système*, réglez les paramètres système suivants :</block>
  <block id="6e2e169ab41f56781f3cd65629914fc6" category="section-title">Menu mode de fonctionnement</block>
  <block id="f7adfd4c98207b1161c7b693c16fa9ea" category="cell">*Paramètres système*</block>
  <block id="a3fb412bb8de9718b8510aa99340221a" category="cell">*Changer en*</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="1c2631aa94b6d5e1cc826b0cb76a87ba" category="paragraph">Mode de fonctionnement</block>
  <block id="90589c47f06eb971d548591f23c285af" category="paragraph">Personnalisées</block>
  <block id="43e16592d1b7c57c68cdf68bcd7f2fbd" category="paragraph">CTDP</block>
  <block id="e1ba155a9f2e8c3be94020eef32a0301" category="paragraph">Manuel</block>
  <block id="db0877bc3fbb4ce0ffd2f36fa5470581" category="paragraph">Manuel CTDP</block>
  <block id="9de6d14fff9806d4bcd1ef555be766cd" category="paragraph">350</block>
  <block id="43287f46609a4dc60f40223b99452814" category="paragraph">Limite de puissance de l'ensemble</block>
  <block id="8bec16a6c589939ad9d0a3c20f7dd8dc" category="paragraph">Mode efficacité</block>
  <block id="bcfaccebf745acfd5e75351095a5394a" category="paragraph">Désactiver</block>
  <block id="50a4d260500229aae705dffbef792499" category="paragraph">Contrôle global-état-contrôlé</block>
  <block id="bbb8600e28b07b4e7765ccb37c8ba72d" category="paragraph">États P SOC</block>
  <block id="16a2e561c536a77cbfd10490ea398be6" category="paragraph">P0</block>
  <block id="f7d2d14860cfdee82e8cf9418c1ec624" category="paragraph">DF États C.</block>
  <block id="450e20de3fc0482fa7bdadc4622005ed" category="paragraph">État P 1</block>
  <block id="9c1a39470ba5d6a8856c5e813e20ef6b" category="paragraph">Activation de la mise hors tension de la mémoire</block>
  <block id="3011761cbf6a8eb38a41f6b38210c119" category="paragraph">Nœuds NUMA par socket</block>
  <block id="4142a6b2c0ac3aaf643751457e9aad6a" category="paragraph">NPS1</block>
  <block id="cdceaf6498461c15ce1ae0800bf60c66" category="section-title">Menu périphériques et ports d'E/S.</block>
  <block id="fb31ba7c369028665e7e1a20bd645da6" category="paragraph">IOMMU</block>
  <block id="ada62bbe41ae187c3f0f777ffbd44d28" category="section-title">Menu d'alimentation</block>
  <block id="e7dc1149b98b9a234419b52cb65c86eb" category="paragraph">Frein d'alimentation PCIe</block>
  <block id="a4fb96bd64d4ecceb3f0f416f7032bb9" category="section-title">Menu processeurs</block>
  <block id="78ee21f7e9d290c773c1aa6ae0d03303" category="paragraph">Contrôle global de l'état C.</block>
  <block id="dc8a824c345b5e3bbaa79fce219830c2" category="paragraph">Mode SMT</block>
  <block id="28fb70bc7fdb441f9e6550205a24c92c" category="paragraph">PC</block>
  <block id="83ed73e76e0c1cfe38ef9627b7ae0fe0" category="section-title">Utilisez l'API Redfish pour régler les paramètres du système</block>
  <block id="2bfb51b6fb78d5540135d28668652ab6" category="paragraph">En plus de l'utilisation de la configuration UEFI, vous pouvez utiliser l'API Redfish pour modifier les paramètres du système.</block>
  <block id="33e221e2cea2342a6bae3c4c24f33827" category="inline-link">Site Web DMTF</block>
  <block id="d96afe3ab332c2cc42ac69c811923ba7" category="paragraph">Pour plus d'informations sur le schéma Redfish, reportez-vous au<block ref="108ef396f9aef1d6bcaea08379b877eb" category="inline-link-rx"></block>.</block>
  <block id="0dfb05d4ea761122194fbafcd7f3a5eb" category="summary">Le design de deuxième génération de la solution BeeGFS sur NetApp a été vérifié à l'aide de trois profils de configuration d'élément de base.</block>
  <block id="57448c4b7cf64af279b612502ae49c08" category="doc">Vérification de la conception</block>
  <block id="dd444e75087c1912fb6b2f9435eec0ba" category="paragraph">Les profils de configuration incluent les éléments suivants :</block>
  <block id="ba33770125b7249843843e3524e48e5e" category="list-text">Un élément de base unique, incluant la gestion BeeGFS, les métadonnées et les services de stockage.</block>
  <block id="dc0ae690014a6e4ed1d17d728fce2e3a" category="list-text">Des métadonnées BeeGFS plus un élément de base de stockage.</block>
  <block id="f789cf74ad54c463cf1827c970b695c0" category="list-text">Un élément de base BeeGFS uniquement pour le stockage.</block>
  <block id="c7dfb273d9605bd7640f597b869aef23" category="paragraph">Les éléments de base ont été reliés à deux switchs Mellanox Quantum InfiniBand (MQM8700). Dix clients BeeGFS étaient également connectés aux commutateurs InfiniBand et utilisés pour exécuter des utilitaires de banc d'essai synthétiques.</block>
  <block id="f27d4d7620b1158ad830c498a6faf1c5" category="paragraph">La figure suivante montre la configuration BeeGFS utilisée pour valider la solution BeeGFS sur NetApp.</block>
  <block id="c76715003b58d0566ea40579fbf2b849" category="paragraph"><block ref="c76715003b58d0566ea40579fbf2b849" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfa0c76fc554fa6837cfe216381eb3df" category="section-title">Répartition des fichiers BeeGFS</block>
  <block id="73bf7a09a102bdf9e2984ff15f2e62cc" category="paragraph">Les systèmes de fichiers parallèles ont notamment pour avantage de répartir les fichiers individuels sur plusieurs cibles de stockage, qui peuvent représenter des volumes sur les mêmes systèmes de stockage sous-jacents ou différents.</block>
  <block id="f781a67c7f55c5a3d6d505e3569ff3c3" category="inline-link">Répartition</block>
  <block id="0102b96fad09ea07b9b6c943ac48e706" category="inline-link">API de répartition</block>
  <block id="be4c29766b20870006df2b27be87994e" category="paragraph">Dans BeeGFS, vous pouvez configurer la répartition par répertoire et par fichier pour contrôler le nombre de cibles utilisées pour chaque fichier et pour contrôler la taille chunksize (ou taille de bloc) utilisée pour chaque bande de fichier. Cette configuration permet au système de fichiers de prendre en charge différents types de charges de travail et de profils d'E/S sans avoir à reconfigurer ou à redémarrer des services. Vous pouvez appliquer les paramètres de bande à l'aide du<block ref="525acd7d8ba0c119c88006411faf1d89" prefix=" " category="inline-code"></block> Outil de ligne de commande ou avec des applications qui utilisent l'API de répartition. Pour plus d'informations, consultez la documentation BeeGFS pour<block ref="d307c57bb94d8613bf23053de378d367" category="inline-link-rx"></block> et<block ref="d53017212bcf8a78d44d2efbf061a88a" category="inline-link-rx"></block>.</block>
  <block id="706c7a765e77b694cee17941887ccaaf" category="paragraph">Pour obtenir les meilleures performances, les motifs de bande ont été ajustés tout au long des tests, et les paramètres utilisés pour chaque test sont notés.</block>
  <block id="a40727fe75676638a1b87009fafed260" category="section-title">Tests de bande passante IOR : plusieurs clients</block>
  <block id="a4c77786e4208d299fbf0c491eb99106" category="inline-link">GitHub HPC</block>
  <block id="8b2e6032c8801b379e2fd75991ebb452" category="paragraph">Les tests de bande passante IOR ont utilisé OpenMPI pour exécuter des travaux parallèles du générateur d'E/S synthétique IOR (disponible à partir de<block ref="323e2ec03a214c41088a20e514e0a41e" category="inline-link-rx"></block>) Sur l'ensemble des 10 nœuds clients à un ou plusieurs blocs de construction BeeGFS. Sauf mention contraire :</block>
  <block id="219cae8db1869355f9c480a2fe2c5d6d" category="list-text">Tous les tests ont utilisé des E/S directes avec une taille de transfert de 1MiB.</block>
  <block id="de2223ae9c343f387e4a3549abf2a4fc" category="list-text">La répartition des fichiers BeeGFS est définie sur une taille chunksize de 1 Mo et une cible par fichier.</block>
  <block id="8aa2f9ce00cbab54a4479ba40f638773" category="paragraph">Les paramètres suivants ont été utilisés pour IOR avec le nombre de segments ajusté afin de maintenir la taille de fichier d'agrégat à 5 Tio pour un élément de base et 40 Tio pour trois éléments de base.</block>
  <block id="a404b853baec85523834a070479317ea" category="paragraph">La figure suivante montre les résultats du test IOR avec un seul élément de base BeeGFS (gestion, métadonnées et stockage).</block>
  <block id="f93ba433079ca784ff0a18a8928d24db" category="paragraph"><block ref="f93ba433079ca784ff0a18a8928d24db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="578da280bb783045852047cd081f65fd" category="paragraph">La figure suivante présente les résultats du test IOR avec un seul élément de base de stockage + métadonnées BeeGFS.</block>
  <block id="db43f39b8c5d5c4ef9f8938eb09db411" category="paragraph"><block ref="db43f39b8c5d5c4ef9f8938eb09db411" category="inline-image-macro-rx" type="image"></block></block>
  <block id="720f0ab0184643d51a1197789875c393" category="paragraph">La figure suivante montre les résultats du test IOR avec un seul élément de base BeeGFS Storage uniquement.</block>
  <block id="13e0e7c553ecdbe3ea238e89713a4a47" category="paragraph"><block ref="13e0e7c553ecdbe3ea238e89713a4a47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e3b081c19738d20e5f52be67ac8d0361" category="paragraph">La figure suivante montre les résultats du test IOR avec trois éléments de base BeeGFS.</block>
  <block id="04344e81ce55b155d052b799f4737621" category="paragraph"><block ref="04344e81ce55b155d052b799f4737621" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9abc8771b8098ae505a1ff386b580ef3" category="paragraph">Comme on pouvait s'y attendre, la différence de performances entre l'élément de base et les métadonnées suivantes + l'élément de base du stockage est négligeable. En comparant les métadonnées + l'élément de base du stockage et un élément de base uniquement destiné au stockage, on constate une légère augmentation des performances de lecture en raison des disques supplémentaires utilisés comme cibles de stockage. Toutefois, il n'y a pas de différence significative dans les performances d'écriture. Pour améliorer les performances, vous pouvez ajouter plusieurs éléments de base pour faire évoluer les performances de manière linéaire.</block>
  <block id="7465e2f5afc6bc7ebff6ea05e19d52d3" category="section-title">Tests de bande passante IOR : client unique</block>
  <block id="4cb463d8f88ac93de9fecb82d125d05c" category="paragraph">Le test de bande passante IOR a utilisé OpenMPI pour exécuter plusieurs processus IOR à l'aide d'un seul serveur GPU hautes performances afin d'explorer les performances réalisables pour un même client.</block>
  <block id="6a2583bcd41d0a03702444d541162685" category="paragraph">Ce test compare également le comportement et les performances de relecture de BeeGFS lorsque le client est configuré pour utiliser le cache de page du noyau Linux <block ref="6e97c2177f166e83fa16865e701a7917" prefix="(" category="inline-code"></block>) par rapport à la valeur par défaut<block ref="8b365ffbd5d92a1b9c20f227a4b6fcec" prefix=" " category="inline-code"></block> réglage.</block>
  <block id="0123881fd1c799161bf0cc847d402a42" category="paragraph">Le mode de mise en cache native utilise le cache de page du noyau Linux sur le client, ce qui permet aux opérations de relecture de provenir de la mémoire locale au lieu d'être retransmises sur le réseau.</block>
  <block id="2748a8672e1df7ff75dc04c3e0086a44" category="paragraph">Le diagramme suivant montre les résultats du test IOR avec trois éléments de base BeeGFS et un seul client.</block>
  <block id="d07c2b895ad73e3adadd62d9b20eb243" category="paragraph"><block ref="d07c2b895ad73e3adadd62d9b20eb243" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e301b61d3683cc584633009bafffa70" category="admonition">La répartition BeeGFS pour ces tests a été définie sur une taille chunksize de 1 Mo avec huit cibles par fichier.</block>
  <block id="8c5eae70f19670232111d1823b5edb56" category="paragraph">Bien que les performances d'écriture et de lecture initiale soient supérieures en mode tampon par défaut, pour les charges de travail qui relisent plusieurs fois les mêmes données, le mode de mise en cache natif a permis d'optimiser considérablement les performances. Cette amélioration des performances de relecture est importante pour les charges de travail telles que l'apprentissage profond qui relire le même dataset plusieurs fois sur plusieurs séries de tests.</block>
  <block id="e9f3e979fd823256ea73296f49e954da" category="section-title">Test de performance des métadonnées</block>
  <block id="e3195dd21dbd9ee2c6c42f0c8a6c7128" category="paragraph">Les tests de performance des métadonnées ont utilisé l'outil MDTest (inclus dans IOR) pour mesurer la performance des métadonnées de BeeGFS. Les tests ont utilisé OpenMPI pour exécuter des travaux parallèles sur les dix nœuds clients.</block>
  <block id="44ece23db4ca31ae5b81205ad387af00" category="paragraph">Les paramètres suivants ont été utilisés pour exécuter le test de référence avec le nombre total de processus passe de 10 à 320 par pas de 2x et avec une taille de fichier de 4 ko.</block>
  <block id="b872c01a040702b121dc5f52261e99e0" category="paragraph">Les performances des métadonnées ont été mesurées en premier avec un ou deux blocs de base de stockage + métadonnées afin de montrer l'évolution des performances en ajoutant des éléments de base supplémentaires.</block>
  <block id="c6c65b36c5c466822447bc4c94abd80c" category="paragraph">Le diagramme suivant montre les résultats MDTest avec un bloc de construction BeeGFS + stockage.</block>
  <block id="a5ab5340467c6b4a3a4a7920c54ae8f3" category="paragraph"><block ref="a5ab5340467c6b4a3a4a7920c54ae8f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d4514dbb64a843f08caa7fe8140c121" category="paragraph">Le diagramme suivant montre les résultats MDTest avec deux métadonnées BeeGFS + des modules de stockage.</block>
  <block id="aec56a0b02b345d6f601383808523dc6" category="paragraph"><block ref="aec56a0b02b345d6f601383808523dc6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bcc55d27d7ea16e6df55e7ec18fd377" category="section-title">Validation fonctionnelle</block>
  <block id="b15005270887e63f3c777c3722631021" category="paragraph">Dans le cadre de la validation de cette architecture, NetApp a effectué plusieurs tests fonctionnels :</block>
  <block id="008151af32cff92eed6431ca4cf43500" category="list-text">Défaillance d'un seul port InfiniBand client en désactivant le port de commutateur.</block>
  <block id="73b83d70be21d004da6e079b00bb5948" category="list-text">Défaillance d'un seul port InfiniBand de serveur en désactivant le port du commutateur.</block>
  <block id="f7b8ad51ce1aad4a6e15c6583fcbdd55" category="list-text">Déclenchement d'une mise hors tension immédiate d'un serveur à l'aide du contrôleur BMC.</block>
  <block id="6148d6995d77c1b8b1bfd4c6f299162b" category="list-text">Placement normal d'un nœud en veille et basculement de service vers un autre nœud.</block>
  <block id="1cc77e3527f4ac004c8a5cdb5cac049e" category="list-text">Il est normal de remettre un nœud en ligne et de renvoyer les services vers le nœud d'origine.</block>
  <block id="908463015e2671e9d90b06353dabae03" category="list-text">Mise hors tension de l'un des commutateurs InfiniBand à l'aide de la PDU. Tous les tests ont été réalisés alors que les tests de stress étaient en cours avec le<block ref="2f737a641ac05fa577f51efab6ed8e27" prefix=" " category="inline-code"></block> Paramètre défini sur les clients BeeGFS. Aucune erreur ni interruption des E/S n'a été observée.</block>
  <block id="c49182dc0c7a70b9cd2e10853d9ec6c7" category="inline-link">Changement</block>
  <block id="788a9659515e495b379621cac9040872" category="admonition">Il y a un problème connu (voir<block ref="9892b1a82a523d642c4ee2c76b765b8b" category="inline-link-rx"></block>) Lorsque les connexions RDMA BeeGFS client/serveur sont interrompues de façon inattendue, soit par la perte de l'interface principale (comme défini dans la section<block ref="7f8e8358da4bb8d8e7f6f717ad9eb0e9" prefix=" " category="inline-code"></block>) Ou un serveur BeeGFS est défaillant ; les E/S du client actif peuvent se bloquer pendant dix minutes avant de reprendre. Ce problème ne se produit pas lorsque les nœuds BeeGFS sont correctement placés en attente pour la maintenance planifiée ou si TCP est utilisé.</block>
  <block id="132789d9474eae064aef2cd5266138d8" category="section-title">Validation du superPOD et du BasePOD NVIDIA DGX A100</block>
  <block id="d88f3188efb434f39b922170592443b5" category="paragraph">NetApp a validé une solution de stockage pour NVIDIA DGX A100 SuperPOD à l'aide d'un système de fichiers BeeGFS constitué de trois éléments de base avec les métadonnées plus le profil de configuration du stockage appliqué. L'effort de qualification a participé au test de la solution décrite par cette architecture NVA avec vingt serveurs GPU DGX A100 exécutant plusieurs bancs d'essai de stockage, d'apprentissage machine et d'apprentissage profond. Tout le stockage certifié pour une utilisation dans le superPOD DGX A100 de NVIDIA est automatiquement certifié pour une utilisation dans les architectures NVIDIA BasePOD.</block>
  <block id="7c6326491c77a63417df94790ba07083" category="inline-link">NVIDIA DGX SuperPOD avec NetApp</block>
  <block id="64dc43320ec1a44c390fafb5e2408f4b" category="inline-link">NVIDIA DGX BasePOD</block>
  <block id="33d753992c8525a016e60650889ef7a9" category="paragraph">Pour plus d'informations, voir<block ref="917e0b817a1bc5579c3d00c8de7a0790" category="inline-link-rx"></block> et<block ref="d4d49ddfca3de3daecdc231399362db8" category="inline-link-rx"></block>.</block>
  <block id="2bf773d42bef6909b232e854a16b3ec1" category="summary">Configurez Pacemaker et Corosync pour qu'elles puissent évoluer au-delà de cinq éléments de base.</block>
  <block id="22892d2f5bfdfba001a02572258cca62" category="doc">Faites évoluer votre infrastructure au-delà de cinq éléments de base</block>
  <block id="cfd24c157d6cd9f200eb8c3cf68ee7ed" category="paragraph">Vous pouvez configurer Pacemaker et Corosync pour qu'elle dépasse cinq éléments de base (10 nœuds de fichiers). Toutefois, il y a des inconvénients pour les grands clusters, et finalement Pacemaker et Corosync imposent un maximum de 32 nœuds.</block>
  <block id="9e59383f4d4ca677923852ae81323178" category="paragraph">NetApp n'a testé que les clusters BeeGFS HA pour jusqu'à 10 nœuds. Il n'est pas recommandé ou pris en charge de faire évoluer des clusters individuels au-delà de cette limite. Toutefois, les systèmes de fichiers BeeGFS nécessitent une évolutivité bien supérieure à 10 nœuds, et NetApp en est responsable dans la solution BeeGFS sur NetApp.</block>
  <block id="72799e21cef92db3ad98f7c0a923e398" category="paragraph">En déployant plusieurs clusters HA contenant un sous-ensemble des éléments de base de chaque système de fichiers, vous pouvez faire évoluer le système de fichiers BeeGFS indépendamment de toutes les limites recommandées ou strictes sur les mécanismes de mise en cluster HA sous-jacents. Dans ce scénario, procédez comme suit :</block>
  <block id="5c3bc488def3e9ba17589e3a75fdd5c0" category="list-text">Créez un nouvel inventaire Ansible représentant les clusters HA supplémentaires, puis ignorez la configuration d'un autre service de gestion. Pointez plutôt le<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block> variable dans chaque cluster supplémentaire<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block> Vers l'IP pour le premier service de gestion BeeGFS.</block>
  <block id="321f3f6b80bc5f9c02e358e120fa74b0" category="list-text">Lorsque vous ajoutez des clusters haute disponibilité supplémentaires sur le même système de fichiers, vérifiez ce qui suit :</block>
  <block id="32e66ce3c599bce3fc21c5a5943b6f4d" category="list-text">Les ID de nœud BeeGFS sont uniques.</block>
  <block id="50b9a2f3bd2dc22b582e6e66d12bf0ff" category="list-text">Les noms de fichiers correspondant à chaque service sous<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> est unique dans tous les clusters.</block>
  <block id="6219a68f7552d8328f7fc5df8510ffc3" category="list-text">Les adresses IP du client et du serveur BeeGFS sont uniques dans tous les clusters.</block>
  <block id="16d3c50a6b84c7701cadfdf721b74007" category="list-text">Le premier cluster HA contenant le service de gestion BeeGFS est exécuté avant de tenter de déployer ou de mettre à jour des clusters supplémentaires.</block>
  <block id="6f94cb93f82c2013e179dc630a5dd715" category="list-text">Maintenir les inventaires pour chaque cluster HA séparément dans leur propre arborescence de répertoires.</block>
  <block id="079e1a9e099799d390c677577618ecce" category="paragraph">La combinaison des fichiers d'inventaire de plusieurs clusters dans une arborescence de répertoires peut entraîner des problèmes avec la façon dont le rôle BeeGFS HA agrège la configuration appliquée à un cluster donné.</block>
  <block id="f4250b17c613a290cad4edf8e2bab3fd" category="admonition">Chaque cluster haute disponibilité n'a aucune exigence à évoluer jusqu'à cinq éléments de base avant d'en créer un nouveau. Dans bien des cas, la gestion requiert moins d'éléments de base par cluster est plus simple. Une approche consiste à configurer les éléments de base de chaque rack en tant que cluster haute disponibilité.</block>
  <block id="d1da0cd6852302b521f35aeee065f5ea" category="summary">Suivez les bonnes pratiques pour déployer la solution BeeGFS sur NetApp.</block>
  <block id="38b622e4d5c9d918330c81663f61a4e3" category="doc">Passez en revue les bonnes pratiques</block>
  <block id="d780de93793370946b2449b88a29b5ea" category="section-title">Conventions standard</block>
  <block id="2028bcc5ed7fdc8ba437b0150866ff2c" category="paragraph">Lors du montage physique et de la création du fichier d'inventaire Ansible, respecter les conventions standard suivantes (pour plus d'informations, voir <block ref="ecd3f3fdba3715697adf284eecd1c932" category="inline-link-macro-rx"></block>).</block>
  <block id="b4d19c971bd6ad93985147c0ce9477c8" category="list-text">Les noms d'hôte de nœud de fichiers sont numérotés séquentiellement (h01-HN), les chiffres inférieurs se trouvant en haut du rack et les chiffres plus élevés en bas.</block>
  <block id="0a4e8ee6eb2b3c9ae6b2864c18db1a80" category="paragraph">Par exemple, la convention de dénomination<block ref="6171c77957e7dd932771522d0f5313aa" prefix=" " category="inline-code"></block> ressemble à :<block ref="8afb08c5a5c2666b19de0aaba8de4d93" prefix=" " category="inline-code"></block>.</block>
  <block id="7bf4bcec78c083e165c31432234ebef8" category="list-text">Chaque nœud de bloc comprend deux contrôleurs de stockage, chacun avec son propre nom d'hôte.</block>
  <block id="1d6d5c920cb7d130fd45d8ced35ebec2" category="paragraph">Un nom de baie de stockage est utilisé pour désigner l'ensemble du système de stockage en mode bloc dans le cadre d'un inventaire Ansible. Les noms de matrice de stockage doivent être numérotés de façon séquentielle (a01 - an), et les noms d'hôte des contrôleurs individuels sont dérivés de cette convention de nommage.</block>
  <block id="213b6742fe86c9b7a08c68d5206d723a" category="paragraph">Par exemple, un nœud de bloc nommé<block ref="ca9fd584227ff345bca2ef90d5c56e63" prefix=" " category="inline-code"></block> en général, des noms d'hôte peuvent être configurés pour chaque contrôleur comme<block ref="86ee3de8557579a76634023aa5ccc100" prefix=" " category="inline-code"></block> et<block ref="32665fb108839c23a5db4a463e74176e" prefix=" " category="inline-code"></block>, Mais être mentionné dans un inventaire Ansible comme<block ref="ca9fd584227ff345bca2ef90d5c56e63" prefix=" " category="inline-code"></block>.</block>
  <block id="a902add826ee667d7f067acb8b49432f" category="list-text">Les nœuds de fichiers et de blocs du même bloc de construction partagent le même schéma de numérotation et sont adjacents les uns aux autres dans le rack, les deux nœuds de fichiers étant situés en haut et les deux nœuds de bloc directement en dessous.</block>
  <block id="2761f73c104511b8aaeef2eb6c84f3d3" category="paragraph">Par exemple, dans le premier module, les nœuds de fichiers h01 et h02 sont tous deux connectés directement aux nœuds de bloc a01 et a02. De haut en bas, les noms d'hôte sont h01, h02, a01 et a02.</block>
  <block id="33324ee77729f51ada2c5446c9c21488" category="list-text">Les blocs de construction sont installés dans un ordre séquentiel en fonction de leurs noms d'hôtes, de sorte que les noms d'hôtes aux numéros inférieurs se trouvent en haut du rack et les noms d'hôtes aux numéros supérieurs se trouvent en bas.</block>
  <block id="afdf73d1fa37280d63c602fa6be27740" category="paragraph">L'objectif est de réduire la longueur du câble qui passe en haut des commutateurs du rack et de définir une pratique de déploiement standard afin de simplifier le dépannage. Pour les centres de données où cela n'est pas autorisé en raison de problèmes liés à la stabilité des racks, l'inverse est certainement autorisé, en remplissant le rack par le bas vers le haut.</block>
  <block id="b4c0fb3649e4f85d78611d90d2d2d308" category="section-title">Configuration du réseau de stockage InfiniBand</block>
  <block id="815b2630d684df2f4894bd753d3a1fcb" category="paragraph">Moitié des ports InfiniBand sur chaque nœud de fichiers sont utilisés pour se connecter directement aux nœuds de bloc. L'autre moitié est connectée aux commutateurs InfiniBand et est utilisée pour la connectivité client-serveur BeeGFS. Pour déterminer la taille des sous-réseaux IPoIB utilisés pour les clients et les serveurs BeeGFS, vous devez tenir compte de la croissance prévue de votre cluster Compute/GPU et de votre système de fichiers BeeGFS. Si vous devez vous écarter des plages IP recommandées, n'oubliez pas que chaque connexion directe d'un bloc de construction unique possède un sous-réseau unique et qu'il n'y a pas de chevauchement avec les sous-réseaux utilisés pour la connectivité client-serveur.</block>
  <block id="a4f2d907e6fd183bbbc4d275c08b7a9a" category="section-title">Connexions directes</block>
  <block id="07a0544547e3cceec6f669bd25c6a605" category="paragraph">Les nœuds de fichiers et de blocs dans chaque bloc de construction utilisent toujours les adresses IP du tableau suivant pour leurs connexions directes.</block>
  <block id="d9938c4beed355ac7387d03d8f191c9e" category="admonition">Ce schéma d'adressage adhère à la règle suivante : le troisième octet est toujours impair ou pair, ce qui dépend du fait que le nœud de fichier est impair ou pair.</block>
  <block id="b55e37e80a68661366be8c4377b13489" category="cell">Nœud de fichier</block>
  <block id="90c8d508b315842cddaf605e8e068d6f" category="cell">Port IB</block>
  <block id="75ba8d70e3692ba200f0e0df37b4d2ae" category="cell">Adresse IP</block>
  <block id="d7f9ab96aecba4fb98ecf8831eb0a462" category="cell">Nœud de bloc</block>
  <block id="b9549a36d11b47e2d2f9389f6363ff8e" category="cell">IP physique</block>
  <block id="0d01a155a448abaa8ab4b0bdd3ea5e54" category="cell">IP virtuel</block>
  <block id="e9813c434db44aa063e37598de3ed515" category="cell">Impair (h1)</block>
  <block id="9d928738606162dca1d244ffcbdf0036" category="cell">i1a</block>
  <block id="8f337c973339dd7093883bd28ddb6588" category="cell">192.168.1.10</block>
  <block id="495cb471115cc2dbd5c60736f989aa8c" category="cell">Impair (c1)</block>
  <block id="e36314e624d2b2ca257e1f1ecb381f93" category="cell">2a</block>
  <block id="d984a05fa268b7cc6ac052a38960aeb2" category="cell">192.168.1.100</block>
  <block id="80f8cac1e092ca14301921951cf77f91" category="cell">192.168.1.101</block>
  <block id="c7a617044afee64ec7d511879e8b194c" category="cell">i2a</block>
  <block id="d731a116ccfe40ce4a5adb1bf565d785" category="cell">192.168.3.10</block>
  <block id="a9aeb028763672267b98adb1e61f06ca" category="cell">192.168.3.100</block>
  <block id="868e778e153cfafee02c89678e31e3e4" category="cell">192.168.3.101</block>
  <block id="b723decd732b31d828ae939f8f8c81fb" category="cell">i3a</block>
  <block id="28013a9391888f81944ead3ec1401cb0" category="cell">192.168.5.10</block>
  <block id="cfb1a9d899157fd3919c08dceff7fe61" category="cell">Pair (c2)</block>
  <block id="8945c747c6a4da714083579891b2495a" category="cell">192.168.5.100</block>
  <block id="538f8a364ff4308c16dbf7a80a554b5f" category="cell">192.168.5.101</block>
  <block id="d4d9efce9a26c8551723c677f65e1284" category="cell">i4a</block>
  <block id="7e7269d72492d715bbd00efdcdec7e0a" category="cell">192.168.7.10</block>
  <block id="1fbf861a0f4d9494682cfff33756b7aa" category="cell">192.168.7.100</block>
  <block id="7a1a4e2ee2757f302d47c7e3cdc8fcc3" category="cell">192.168.7.101</block>
  <block id="1442135832b351ed9b2f3b91f2393ec7" category="cell">Pair (h2)</block>
  <block id="0522334c503ae8e87d77104f7b27ba17" category="cell">192.168.2.10</block>
  <block id="f8bc2fbe2c937ea5b5e8839cbea69491" category="cell">2b</block>
  <block id="28de33b5199547c2f026595b7175a940" category="cell">192.168.2.100</block>
  <block id="d006845bf7fd39e054131ca6f76c2c47" category="cell">192.168.2.101</block>
  <block id="3a1cc00317003b20386d92ca13328e3d" category="cell">192.168.4.10</block>
  <block id="ccce62893693ca1e63992fa77159dce3" category="cell">192.168.4.100</block>
  <block id="eab39d2ba2b7a903ccf8cef112e1d506" category="cell">192.168.4.101</block>
  <block id="02def76181eddeab3ec0492be002417d" category="cell">192.168.6.10</block>
  <block id="d4b42e0f0d80e9c910e062f49b48b5f5" category="cell">192.168.6.100</block>
  <block id="f23edf799227dfd20d80544836aad8e9" category="cell">192.168.6.101</block>
  <block id="5e0ca78bea1b6ed4af93b1b1c5d7c573" category="cell">192.168.8.10</block>
  <block id="3581177979a7b934a2accd3f5f999444" category="cell">192.168.8.100</block>
  <block id="49213c8f0e8758438d7a69e2789a8b7d" category="cell">192.168.8.101</block>
  <block id="39927fda75baba1d602f4ac8906cb4ef" category="section-title">Schéma d'adressage IPoIB BeeGFS client-serveur (deux sous-réseaux)</block>
  <block id="db65743173e4ff7d9ed62df6220dc4a4" category="paragraph">Pour permettre aux clients BeeGFS d'utiliser deux ports InfiniBand, deux sous-réseaux IPoIB sont requis avec la moitié des services de serveur BeeGFS configurés avec une adresse IP préférée sur chaque sous-réseau pour s'assurer que les clients utilisent deux ports InfiniBand pour maximiser la redondance et le débit possible vers le système de fichiers.</block>
  <block id="5e98efce8292b94590f3ca502c1d8697" category="paragraph">Chaque nœud de fichier exécute plusieurs services BeeGFS Server (gestion, métadonnées ou stockage). Pour permettre à chaque service de basculer de manière indépendante vers l'autre nœud de fichiers, chaque service est configuré avec des adresses IP uniques qui peuvent basculer entre les deux nœuds (parfois appelées interfaces logiques ou LIF).</block>
  <block id="4db8c0036deb36a38e4df4660af9ed06" category="paragraph">Bien qu'il ne soit pas obligatoire, ce déploiement suppose que les plages de sous-réseau IPoIB suivantes sont utilisées pour ces connexions et définit un modèle d'adressage standard qui applique les règles suivantes :</block>
  <block id="8d41eefa8441a4ca177fe0f2676a9512" category="list-text">Le second octet est toujours impair ou pair, en fonction du fait que le port InfiniBand du nœud de fichiers est impair ou pair.</block>
  <block id="6482f8ef9c5ff1d8a971601fcad837d6" category="list-text">Les adresses IP du cluster BeeGFS sont toujours<block ref="4e125a0674be9f13c20781458a4b0f90" prefix=" " category="inline-code"></block> ou<block ref="282f5359a5438e5159fd6bcdbe731731" prefix=" " category="inline-code"></block>.</block>
  <block id="3aed58e1cc4af0e5cda8b7e10e2fd863" category="admonition">En plus de l'interface utilisée pour la gestion du système d'exploitation intrabande, Corosync peut utiliser des interfaces supplémentaires pour la synchronisation et la battements cardiaques du cluster. Cela permet de s'assurer que la perte d'une interface unique n'entraîne pas l'arrêt complet du cluster.</block>
  <block id="d95a2f19c705379e32f8030de274d07e" category="list-text">Le service BeeGFS Management est toujours à<block ref="770ab4aed0623ab2da7c6d93d36e1626" prefix=" " category="inline-code"></block> ou<block ref="89232954d2214028ecaa11033c8e7a25" prefix=" " category="inline-code"></block>.</block>
  <block id="29cd1587ba2833db9af29eac16f0d72b" category="list-text">Les services de métadonnées de BeeGFS sont toujours à<block ref="8e899642f9ef8d71ee877d1780467578" prefix=" " category="inline-code"></block> ou<block ref="57a55b99bfac8ec35796e4ae40f5540c" prefix=" " category="inline-code"></block>.</block>
  <block id="60c1357dfcd221c354054e43ac815018" category="list-text">Les services de stockage BeeGFS sont toujours à<block ref="7bda92dd6fa15b04835e990fcef5c6f7" prefix=" " category="inline-code"></block> ou<block ref="7bda92dd6fa15b04835e990fcef5c6f7" prefix=" " category="inline-code"></block>.</block>
  <block id="be092b10130fe0c97dd9358f0c131935" category="list-text">Adresses dans la plage<block ref="202a0146090f5e2d4eabc0b9ffeab50c" prefix=" " category="inline-code"></block> à<block ref="d0757c31b357693695458d7f69f1db7d" prefix=" " category="inline-code"></block> sont réservés aux clients.</block>
  <block id="3ac8c958d4c77187295fd53646229e9e" category="paragraph">Le tableau suivant indique la plage pour le sous-réseau A : 100.127.0.0/16.</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">Objectif</block>
  <block id="8433249cf732856c8ef7700f591da923" category="cell">Port InfiniBand</block>
  <block id="5c43713485260d7759e7710e65d5b181" category="cell">Adresse IP ou plage</block>
  <block id="32e90ecbd165097494e967a23490ee41" category="cell">Cluster BeeGFS IP</block>
  <block id="16bfa5161249dae15f8c441a34126387" category="cell">i1b</block>
  <block id="fcb936b16dcf3c23dec73fa21c9c16f1" category="cell">100.127.100.1 - 100.127.100.255</block>
  <block id="ae709a18a45df821c97f171d87abda05" category="cell">Gestion BeeGFS</block>
  <block id="ca46d9d01d96136b3bd1dea0bce8b99f" category="cell">100.127.101.0</block>
  <block id="c7725fe17ccf0fe6dfa72467bca22d07" category="cell">Métadonnées BeeGFS</block>
  <block id="2aaea2be17c5c489bc5ec00da30f01e0" category="cell">i1b ou i3b</block>
  <block id="5474dd17966e980dee3133c4fdddcf29" category="cell">100.127.101.1 - 100.127.101.255</block>
  <block id="d01488abddf6343d229f4a687a740a9d" category="cell">Stockage BeeGFS</block>
  <block id="43c64dcbdc9c36edb0a78b932e87b96c" category="cell">100.127.103.1 - 100.127.103.255</block>
  <block id="7b0215ed75674e2bc6f9d23b5db3a59a" category="cell">Clients BeeGFS</block>
  <block id="12ad67de237d3ee3ee2ca3ed39a93826" category="cell">(varie selon le client)</block>
  <block id="88bd43ac89ad7875c3db7323b9879d13" category="cell">100.127.1.1 - 100.127.99.255</block>
  <block id="00ee8ecc0f95892eb58786ee6e94e4e7" category="paragraph">Le tableau suivant indique la plage pour le sous-réseau B : 100.128.0.0/16.</block>
  <block id="42e7db8b69b0d0451fe5e7e94d271956" category="cell">i4b</block>
  <block id="672e53647fb3fbb550b46ac1eaaad363" category="cell">100.128.100.1 - 100.128.100.255</block>
  <block id="50641838fba9970d18ab721f2d775331" category="cell">i2b</block>
  <block id="6240652cf0cb3a0056e31569edba6f3e" category="cell">100.128.102.0</block>
  <block id="6bbae520cb1416f9508d58010c4df4a0" category="cell">i2b ou i4b</block>
  <block id="3ac8689fd677355ec3c1098b78d717dd" category="cell">100.128.102.1 - 100.128.102.255</block>
  <block id="61b0ff8b431abb2cad4481cab938c338" category="cell">100.128.104.1 - 100.128.104.255</block>
  <block id="83dc7e1fb9aa3660d2fc0ccb6e72bd1a" category="cell">100.128.1.1 - 100.128.99.255</block>
  <block id="cd42d4848d52f3ad668601f29b839282" category="admonition">Toutes les adresses IP comprises dans les plages ci-dessus ne sont pas utilisées dans cette architecture vérifiée NetApp. Ils montrent comment les adresses IP peuvent être pré-allouées pour faciliter l'extension du système de fichiers à l'aide d'un schéma d'adressage IP cohérent. Dans ce schéma, les nœuds de fichiers BeeGFS et les ID de service correspondent au quatrième octet d'une plage bien connue d'adresses IP. Le système de fichiers peut évidemment évoluer au-delà de 255 nœuds ou services si nécessaire.</block>
  <block id="5b361b4897c4847c08b3d13bf3b66b8d" category="summary">Installez et configurez le client BeeGFS sur tous les hôtes qui doivent accéder au système de fichiers BeeGFS, comme les nœuds de calcul ou les nœuds GPU. Pour cette tâche, vous pouvez utiliser Ansible et la collection BeeGFS.</block>
  <block id="c855016387ccd14e80b0628a2da5609b" category="paragraph">Vous devez installer et configurer le client BeeGFS sur tous les hôtes qui doivent accéder au système de fichiers BeeGFS, comme les nœuds de calcul ou les nœuds GPU. Pour cette tâche, vous pouvez utiliser Ansible et la collection BeeGFS.</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">Étapes</block>
  <block id="f4bf34ee26e45437b7b34ee3858d3f39" category="list-text">Si nécessaire, configurez une connexion SSH sans mot de passe depuis le nœud de contrôle Ansible vers chacun des hôtes que vous souhaitez configurer comme clients BeeGFS :</block>
  <block id="c9793ac6c6a163b585094181979efe25" category="paragraph"><block ref="e7e2ad4e663e4c4c31c38a9fc078873a" prefix="" category="inline-code"></block></block>
  <block id="05c8acf59a637c421ef21a4a37d674de" category="list-text">Sous<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, Créez un fichier pour chaque client BeeGFS nommé<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> avec le contenu suivant, en renseignant le texte de l'espace réservé contenant les informations correctes pour votre environnement :</block>
  <block id="eb92eeb67c4903777d624fd51e30acfa" category="admonition">Actuellement, deux interfaces InfiniBand doivent être configurées sur chaque client, une dans chacun des deux sous-réseaux de stockage IPoIB. Si vous utilisez les exemples de sous-réseaux et les plages recommandées pour chaque service BeeGFS répertorié ici, les clients doivent avoir une interface configurée dans la plage de<block ref="d19a6fb86acef8c068cfcae0f28b7ccf" prefix=" " category="inline-code"></block> à<block ref="b4e6b2ab9469bd0c90a8b83c8ebc175f" prefix=" " category="inline-code"></block> et l'autre dans<block ref="09ec2c3e1e57af66c089eaa3948eb7a5" prefix=" " category="inline-code"></block> à<block ref="adc1d6a0c3222432d021aa91eb923175" prefix=" " category="inline-code"></block>.</block>
  <block id="ca6b4577e851d5587e19a3d017db68b1" category="list-text">Créez un nouveau fichier<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block>, puis remplissez les paramètres suivants en haut :</block>
  <block id="ec6e88f08b026e04d1ce5f5f31493b21" category="inline-link">Cryptage de contenu avec Ansible Vault</block>
  <block id="d424a4948912165baf5c9641ad4de044" category="admonition">Ne stockez pas les mots de passe en texte brut. Utilisez plutôt Ansible Vault (consultez la documentation Ansible pour<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>) ou utilisez l'<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> option lors de l'exécution du manuel de vente.</block>
  <block id="8f27eda73b5d4e7594b05bed1b90a053" category="list-text">Dans le<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> Fichier, répertorie tous les hôtes qui doivent être configurés comme clients BeeGFS sous<block ref="fc2e11772a55c48ed2b4ec7bc5d94664" prefix=" " category="inline-code"></block> Définissez ensuite toute configuration supplémentaire requise pour générer le module de noyau client BeeGFS.</block>
  <block id="42d868a1eb5776ce2eb9b95938bcc056" category="inline-link">Prise en charge de RDMA</block>
  <block id="675bf44585d9e9ed71a38bde5f37fb5f" category="admonition">Lorsque vous utilisez les pilotes OFED Mellanox, assurez-vous que<block ref="f24d21b8b47b3902162911c8595514e9" prefix=" " category="inline-code"></block> Indique le bon « chemin d'accès à l'en-tête » pour votre installation Linux. Pour plus d'informations, consultez la documentation BeeGFS pour<block ref="ad551773fffeead9219b565416da2397" category="inline-link-rx"></block>.</block>
  <block id="b9d3c4e1c18127cf36ad951b208d45bb" category="list-text">Dans le<block ref="c28f9364916e661fea858844d2b96b81" prefix=" " category="inline-code"></block> Fichier, répertorie les systèmes de fichiers BeeGFS que vous souhaitez monter au bas de tout ce qui a été défini précédemment<block ref="b63119da730344b345cdc8f62a4711e9" prefix=" " category="inline-code"></block>.</block>
  <block id="0ebb92016a1cd310802bb6e22bcd491c" category="admonition">Le<block ref="27fab87a2a74c73ddb3d1d20ce980c77" prefix=" " category="inline-code"></block> représente les paramètres testés. Reportez-vous à la documentation fournie avec le<block ref="0a84ad3cea9815959f96e884069338f8" prefix=" " category="inline-code"></block> collection<block ref="84f7933b4ff9fefcfc60fd5fff4b3b54" prefix=" " category="inline-code"></block> rôle pour une vue d'ensemble complète de toutes les options. Cela inclut le montage de plusieurs systèmes de fichiers BeeGFS ou le montage du même système de fichiers BeeGFS plusieurs fois.</block>
  <block id="853c95fff114a0396695a5a34c4f78f1" category="list-text">Créer un nouveau<block ref="34bd6e27c43e6508a64d0a1bf093c7d2" prefix=" " category="inline-code"></block> puis remplissez les paramètres suivants :</block>
  <block id="8ae73b3fcef5fc8f1a73e62c987915e6" category="admonition">Ignorer l'importation du<block ref="c37a16fb00a6cc95fe94f5468dfded54" prefix=" " category="inline-code"></block> collecte et<block ref="0247feeacea55a1e5efb40b0947dbbbe" prefix=" " category="inline-code"></block> Rôle si vous avez déjà installé les pilotes IB/RDMA requis et configuré les adresses IP sur les interfaces IPoIB appropriées.</block>
  <block id="598ee1856218e19bf329d8bece215061" category="list-text">Pour installer et construire le client et monter BeeGFS, exécutez la commande suivante :</block>
  <block id="999070faf3729384137acf10348ed589" category="list-text">Avant de placer le système de fichiers BeeGFS en production, nous vous recommandons *fortement* de vous connecter à n'importe quel client et de l'exécuter<block ref="bf1d98441c05c8ee7dba10e241fa8122" prefix=" " category="inline-code"></block> afin de garantir que tous les nœuds sont accessibles et qu'aucun problème n'est signalé.</block>
  <block id="a8bb1258f035db2e1b989badd7504202" category="summary">Pour définir la configuration des nœuds de fichiers et de blocs, vous créez un inventaire Ansible qui représente le système de fichiers BeeGFS que vous souhaitez déployer.</block>
  <block id="811a6b46c73b2ff846d806c69f166392" category="paragraph">Pour définir la configuration des nœuds de fichiers et de blocs, vous créez un inventaire Ansible qui représente le système de fichiers BeeGFS que vous souhaitez déployer. L'inventaire inclut les hôtes, les groupes et les variables décrivant le système de fichiers BeeGFS souhaité.</block>
  <block id="f710d81b04cfd57ef65bc4cca28bc3d4" category="section-title">Étape 1 : définir la configuration de tous les éléments de base</block>
  <block id="08ecdaa3e32e095bd8f7ecec87a6ffe1" category="paragraph">Définissez la configuration qui s'applique à tous les blocs de construction, quel que soit le profil de configuration que vous pouvez appliquer individuellement.</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="list-title">Avant de commencer</block>
  <block id="17de9612747c3e48aee3a32b1da30959" category="list-text">Utilisez un système de contrôle source tel que BitBucket ou Git pour stocker le contenu du répertoire contenant les fichiers d'inventaire et de PlayBook Ansible.</block>
  <block id="fc62f55b3e3e861f3b20a7ae40279cab" category="list-text">Créer un<block ref="a084b794bc0759e7a6b77810e01874f2" prefix=" " category="inline-code"></block> Fichier qui spécifie les fichiers que Git doit ignorer. Cela évite de stocker des fichiers volumineux dans Git.</block>
  <block id="1633329793556e695f8ae53c7f3c8756" category="list-text">Sur votre nœud de contrôle Ansible, identifiez un répertoire à utiliser pour stocker les fichiers d'inventaire et de PlayBook Ansible.</block>
  <block id="2af34d0fd4b17ecc42b7fb40d3a2019d" category="paragraph">Sauf indication contraire, tous les fichiers et répertoires créés dans cette étape et les étapes suivantes sont créés par rapport à ce répertoire.</block>
  <block id="31f13138a9fb78368dd1c5b8b9cb522e" category="list-text">Créez les sous-répertoires suivants :</block>
  <block id="f502c582ecc3459969f6ae37e60464d1" category="paragraph"><block ref="3342582e194d63e4c91b56623752c9c6" prefix="" category="inline-code"></block></block>
  <block id="f2151fe487fd8f761c16c5d92971a46f" category="paragraph"><block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix="" category="inline-code"></block></block>
  <block id="5fa06f80972ff05cf8eb18aa9af90bbd" category="paragraph"><block ref="2fc9e51174a78dd5bfc57e8e368590b3" prefix="" category="inline-code"></block></block>
  <block id="49266d47983011d7ceee48c764eaad20" category="section-title">Étape 2 : définir la configuration des nœuds de fichiers et de blocs individuels</block>
  <block id="bcbd88b78dd9388280471b20c50ef836" category="paragraph">Définissez la configuration qui s'applique aux nœuds de fichiers individuels et aux nœuds d'élément de base individuels.</block>
  <block id="4ace9bc4fa627e77f6406dd2f64e2028" category="list-text">Sous<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, Créez un fichier pour chaque noeud de fichier BeeGFS nommé<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> Avec le contenu suivant, en portant une attention particulière aux notes concernant le contenu à remplir pour les adresses IP de cluster BeeGFS et les noms d'hôte se terminant par des nombres impairs et impairs.</block>
  <block id="65742ecf20e6c51de487a8a5c4e5d085" category="paragraph">Initialement, les noms d'interface de nœud de fichier correspondent à ce qui est répertorié ici (comme ib0 ou ibs1f0). Ces noms personnalisés sont configurés dans <block ref="9c327e4b0e0a41a0187df973a6c1c1f1" category="inline-xref-macro-rx"></block>.</block>
  <block id="c1df6ea154e4f3c22584570de9017604" category="admonition">Si vous avez déjà déployé le cluster BeeGFS, vous devez arrêter le cluster avant d'ajouter ou de modifier des adresses IP configurées de manière statique, y compris les adresses IP et IP du cluster utilisées pour NVMe/IB. Cette modification est nécessaire afin que ces modifications prennent effet correctement et ne perturbent pas les opérations du cluster.</block>
  <block id="64f6e7ce4bce20648e5b5817cc7c9d5d" category="list-text">Sous<block ref="4d729f58293c8a48f1f8d918cdd1d28f" prefix=" " category="inline-code"></block>, Créez un fichier pour chaque noeud de bloc BeeGFS nommé<block ref="a0253f5b8f5dd7be8b02cda13da40729" prefix=" " category="inline-code"></block> et remplissez-le avec le contenu suivant.</block>
  <block id="350317d433df31d79bf0ded1b3748715" category="paragraph">Faites particulièrement attention aux remarques concernant le contenu à remplir pour les noms de matrices de stockage se terminant par des nombres pairs ou impairs.</block>
  <block id="d9aa2babb29bda2ebcdcb05c255e1dd3" category="paragraph">Pour chaque noeud de bloc, créez un fichier et spécifiez<block ref="966b4c423b24fddfa8c3a1a862b8ee19" prefix=" " category="inline-code"></block> Pour un des deux contrôleurs (généralement Un).</block>
  <block id="a79b02f70003beee254343e4cae10ad4" category="section-title">Étape 3 : définissez une configuration à appliquer à tous les nœuds de fichiers et de blocs</block>
  <block id="7a7623c76e8a35ad9b47b72876017ffc" category="paragraph">Vous pouvez définir une configuration commune à un groupe d'hôtes sous<block ref="96fa973cda8809ad84f646e3d8fbbc1c" prefix=" " category="inline-code"></block> dans un nom de fichier correspondant au groupe. Cela empêche de répéter une configuration partagée à plusieurs endroits.</block>
  <block id="b8250a298e8217ebff19d4f7c62cf654" category="inline-link">Utilisation de variables</block>
  <block id="45c67f165a1990ff04bfa4ffd3ad1908" category="paragraph">Les hôtes peuvent se trouver dans plusieurs groupes et au moment de l'exécution, Ansible choisit les variables qui s'appliquent à un hôte donné en fonction de ses règles de priorité de variable. (Pour plus d'informations sur ces règles, consultez la documentation Ansible pour<block ref="e846c866a706aed07204d4b81c43f562" category="inline-link-rx"></block>.)</block>
  <block id="30670ef79ffcebf619cb84794bb9f467" category="paragraph">Les affectations hôte-groupe sont définies dans le fichier d'inventaire Ansible réel, créé à la fin de cette procédure.</block>
  <block id="13fe78da26730165534ca728d16729df" category="paragraph">Dans Ansible, vous pouvez définir n'importe quelle configuration que vous souhaitez appliquer à tous les hôtes dans un groupe appelé<block ref="b1c94ca2fbc3e78fc30069c8d0f01680" prefix=" " category="inline-code"></block>. Créez le fichier<block ref="ee7b44b9b73d4c691251cbf5c8dff5c5" prefix=" " category="inline-code"></block> avec le contenu suivant :</block>
  <block id="970c2de774d4cba551050f0b96346cc6" category="section-title">Étape 4 : définissez la configuration qui doit s'appliquer à tous les nœuds de fichiers</block>
  <block id="68decee7f537598fe42c449c7effd748" category="paragraph">La configuration partagée pour les nœuds de fichiers est définie dans un groupe appelé<block ref="2325c19457d6105d5d5f3837fa282ef7" prefix=" " category="inline-code"></block>. Les étapes de cette section créent la configuration qui doit être incluse dans le<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> fichier.</block>
  <block id="01eabbaba4e3200ffffeaf687ced4089" category="list-text">En haut du fichier, définissez les valeurs par défaut, y compris le mot de passe à utiliser comme<block ref="d338b3f0f405eb5e51c8cc1e5ca66f02" prefix=" " category="inline-code"></block> utilisateur sur les nœuds de fichiers.</block>
  <block id="c61c5c1226a5daff294e618d1b90ec26" category="admonition">En particulier pour les environnements de production, ne stockez pas de mots de passe en texte brut. Utilisez plutôt Ansible Vault (voir<block ref="69d38d4b5deda302461f6461c5317006" category="inline-link-rx"></block>) ou le<block ref="13d87b4892426ec19bdc58a4643d3104" prefix=" " category="inline-code"></block> option lors de l'exécution du manuel de vente. Si le<block ref="f2bf771afbc16045e1951ded58c56f98" prefix=" " category="inline-code"></block> est déjà<block ref="63a9f0ea7bb98050796b649e85481845" prefix=" " category="inline-code"></block>, ensuite, vous pouvez omettre le<block ref="424240cd4e5c359372b7f199431603d5" prefix=" " category="inline-code"></block>.</block>
  <block id="3eeae040dcd4e8e08ba89cd729351414" category="list-text">Vous pouvez également configurer un nom pour le cluster haute disponibilité (HA) et spécifier un utilisateur pour les communications intra-cluster.</block>
  <block id="22bf408c8339ca14dab3745bbe56780d" category="paragraph">Si vous modifiez le schéma d'adressage IP privé, vous devez également mettre à jour le schéma par défaut<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block>. Ceci doit correspondre à ce que vous configurez plus tard pour le groupe de ressources BeeGFS Management.</block>
  <block id="ba4d50db9221cc812d5f7981d4600c2d" category="paragraph">Spécifiez un ou plusieurs e-mails qui doivent recevoir des alertes pour les événements du cluster à l'aide de<block ref="df1376df23c24a2b7d885d84f6116452" prefix=" " category="inline-code"></block>.</block>
  <block id="e69d5d030b5267144694edd30e58fa4b" category="admonition">Tout en apparence redondant,<block ref="58d2053fd85feeb270797993bb67b146" prefix=" " category="inline-code"></block> Est important lorsque vous faites évoluer le système de fichiers BeeGFS au-delà d'un seul cluster HA. Les clusters HA suivants sont déployés sans service de gestion BeeGFS et point supplémentaires sur le service de gestion fourni par le premier cluster.</block>
  <block id="7509dcf152f48abcba19fa72adedb808" category="inline-link">Configurer l'escrime dans un cluster Red Hat haute disponibilité</block>
  <block id="da185ecc8c2bce6af5f506542a665aab" category="list-text">Configurer un agent d'escrime. (Pour plus de détails, voir<block ref="dc7760afd7fe301addd396cbb1b31319" category="inline-link-rx"></block>.) Le résultat suivant montre des exemples de configuration d'agents d'escrime courants. Choisissez l'une de ces options.</block>
  <block id="b2f365e9dc240069eb174f596f8086dd" category="paragraph">Pour cette étape, gardez à l'esprit que :</block>
  <block id="83a5cc26327b36012de2442c022e0357" category="list-text">Par défaut, l'escrime est activé, mais vous devez configurer un _agent_ d'escrime.</block>
  <block id="502142ce464e9e0c49b233594ce3af26" category="list-text">Le<block ref="c8e769afa51da82b12702e693d24b7f2" prefix=" " category="inline-code"></block> spécifié dans le<block ref="240a786d8c1f5b2c35c60c8ebccf7fe2" prefix=" " category="inline-code"></block> ou<block ref="50b0206acfcc765475b542e5725091ed" prefix=" " category="inline-code"></block> Doit correspondre au nom d'hôte dans l'inventaire Ansible.</block>
  <block id="08c76f94c7c5d2fb0509d39d58f7d298" category="list-text">L'utilisation du cluster BeeGFS sans escrime n'est pas prise en charge, particulièrement en production. Cela permet de s'assurer que les services BeeGFS, y compris les dépendances de ressources comme les périphériques de bloc, basculent en raison d'un problème, il n'y a aucun risque d'accès simultané par plusieurs nœuds qui entraînent une corruption du système de fichiers ou tout autre comportement indésirable ou inattendu. Si l’escrime doit être désactivé, reportez-vous aux notes générales du guide de démarrage et de mise en place du rôle BeeGFS HA<block ref="7fe58896711b0c9790b9781e9deeeab8" prefix=" " category="inline-code"></block> à faux dans<block ref="3cd295e6aaa39e2510aff65b801cc5ab" prefix=" " category="inline-code"></block>.</block>
  <block id="8134b950ce435c1478c36f8d9e28640a" category="list-text">Plusieurs dispositifs d'escrime au niveau des nœuds sont disponibles, et le rôle BeeGFS HA peut configurer n'importe quel agent d'escrime disponible dans le référentiel de package Red Hat HA. Si possible, utilisez un agent d'escrime qui fonctionne via l'alimentation sans coupure (UPS) ou l'unité de distribution de l'alimentation en rack (RPDU), Parce que certains agents d'escrime, tels que le contrôleur de gestion de la carte mère (BMC) ou d'autres dispositifs d'éclairage intégrés au serveur, peuvent ne pas répondre à la demande de clôture dans certains scénarios de panne.</block>
  <block id="6793d5cb3a8bc008d05678615f821ca7" category="list-text">Activez le réglage des performances recommandé dans le système d'exploitation Linux.</block>
  <block id="951cd0f9ef758f90609564a78a7f36a2" category="paragraph">Si de nombreux utilisateurs trouvent les paramètres par défaut des paramètres de performance qui fonctionnent généralement bien, vous pouvez également modifier les paramètres par défaut d'une charge de travail donnée. Ainsi, ces recommandations sont incluses dans le rôle BeeGFS, mais ne sont pas activées par défaut pour s'assurer que les utilisateurs connaissent le réglage appliqué à leur système de fichiers.</block>
  <block id="2e468d52e0778656623f6a98e831b3c0" category="paragraph">Pour activer le réglage des performances, spécifiez :</block>
  <block id="5886796779dc029ac41ffca429f9f5d1" category="list-text">(Facultatif) vous pouvez régler les paramètres d'ajustement des performances dans le système d'exploitation Linux selon vos besoins.</block>
  <block id="fe7cbbcd6bbbe894cb7364e04d36c7ae" category="inline-link">E-Series site GitHub BeeGFS</block>
  <block id="a2a731b1d02a58e1e3cbcdae15a63023" category="paragraph">Pour obtenir une liste complète des paramètres de réglage disponibles que vous pouvez régler, consultez la section Réglages de la performance par défaut du rôle BeeGFS HA dans<block ref="32c82538a26b94ce448b7cce29eb6898" category="inline-link-rx"></block>. Les valeurs par défaut peuvent être remplacées pour tous les nœuds du cluster dans ce fichier ou dans le<block ref="3342582e194d63e4c91b56623752c9c6" prefix=" " category="inline-code"></block> fichier pour un nœud individuel.</block>
  <block id="3abafbb6a7adaface99f5d9cd23b12d0" category="list-text">Pour permettre une connectivité complète de 200 Go/HDR entre des nœuds de bloc et de fichier, utilisez le package Open Subnet Manager (OpenSM) de Mellanox Open Fabrics Enterprise distribution (MLNX_OFED). (La boîte de réception<block ref="d21519b2c7af8ce90e382199384a8c06" prefix=" " category="inline-code"></block> package ne prend pas en charge la fonctionnalité de virtualisation nécessaire.) Bien que le déploiement à l'aide d'Ansible soit pris en charge, vous devez d'abord télécharger les packages souhaités vers le nœud de contrôle Ansible utilisé pour exécuter le rôle BeeGFS.</block>
  <block id="b98ee7eab01ffcc8be1325c0937f01e8" category="list-text">À l'aide de<block ref="f6e57c9de709e45feb0d955351f53548" prefix=" " category="inline-code"></block> Ou téléchargez les packages pour la version d'OpenSM répertoriée dans la section exigences technologiques du site web de Mellanox vers le<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> répertoire. Par exemple :</block>
  <block id="372ec1e9d1761b6aa16b9f0b54a4433b" category="list-text">Remplissez les paramètres suivants dans<block ref="4003590e6e5408f8e5272e50f909dfac" prefix=" " category="inline-code"></block> (réglez les colis si nécessaire) :</block>
  <block id="382cd5df5d20e8ee60bea9f8be1884e3" category="list-text">Configurer le<block ref="ab775c875d5f89d991a670444dd32ad2" prefix=" " category="inline-code"></block> Règle pour assurer un mappage cohérent des identificateurs de port InfiniBand logiques aux périphériques PCIe sous-jacents.</block>
  <block id="acb63a2b1a344472ec1b72c168bf5a95" category="paragraph">Le<block ref="ab775c875d5f89d991a670444dd32ad2" prefix=" " category="inline-code"></block> La règle doit être unique à la topologie PCIe de chaque plate-forme de serveur utilisée comme nœud de fichier BeeGFS.</block>
  <block id="8cec215dcbcd9866be7ad7f12652d9bd" category="paragraph">Utilisez les valeurs suivantes pour les nœuds de fichiers vérifiés :</block>
  <block id="b535d5891e9112526732586cf8225d93" category="list-text">(Facultatif) mettre à jour l'algorithme de sélection de cible de métadonnées.</block>
  <block id="e3c1663ae83b766d79e4b2be55767666" category="inline-link">Analyse comparative d'un système BeeGFS</block>
  <block id="8dff66e73ac10da6c457b7092c6f9005" category="admonition">Lors des tests de vérification,<block ref="19230d21d2c58f7f5006b34c484cfa39" prefix=" " category="inline-code"></block> Est généralement utilisé pour s'assurer que les fichiers de test étaient répartis de façon égale sur toutes les cibles de stockage BeeGFS pendant l'évaluation des performances (pour plus d'informations sur l'analyse comparative, consultez le site BeeGFS pour<block ref="831dbcfeece1d9e52170bb11173ba315" category="inline-link-rx"></block>). Avec une utilisation réelle, il est possible que les cibles numérotées soient plus rapidement que les cibles numérotées plus élevées. Omission<block ref="19230d21d2c58f7f5006b34c484cfa39" prefix=" " category="inline-code"></block> et il suffit d'utiliser la valeur par défaut<block ref="268331366c060107e4f79636e2fbd61c" prefix=" " category="inline-code"></block> la valeur a été indiquée pour fournir de bonnes performances tout en utilisant toujours toutes les cibles disponibles.</block>
  <block id="aad0b8e6a3552eebcdcf125f218d1954" category="section-title">Étape 5 : définir la configuration pour le nœud de bloc commun</block>
  <block id="f9ed56c11a1443e285b3d786249fe6aa" category="paragraph">La configuration partagée pour les nœuds de bloc est définie dans un groupe appelé<block ref="0b41e1ef1f01592b0f6a7174f0010e75" prefix=" " category="inline-code"></block>. Les étapes de cette section créent la configuration qui doit être incluse dans le<block ref="7d0d040b7805a1015c58caea5b5d8c55" prefix=" " category="inline-code"></block> fichier.</block>
  <block id="7d304d17d15c3332b9d8584fa30f070b" category="list-text">Définissez la connexion Ansible sur local, indiquez le mot de passe système et spécifiez si les certificats SSL doivent être vérifiés. (Normalement, Ansible utilise SSH pour la connexion aux hôtes gérés, mais dans le cas des systèmes de stockage NetApp E-Series utilisés comme nœuds de bloc, les modules utilisent l'API REST pour la communication.) En haut du fichier, ajoutez ce qui suit :</block>
  <block id="41c70fb9d233363d68fe27194430adc1" category="admonition">La liste des mots de passe en texte clair n'est pas recommandée. Utilisez un coffre-fort Ansible ou fournissez le<block ref="b59049923d63016545b743560345fa56" prefix=" " category="inline-code"></block> Lors de l'exécution d'Ansible avec<block ref="eba52ae7bfe34d5eddd33dafc00e5e80" prefix=" " category="inline-code"></block>.</block>
  <block id="de65efa2c0698ededf4229cafcca2d08" category="inline-link-macro">Exigences techniques</block>
  <block id="a18d6a60f542af2e3b0784928e17f417" category="list-text">Pour assurer des performances optimales, installez les versions répertoriées pour les nœuds de bloc dans <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>.</block>
  <block id="8c41baf1ca98e1184f48c4721d44d431" category="inline-link">Site de support NetApp</block>
  <block id="38119f4253b4080e689702afd647df1f" category="paragraph">Téléchargez les fichiers correspondants à partir du<block ref="3f80e15ba326a9eb1fc39b6d8ba81472" category="inline-link-rx"></block>. Vous pouvez les mettre à niveau manuellement ou les inclure dans le<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> Répertoire du nœud de contrôle Ansible, puis remplissez les paramètres suivants dans<block ref="79d2514d0f856ef18e58ebf8b9716d05" prefix=" " category="inline-code"></block> Pour la mise à niveau avec Ansible :</block>
  <block id="a5a82f3b02ae57420ae1197446e1efc0" category="list-text">Téléchargez et installez la dernière version du micrologiciel de lecteur disponible pour les lecteurs installés dans vos nœuds de bloc à partir du<block ref="7bf536b69fb1e52c85b84904e073cbdb" category="inline-link-rx"></block>. Vous pouvez les mettre à niveau manuellement ou les inclure dans le<block ref="93501a11e921083efbd154e0cdff5f10" prefix=" " category="inline-code"></block> Répertoire du nœud de contrôle Ansible, puis remplissez les paramètres suivants dans<block ref="79d2514d0f856ef18e58ebf8b9716d05" prefix=" " category="inline-code"></block> Pour la mise à niveau avec Ansible :</block>
  <block id="72423a5fa99fafb4c2dc7b7e7f7d7962" category="admonition">Réglage<block ref="0d324209e6894f6233152c2d23bab1a2" prefix=" " category="inline-code"></block> à<block ref="68934a3e9455fa72420237eb05902327" prefix=" " category="inline-code"></block> Accélère la mise à niveau, mais ne doit pas être effectuée avant le déploiement de BeeGFS. En effet, ce paramètre nécessite l'arrêt de toutes les E/S des disques avant la mise à niveau afin d'éviter les erreurs d'application. Bien que la mise à niveau en ligne du micrologiciel des lecteurs avant la configuration des volumes soit toujours rapide, nous vous recommandons de toujours définir cette valeur sur<block ref="b326b5062b2f0e69046810717534cb09" prefix=" " category="inline-code"></block> pour éviter tout problème par la suite.</block>
  <block id="2b0551e04ffc3a713c07e9a9611b9897" category="list-text">Pour optimiser les performances, effectuez les modifications suivantes de la configuration globale :</block>
  <block id="6b7cf272a4e3aeaf52c2d0ca991829e5" category="list-text">Pour optimiser le provisionnement et le comportement des volumes, spécifiez les paramètres suivants :</block>
  <block id="b969df7be52ed192c298428e4fb0e696" category="admonition">La valeur spécifiée pour<block ref="37a0965694bd71a118b8d75bee76ea35" prefix=" " category="inline-code"></block> Est spécifique aux nœuds de bloc NetApp EF600 et contrôle l'ordre dans lequel les disques sont affectés aux nouveaux groupes de volumes. Cette commande permet de s'assurer que les E/S de chaque groupe sont réparties de manière homogène entre les canaux des disques back-end.</block>
  <block id="730b718214a170296ed598158264e021" category="summary">La solution BeeGFS inclut des recommandations sur le réglage de la performance qui étaient basées sur des tests de vérification.</block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="doc">Réglage des performances</block>
  <block id="a49e13cf9bc8e242e7b828e3c9016699" category="paragraph">Bien que BeeGFS fournit des performances raisonnables, NetApp a développé un ensemble de paramètres d'ajustement recommandés pour optimiser les performances. Ces paramètres prennent en compte les fonctionnalités des nœuds de bloc E-Series sous-jacents et les exigences spéciales requises pour exécuter BeeGFS dans une architecture HA à disque partagé.</block>
  <block id="6900084f28039c00033899865271a4b5" category="section-title">L'ajustement des performances des nœuds de fichiers</block>
  <block id="7ed4e287a78a4cc348d1e60d143ceda8" category="paragraph">Les paramètres de réglage disponibles que vous pouvez configurer sont les suivants :</block>
  <block id="d8eb1bf5eeddb34869fa0aee2c5c3be0" category="list-text">*Paramètres système dans l'UEFI/BIOS des nœuds de fichiers.* pour optimiser les performances, nous vous recommandons de configurer les paramètres système sur le modèle de serveur que vous utilisez comme nœuds de fichiers. Vous configurez les paramètres système lorsque vous configurez vos nœuds de fichiers à l'aide de la configuration du système (UEFI/BIOS) ou des API Redfish fournies par le contrôleur de gestion de la carte mère (BMC).</block>
  <block id="adecdfd501fe0c9f7674b95abecb661b" category="paragraph">Les paramètres système varient en fonction du modèle de serveur que vous utilisez comme nœud de fichier. Les paramètres doivent être configurés manuellement en fonction du modèle de serveur utilisé. Pour savoir comment configurer les paramètres système des nœuds de fichiers Lenovo SR665 validés, reportez-vous à la section <block ref="891cfd1f8dbb99c09432be0144a5be81" category="inline-link-macro-rx"></block>.</block>
  <block id="6721128d9ea380f9965cc220f28619e1" category="list-text">*Paramètres par défaut pour les paramètres de configuration requis.* les paramètres de configuration requis affectent la configuration des services BeeGFS et la façon dont les volumes E-Series (dispositifs de bloc) sont formatés et montés par Pacemaker. Voici les paramètres de configuration requis :</block>
  <block id="93de4dab2e303d649f94f0880095e6ef" category="list-text">Paramètres de configuration du service BeeGFS</block>
  <block id="c5b3473e89672cc155d0436c6e60bd52" category="inline-link">Paramètres de configuration du service BeeGFS</block>
  <block id="bf8b3766586fac2207dd5c620d7b308d" category="paragraph">Vous pouvez remplacer les paramètres par défaut des paramètres de configuration selon vos besoins. Pour connaître les paramètres que vous pouvez adapter en fonction de vos charges de travail ou de vos cas d'utilisation spécifiques, consultez le<block ref="d22612d773394e50d7efa2e9719d459e" category="inline-link-rx"></block>.</block>
  <block id="334a50f926a902a241ecfae54f3cce32" category="list-text">Le formatage de volume et les paramètres de montage sont définis sur les valeurs par défaut recommandées et ne doivent être ajustés que pour des cas d'utilisation avancés. Les valeurs par défaut sont les suivantes :</block>
  <block id="4b9b870ed7f3db8f28c2ddcf4d3bd986" category="list-text">Optimiser le formatage du volume initial en fonction du type de cible (gestion, métadonnées ou stockage, par exemple), de la configuration RAID et de la taille du segment du volume sous-jacent.</block>
  <block id="9f641b3b08e18d35b2219dee293e2038" category="list-text">Réglez la manière dont Pacemaker monte chaque volume pour vous assurer que les modifications sont immédiatement transférées vers les nœuds de blocs E-Series. Cela empêche la perte de données en cas d'échec des nœuds de fichier pour les écritures actives.</block>
  <block id="72247689b02927b1ceac4fb69e6c9954" category="inline-link">formatage du volume et paramètres de configuration du montage</block>
  <block id="71ba07d5377dd195ceff5f6dbddc08dc" category="paragraph">Pour connaître les paramètres que vous pouvez adapter en fonction de vos charges de travail ou de vos cas d'utilisation spécifiques, consultez le<block ref="2996b969524b278e7da0cf1bb77d8754" category="inline-link-rx"></block>.</block>
  <block id="728ecec149994e53980e0103b04d3e1b" category="list-text">*Paramètres système dans le système d'exploitation Linux installé sur les nœuds de fichiers.* vous pouvez remplacer les paramètres système d'exploitation Linux par défaut lorsque vous créez l'inventaire Ansible à l'étape 4 de <block ref="ecd3f3fdba3715697adf284eecd1c932" category="inline-link-macro-rx"></block>.</block>
  <block id="c5d80eb8c0726de2a9804385295dc0e3" category="paragraph">Les paramètres par défaut ont été utilisés pour valider la solution BeeGFS sur NetApp, mais vous pouvez les modifier pour s'adapter à vos workloads ou à vos utilisations spécifiques. Voici quelques exemples de paramètres système d'exploitation Linux que vous pouvez modifier :</block>
  <block id="b56281fe1e5f14da49b6d1d4c6ad0cd9" category="list-text">Files d'attente des E/S sur les dispositifs de bloc E-Series.</block>
  <block id="43a8170c4aebbb467c4d4b59d77a7662" category="paragraph">Vous pouvez configurer des files d'attente d'E/S sur les périphériques de bloc E-Series utilisés comme cibles BeeGFS pour :</block>
  <block id="ce0213a2bd6755f2eacf9574b2b56dda" category="list-text">Réglez l'algorithme de planification en fonction du type de périphérique (NVMe, HDD, etc.).</block>
  <block id="c78d3d0bdafa5fc5623e3d56a9cc33ce" category="list-text">Augmenter le nombre de demandes en attente.</block>
  <block id="b785a1945e736aa8340d2e4bde128b82" category="list-text">Réglez les tailles des demandes.</block>
  <block id="a9a2c451a0c5c7939a07afe7cd297216" category="list-text">Optimisez le comportement de lecture anticipée.</block>
  <block id="f39721f45b17814f0740b3c066ca0b66" category="list-text">Paramètres de la mémoire virtuelle.</block>
  <block id="552afad9cf059c34e2ed8d24ff34fc12" category="paragraph">Vous pouvez régler les paramètres de la mémoire virtuelle pour des performances de diffusion optimales en continu.</block>
  <block id="aa8e8d4d1817c4e08c70cd3c1b4c89b9" category="list-text">Paramètres CPU.</block>
  <block id="423dd652f980ba19cb7fb7f577576270" category="paragraph">Vous pouvez régler le régulateur de fréquence de l'UC et d'autres configurations de l'UC pour obtenir des performances maximales.</block>
  <block id="eb2cf8d186779ea110100038f3ec2e90" category="list-text">Taille de la demande de lecture.</block>
  <block id="17dd6d5b67055565e29c50f8150ce378" category="paragraph">Vous pouvez augmenter la taille maximale des demandes de lecture pour les HCA Mellanox.</block>
  <block id="ba4dcc8d5b46a4c30176506ef828aea4" category="section-title">Réglage des performances des nœuds en mode bloc</block>
  <block id="4f59030dbd3da04d4b74738f5149fffb" category="paragraph">En fonction des profils de configuration appliqués à un élément de base BeeGFS particulier, les groupes de volumes configurés sur les nœuds de blocs changent légèrement. Par exemple, avec un nœud de bloc EF600 de 24 disques :</block>
  <block id="841fc343eee01328e222ebada200ca5d" category="list-text">Pour un seul élément de base, y compris la gestion BeeGFS, les métadonnées et les services de stockage :</block>
  <block id="bbea55f4794f89e45fe7c40eaf8ca3ee" category="list-text">1 groupe de volumes RAID 10 2+2 pour la gestion BeeGFS et les services de métadonnées</block>
  <block id="92f2b7b47db52c081f552bd884a78ae7" category="list-text">2 groupes de volumes RAID 6 8+2 pour les services de stockage BeeGFS</block>
  <block id="4f4960028dfd13311a5679d2450101d1" category="list-text">Pour un élément de base de métadonnées + de stockage BeeGFS :</block>
  <block id="fdd7b1bdaea27f32d5925fd1a957fce4" category="list-text">1 groupe de volumes RAID 10 2+2 pour les services de métadonnées BeeGFS</block>
  <block id="196fdf9280847a2a4a9ddd0b8520bdfb" category="list-text">Pour l'élément de base de stockage BeeGFS uniquement :</block>
  <block id="632ac8eccac17a8789dd33202130e509" category="list-text">2 groupes de volumes RAID 6 10+2 pour les services de stockage BeeGFS</block>
  <block id="014e85e7f3bbdad1ad6f193e82d21755" category="inline-link-macro">instructions de déploiement</block>
  <block id="39b751cb17d740944bc5071eba1abda2" category="admonition">Comme BeeGFS a besoin d'un espace de stockage considérable pour la gestion et les métadonnées par rapport au stockage, une seule option consiste à utiliser des disques plus petits pour les groupes de volumes RAID 10. Les lecteurs plus petits doivent être insérés dans les emplacements de lecteur les plus extérieurs. Pour plus d'informations, reportez-vous à la section <block ref="92eed053ec15880d36275e60ab80275b" category="inline-link-macro-rx"></block>.</block>
  <block id="1708794637b71b8aadfa80d503ccc505" category="paragraph">Tous ces paramètres sont configurés par le déploiement Ansible, et plusieurs autres paramètres sont généralement recommandés pour optimiser les performances/comportements :</block>
  <block id="b02fbba0a56e144e15b688980d01275a" category="list-text">Ajustement de la taille du bloc de cache global à 32Kio et ajustement de la vidage du cache à la demande à 80 %.</block>
  <block id="c70b65aef502812d5a0e8a4b173334d9" category="list-text">Désactivation de l'équilibrage automatique (en veillant à ce que les attributions de volume du contrôleur restent telles que prévues).</block>
  <block id="94966bf9df1a2fb2442d06d53723f28e" category="list-text">Activation de la mise en cache de lecture et désactivation de la mise en cache de lecture anticipée</block>
  <block id="65f3cbabf1e92d0ce2d27d87d85a3c5a" category="list-text">Activation de la mise en cache d'écriture avec la mise en miroir et demande de sauvegarde sur batterie, les caches sont donc conservés suite à la panne d'un contrôleur de nœud bloc.</block>
  <block id="dfb95cf8b58d92dcb47401bae0964c5d" category="list-text">Spécification de l'ordre dans lequel les disques sont affectés aux groupes de volumes, en équilibrant les E/S entre les canaux de disque disponibles.</block>
  <block id="bea1a33800109358727c67f41cd01d07" category="summary">Un déploiement et une gestion de la configuration impliquent d'exécuter un ou plusieurs playbooks contenant les tâches Ansible requises pour exécuter et placer le système global dans l'état souhaité.</block>
  <block id="40184afe39cc9f2361b3b73e0695976d" category="doc">Déployez BeeGFS</block>
  <block id="a5cd3ed116608dac017f14c046ea56bf" category="inline-link">Rôles</block>
  <block id="d0dbcd7fcc2b33ea218a58e2364a462a" category="paragraph">Même si toutes les tâches peuvent être incluses dans un seul manuel de vente, il est difficile pour les systèmes complexes de gérer cette tâche très rapidement. Ansible vous permet de créer et de distribuer des rôles comme un moyen de packaging des playbooks réutilisables et du contenu associé (par exemple, variables par défaut, tâches et gestionnaires). Pour plus d'informations, consultez la documentation Ansible pour<block ref="68a1974ca8634592518191ca9775617f" category="inline-link-rx"></block>.</block>
  <block id="63d74efd13802381ddc8b8a65a3a5000" category="paragraph">Les rôles sont souvent distribués dans le cadre d'une collection Ansible contenant des rôles et des modules associés. Donc, ces playbooks importent principalement plusieurs rôles distribués dans les différentes collections NetApp E-Series Ansible.</block>
  <block id="3fb2d69a2432fdcecc09bb3418ad3ace" category="admonition">Actuellement, au moins deux éléments de base (quatre nœuds de fichiers) sont nécessaires pour déployer BeeGFS, à moins qu'un périphérique quorum distinct soit configuré comme un disjoncteur d'attache pour limiter les problèmes lors de l'établissement du quorum avec un cluster à deux nœuds.</block>
  <block id="2ab028f46312dfd58cd64798fc7cbf9e" category="list-text">Créer un nouveau<block ref="2f78c4e27feaf25ffb33d97e8ff7e7a6" prefix=" " category="inline-code"></block> classez et incluez les éléments suivants :</block>
  <block id="26a3e9e044d0e5b372c4803d6bdeefbd" category="admonition">Ce PlayBook s'exécute<block ref="c14192fc9675e5023582b237e885e10d" prefix=" " category="inline-code"></block> Vérifiez que Python 3 est installé sur les nœuds de fichiers et vérifiez que les balises Ansible fournies sont prises en charge.</block>
  <block id="7cf59981bd844e32610404655f205256" category="list-text">Utilisez le<block ref="6afa1ad605a4192ba2e50e8be9966e68" prefix=" " category="inline-code"></block> Commande avec les fichiers d’inventaire et de PlayBook lorsque vous êtes prêt à déployer BeeGFS.</block>
  <block id="f73890e8771abfa1abdc045ab1b722ef" category="paragraph">Le déploiement va s'exécuter tout<block ref="c14192fc9675e5023582b237e885e10d" prefix=" " category="inline-code"></block>, Puis demander confirmation de l'utilisateur avant de poursuivre le déploiement BeeGFS.</block>
  <block id="efd5cfa405ebe66e35820b347b961b90" category="paragraph">Exécuter la commande suivante en réglant le nombre de fourches selon les besoins (voir la remarque ci-dessous) :</block>
  <block id="e1f7c8e8d5a879b01dcf2e832140f992" category="inline-link">Réglage des performances Ansible</block>
  <block id="2485710fb8c15237f98f63beae48b455" category="inline-link">Contrôle de l'exécution de PlayBook</block>
  <block id="44e3c962bed95de75adc370adf17965e" category="admonition">En particulier pour les déploiements plus importants, en remplaçant le nombre par défaut de fourches (5) à l'aide du<block ref="448725115a83c589b33de77889e1e2f3" prefix=" " category="inline-code"></block> Paramètre recommandé pour augmenter le nombre d'hôtes qu'Ansible configure en parallèle. (Pour plus d'informations, voir <block ref="1ad83cdd7d1451f25e3de1b6b6ab91b1" category="inline-link-rx"></block> et<block ref="2f92d47aead0a3ef15304d32faf6a032" category="inline-link-rx"></block>.) Le paramètre de valeur maximale dépend de la puissance de traitement disponible sur le nœud de contrôle Ansible. L'exemple ci-dessus de 20 a été exécuté sur un nœud de contrôle Ansible virtuel avec 4 processeurs (Intel(R) Xeon(R) Gold 6146 CPU à 3,20 GHz).</block>
  <block id="e5e4c2e4c004bc7dbd4a04d4b0971e53" category="paragraph">Selon la taille du déploiement et les performances réseau entre le nœud de contrôle Ansible et les nœuds de fichier et bloc BeeGFS, la durée de déploiement peut varier.</block>
  <block id="2260cb128d87141c6a0a2c06c043def7" category="summary">Après avoir défini la structure d'inventaire générale Ansible, définissez la configuration de chaque élément de base dans le système de fichiers BeeGFS.</block>
  <block id="b8bb1668a8a0007267670827d99f76b5" category="paragraph">Ces instructions de déploiement montrent comment déployer un système de fichiers composé d'un élément de base, incluant la gestion, les métadonnées et les services de stockage, un deuxième élément de base avec des métadonnées et des services de stockage, et un troisième élément de base uniquement dédié au stockage.</block>
  <block id="bc4ca1def58917532e653ebf4c3c5f15" category="paragraph">Ces étapes sont destinées à afficher la gamme complète des profils de configuration standard que vous pouvez utiliser pour configurer les éléments de base NetApp BeeGFS de façon à répondre aux exigences du système de fichiers global BeeGFS.</block>
  <block id="053cdc4e7aa5884fba5be0b7e80bcb5c" category="admonition">Dans les sections suivantes et ceci, ajustez selon les besoins pour générer l'inventaire représentant le système de fichiers BeeGFS que vous voulez déployer. Utilisez notamment des noms d'hôte Ansible qui représentent chaque nœud de bloc ou de fichier et le schéma d'adressage IP souhaité pour le réseau de stockage, afin de vous assurer qu'il peut évoluer jusqu'au nombre de nœuds de fichiers et de clients BeeGFS.</block>
  <block id="e00187948ca315221e5e284a4312f83f" category="section-title">Étape 1 : créez le fichier d'inventaire Ansible</block>
  <block id="cbdf4dddad7bf23198edcbf2c8721659" category="list-text">Créer un nouveau<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block> file, puis insérez les paramètres suivants en remplaçant les hôtes sous<block ref="0b41e1ef1f01592b0f6a7174f0010e75" prefix=" " category="inline-code"></block> si nécessaire pour représenter les nœuds en mode bloc dans votre déploiement. Les noms doivent correspondre au nom utilisé pour<block ref="6ebd598dbc59122afdf4763cac1ed550" prefix=" " category="inline-code"></block>.</block>
  <block id="742c9db30f264a7d33e72383a817b4f5" category="paragraph">Dans les sections suivantes, vous allez créer des groupes Ansible supplémentaires sous<block ref="2325c19457d6105d5d5f3837fa282ef7" prefix=" " category="inline-code"></block> Qui représentent les services BeeGFS que vous voulez exécuter dans le cluster.</block>
  <block id="066251bf9494493f76299f6f40a80df6" category="section-title">Étape 2 : configurer l'inventaire d'un élément de base de gestion, de métadonnées et de stockage</block>
  <block id="5320d481bd8442fec42afcaded2a8d49" category="paragraph">Le premier élément de base ou du cluster doit inclure le service de gestion BeeGFS ainsi que les services de métadonnées et de stockage :</block>
  <block id="a54299a446e0a2e17f57383db8e31dc6" category="list-text">Dans<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>, remplissez les paramètres suivants sous<block ref="47488094171904d309860f2ab8f8eb63" prefix=" " category="inline-code"></block>:</block>
  <block id="fd84d0d4501e2eca409dc18043cf1492" category="list-text">Créez le fichier<block ref="096c36ebf1ab8bf90e099d6808eb57d0" prefix=" " category="inline-code"></block> et inclure les éléments suivants :</block>
  <block id="bcc9cdaf60435f4d091a1bfdac879201" category="list-text">Sous<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, créez des fichiers pour les groupes de ressources<block ref="9a2a6271435751311d49f29af321e54c" prefix=" " category="inline-code"></block> à<block ref="71fcdde6efe08cd30c14cff19fe12017" prefix=" " category="inline-code"></block> à l'aide du modèle suivant, puis remplissez les valeurs des espaces réservés pour chaque service faisant référence au tableau ci-dessous :</block>
  <block id="3df790a0a0a3be54d9cbac91d4bc35e1" category="inline-link">Présentation de la baie NetApp EF600</block>
  <block id="4ada98602970473e524def1d48723bd6" category="admonition">La taille du volume est indiquée sous forme de pourcentage du pool de stockage global (également appelé groupe de volumes). NetApp recommande fortement de laisser une certaine capacité libre dans chaque pool afin d'autoriser le sur-provisionnement SSD (pour plus d'informations, voir<block ref="dfc1025f9a756c10e6b0cbe0f4bc500a" category="inline-link-rx"></block>). Le pool de stockage,<block ref="7ef878b8d47cf2658a8b7e4c1b8f133d" prefix=" " category="inline-code"></block>, alloue également 1% de la capacité du pool pour le service de gestion. Ainsi, pour les volumes de métadonnées dans le pool de stockage,<block ref="7ef878b8d47cf2658a8b7e4c1b8f133d" prefix=" " category="inline-code"></block>, Si vous utilisez des disques de 1,92 To ou 3,84 To, définissez cette valeur sur<block ref="6950471ad34ba84d94045961d34ad16b" prefix=" " category="inline-code"></block>; Pour les lecteurs 7,65 To, définissez cette valeur sur<block ref="6d61e9b2e679326dd5a7a5a155cce414" prefix=" " category="inline-code"></block>; Et pour les disques de 15,3 To, définissez cette valeur sur<block ref="c350ffebb2160c4726034bf20ba7520f" prefix=" " category="inline-code"></block>.</block>
  <block id="34082694d21dbdcfc31e6e32d9fb2b9f" category="cell">Nom du fichier</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">Port</block>
  <block id="b1cddc6c78e92a26b8976dc97327d412" category="cell">Adresses IP flottantes</block>
  <block id="72159601fc6c3d952cc9825d610ddd68" category="cell">Zone NUMA</block>
  <block id="40cf615dcacf5ec5faf6a3cdf1ff5a6e" category="cell">Pool de stockage</block>
  <block id="cdd25d91a2d0aca59a80f91cfe9af9de" category="cell">Contrôleur propriétaire</block>
  <block id="f4d0c8022be4f31d06814c33705037ff" category="cell">meta_01.yml</block>
  <block id="1f7aa6705d5b742085538c627f6f9c2b" category="cell">8015</block>
  <block id="01098d2436a5e4cf506036d6aca3c6b9" category="cell">i1b:100.127.101.1/16 i2b:100.128.102.1/16</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="ca9fd584227ff345bca2ef90d5c56e63" category="cell">ictad22a01</block>
  <block id="7ef878b8d47cf2658a8b7e4c1b8f133d" category="cell">beegfs_m1_m2_m5_m6</block>
  <block id="7fc56270e7a70fa81a5935b72eacbe29" category="cell">A</block>
  <block id="60b1afbaab870bf5621ed87ae12559fe" category="cell">meta_02.yml</block>
  <block id="62d2b7ba91f34c0ac08aa11c359a8d2c" category="cell">8025</block>
  <block id="e04871f7c2f611e8ad3e026ef33ce958" category="cell">i2b:100.128.102.2/16 i1b:100.127.101.2/16</block>
  <block id="9d5ed678fe57bcca610140957afab571" category="cell">B</block>
  <block id="3ce592406a461bfadfa5ab1f08c5c506" category="cell">meta_03.yml</block>
  <block id="a2b8a85a29b2d64ad6f47275bf1360c6" category="cell">8035</block>
  <block id="e04d4c629001763b33c4ff8b9896d667" category="cell">i3b:100.127.101.3/16 i4b:100.128.102.3/16</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1</block>
  <block id="e2113f2adde9ccc87fb733b80de62a05" category="cell">ictad22a02</block>
  <block id="c229ea898f8c27aeb40c65332e30db3f" category="cell">beegfs_m3_m4_m7_m8</block>
  <block id="7f6482de225123824ca5b23c1cf79f05" category="cell">meta_04.yml</block>
  <block id="704cddc91e28d1a5517518b2f12bc321" category="cell">8045</block>
  <block id="0d343c87415ff2c30cb55d5962ced8e2" category="cell">i4b:100.128.102.4/16 i3b:100.127.101.4/16</block>
  <block id="833a23c43dc9c206a593873d80d04903" category="cell">meta_05.yml</block>
  <block id="444b0d9a802792791bb9a2da568b463d" category="cell">8055</block>
  <block id="685d00be66f443c6c339b81cc66fa4a3" category="cell">i1b:100.127.101.5/16 i2b:100.128.102.5/16</block>
  <block id="38774c8cd9de3fd76c7df6b0746f2f2b" category="cell">meta_06.yml</block>
  <block id="320e4df890a1a620573db8170f39a093" category="cell">8065</block>
  <block id="f084a55203c0946ef5605449dede3354" category="cell">i2b:100.128.102.6/16 i1b:100.127.101.6/16</block>
  <block id="5a681b3e1f7ad2d965284e36f4f6b7d3" category="cell">meta_07.yml</block>
  <block id="ede529dfcbb2907e9760eea0875cdd12" category="cell">8075</block>
  <block id="59a587289a0c0568b62bb3b0beb25710" category="cell">i3b:100.127.101.7/16 i4b:100.128.102.7/16</block>
  <block id="a9cc3f3ebc7a8daedf369af06faba518" category="cell">meta_08.yml</block>
  <block id="5011bf6d8a37692913fce3a15a51f070" category="cell">8085</block>
  <block id="183b03ffff0f1c540c2bcc4fa7645e8f" category="cell">i4b:100.128.102.8/16 i3b:100.127.101.8/16</block>
  <block id="89f0938aa83de82ca99f8b06297ed69c" category="list-text">Sous<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, créez des fichiers pour les groupes de ressources<block ref="204798ade8b6ac861bd335e908dea445" prefix=" " category="inline-code"></block> à<block ref="febac7a5dad8d84a1faa80d56d8a70cb" prefix=" " category="inline-code"></block> à l'aide du modèle suivant, puis remplissez les valeurs de paramètre fictif pour chaque service référençant l'exemple :</block>
  <block id="9b62ac6b206ab6cafe8dafa0990559c7" category="inline-link-macro">Pourcentages de surprovisionnement recommandés pour le pool de stockage</block>
  <block id="ab2ec57b0e9afdc73bcc69a962ee35c4" category="admonition">Pour connaître la taille correcte à utiliser, reportez-vous à la section <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>.</block>
  <block id="b627976db3394ccf24342632cef6f4f1" category="cell">stor_01.yml</block>
  <block id="40f4da34bbe180214c23b9e55da4f772" category="cell">8013</block>
  <block id="2fcc40eb936b77784739bed3cda30225" category="cell">i1b:100.127.103.1/16 i2b:100.128.104.1/16</block>
  <block id="5ef33d06ff783e8453c10b95db8c1253" category="cell">beegfs_s1_s2</block>
  <block id="70963f6e36ca66556bef5f6ae74ad0ad" category="cell">stor_02.yml</block>
  <block id="1ecdec353419f6d7e30857d00d0312d1" category="cell">8023</block>
  <block id="bf4e53a6c43ad511c5f730de94f1c989" category="cell">i2b:100.128.104.2/16 i1b:100.127.103.2/16</block>
  <block id="a4253b13d64a7017467d335c0c147ed3" category="cell">stor_03.yml</block>
  <block id="fc5b3186f1cf0daece964f78259b7ba0" category="cell">8033</block>
  <block id="d2f781a145f7598ae80a6ed6a34a297d" category="cell">i3b:100.127.103.3/16 i4b:100.128.104.3/16</block>
  <block id="a3cc9ef3e643fd2d2e1b6c2672b1c361" category="cell">beegfs_s3_s4</block>
  <block id="d471f1c4be4f658b822b7cfcfc808efa" category="cell">stor_04.yml</block>
  <block id="5bd529d5b07b647a8863cf71e98d651a" category="cell">8043</block>
  <block id="87b35387416f5837e6e2523744e368f9" category="cell">i4b:100.128.104.4/16 i3b:100.127.103.4/16</block>
  <block id="6a0625f228a1c5802a3d0ca970c7ebac" category="cell">stor_05.yml</block>
  <block id="dfccdb8b1cc7e4dab6d33db0fef12b88" category="cell">8053</block>
  <block id="457859c18e2dfb216c95ea335da7fdc9" category="cell">i1b:100.127.103.5/16 i2b:100.128.104.5/16</block>
  <block id="2ac54a6d92aca96fef8d0eac5b813f34" category="cell">beegfs_s5_s6</block>
  <block id="09da1a861f10d113069c5e1da9d2decd" category="cell">stor_06.yml</block>
  <block id="8d1f1aac0dd8a76b49e8bbdda0c7c98c" category="cell">8063</block>
  <block id="1bd035750c97cc091a94b72035e34013" category="cell">i2b:100.128.104.6/16 i1b:100.127.103.6/16</block>
  <block id="cf124e58023b3726106af9c8718a48ed" category="cell">stor_07.yml</block>
  <block id="ffa9b486ad206c638c657b7ed335635c" category="cell">8073</block>
  <block id="d319c022fb006d05c63de544a768c7b5" category="cell">i3b:100.127.103.7/16 i4b:100.128.104.7/16</block>
  <block id="3e96e523215f928a3915e79e1451e2e7" category="cell">beegfs_s7_s8</block>
  <block id="0e4b036746af52a755e4b546698b2b61" category="cell">stor_08.yml</block>
  <block id="20ef119e812e178ecb44efa448b57ebc" category="cell">8083</block>
  <block id="abf8898bf8b809341f1a690241343288" category="cell">i4b:100.128.104.8/16 i3b:100.127.103.8/16</block>
  <block id="80e0c052ed9f2bde54c56adb04f880f1" category="section-title">Étape 3 : configurer l'inventaire d'un élément de base métadonnées + stockage</block>
  <block id="9e701ac8f2dd669a0e51464b4d8e3331" category="paragraph">Elles expliquent comment configurer un inventaire Ansible pour un élément de base de stockage + de métadonnées BeeGFS.</block>
  <block id="ff1cbf3210fb9b21912445c6ea8cb9f6" category="list-text">Dans<block ref="d28e452e49fc926f32af1d87afcff3ce" prefix=" " category="inline-code"></block>, remplissez les paramètres suivants sous la configuration existante :</block>
  <block id="628d1b90e1a21bbcec24af78377f8297" category="list-text">Sous<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, créez des fichiers pour les groupes de ressources<block ref="f7f236466904f5e4828a0db580764b62" prefix=" " category="inline-code"></block> à<block ref="20581f314f77bcf174d5bf0da0f87668" prefix=" " category="inline-code"></block> à l'aide du modèle suivant, puis remplissez les valeurs de paramètre fictif pour chaque service référençant l'exemple :</block>
  <block id="bc5e8003da73758b95c46194672943bb" category="admonition">Pour connaître la taille correcte à utiliser, reportez-vous à la section <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>.</block>
  <block id="9c6de3c786b8c9c409de2fd8070e5072" category="cell">meta_09.yml</block>
  <block id="4bcb81674e1186a66143fec42901c209" category="cell">i1b:100.127.101.9/16 i2b:100.128.102.9/16</block>
  <block id="a54f967fcc27024d3780cfad23300dd8" category="cell">ictad22a03</block>
  <block id="2ea9f3181dbee99d651a0d6c53be4a36" category="cell">beegfs_m9_m10_m13_m14</block>
  <block id="f370a281056494e99bcade5ddef17b26" category="cell">meta_10.yml</block>
  <block id="89d68a1b94d4d1c926944117a136dad1" category="cell">i2b:100.128.102.10/16 i1b:100.127.101.10/16</block>
  <block id="27f563eed2131061540c21a6239b43d8" category="cell">meta_11.yml</block>
  <block id="6239aa390b35659bc861841760941247" category="cell">i3b:100.127.101.11/16 i4b:100.128.102.11/16</block>
  <block id="af2f976032e920d54c9455a8e1fd675d" category="cell">ictad22a04</block>
  <block id="7c335ef1ce51db644c52518580d45d49" category="cell">beegfs_m11_m12_m15_m16</block>
  <block id="a2a3007e91ab84d40e9453997468f1ad" category="cell">meta_12.yml</block>
  <block id="a65f2e74154cdd3870324bbed77b4bd5" category="cell">i4b:100.128.102.12/16 i3b:100.127.101.12/16</block>
  <block id="14c79c2a227a377885225e0f4dcf53b0" category="cell">meta_13.yml</block>
  <block id="b6b9f36adb7974a0f6d17412ec3fee68" category="cell">i1b:100.127.101.13/16 i2b:100.128.102.13/16</block>
  <block id="07e72a8a343c421129dc3a92902de565" category="cell">meta_14.yml</block>
  <block id="c44a959db7ffec72c54df85a2b00175b" category="cell">i2b:100.128.102.14/16 i1b:100.127.101.14/16</block>
  <block id="d4d36ef3d915a0d2eaac8c62f1d8eff6" category="cell">meta_15.yml</block>
  <block id="44b67b40baecc652e6f08e274b29865b" category="cell">i3b:100.127.101.15/16 i4b:100.128.102.15/16</block>
  <block id="b465a4b4c591a6f2e44fedac80e726d0" category="cell">meta_16.yml</block>
  <block id="23344e5747f1b08172f5d05aa88919e5" category="cell">i4b:100.128.102.16/16 i3b:100.127.101.16/16</block>
  <block id="91e38d134a7ca4a23006b0cf023d9011" category="list-text">Sous<block ref="648847925d2f67d0e9aff6f86a7141c1" prefix=" " category="inline-code"></block> créez des fichiers pour les groupes de ressources<block ref="e82765740642d7caa6320c506be59565" prefix=" " category="inline-code"></block> à<block ref="26d2d73c912baae339181423e2a8cf85" prefix=" " category="inline-code"></block> à l'aide du modèle suivant, puis remplissez les valeurs de paramètre fictif pour chaque service référençant l'exemple :</block>
  <block id="ca61951791cd6f4d50294a908b9eee76" category="admonition">Pour connaître la taille correcte à utiliser, reportez-vous à la section <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>..</block>
  <block id="71c1385fcc844d118e8b2688b0cfd2d6" category="cell">stor_09.yml</block>
  <block id="b183ecb3a449e6250fd1771086e68253" category="cell">i1b:100.127.103.9/16 i2b:100.128.104.9/16</block>
  <block id="9282f3f43896f146dcbcc2d03d530b59" category="cell">beegfs_s9_s10</block>
  <block id="8f72ae1bf7ca7b8218a4bf9e719f5e7d" category="cell">stor_10.yml</block>
  <block id="b8569c1d93725d20f1a50fb74f3947df" category="cell">i2b:100.128.104.10/16 i1b:100.127.103.10/16</block>
  <block id="e5a3d4f42adb756f3b3c2e3ed045e4a8" category="cell">stor_11.yml</block>
  <block id="53b0db6fe7b8e62a2dcc9bf455bcf174" category="cell">i3b:100.127.103.11/16 i4b:100.128.104.11/16</block>
  <block id="6e4cec4b32bddd9c9a3574aacee223b6" category="cell">beegfs_s11_s12</block>
  <block id="05fd4833433a12b38d11d8045aebddff" category="cell">stor_12.yml</block>
  <block id="9df04e8249070b73fc9be81b8f249664" category="cell">i4b:100.128.104.12/16 i3b:100.127.103.12/16</block>
  <block id="437037bccd34f3db0b238843b50fe65a" category="cell">stor_13.yml</block>
  <block id="527c5e3cde165799cdd8148db81d6473" category="cell">i1b:100.127.103.13/16 i2b:100.128.104.13/16</block>
  <block id="7db433542754f496e2d707f51bf00c05" category="cell">beegfs_s13_s14</block>
  <block id="b3c4ed6c5b5c833713923f9e9bdfb9b9" category="cell">stor_14.yml</block>
  <block id="80cd11504622edd89d4abbc32c1245aa" category="cell">i2b:100.128.104.14/16 i1b:100.127.103.14/16</block>
  <block id="4871ef58b7b91db78d33bb4d95e4bf27" category="cell">stor_15.yml</block>
  <block id="040551498fc870111512145ed93337fc" category="cell">i3b:100.127.103.15/16 i4b:100.128.104.15/16</block>
  <block id="b1a9c1cb2640dd5bc9fb4e80dda30200" category="cell">beegfs_s15_s16</block>
  <block id="b02a9cdb541eba39e680a1da9c6299c7" category="cell">stor_16.yml</block>
  <block id="4799f858e623362408f753fa051a2699" category="cell">i4b:100.128.104.16/16 i3b:100.127.103.16/16</block>
  <block id="dea1f079dcd8c8280e07dcd96ea8c075" category="section-title">Étape 4 : configurer l'inventaire pour un élément de base stockage uniquement</block>
  <block id="711be1acedea341e1f5455f007cdb22b" category="paragraph">Procédure de configuration d'un inventaire Ansible pour un élément de base BeeGFS Storage uniquement. La différence majeure entre l'installation de la configuration pour un bloc de métadonnées + stockage et un bloc modulaire uniquement destiné au stockage, c'est l'omission de tous les groupes de ressources de métadonnées et la modification<block ref="4c7b810e50ba611dcdc51295c4338bf0" prefix=" " category="inline-code"></block> de 10 à 12 pour chaque pool de stockage.</block>
  <block id="5b6fe069463b7f5581a1864de036e765" category="list-text">Sous<block ref="14681f191ffa04a9b3cfd0d1d62d0b7c" prefix=" " category="inline-code"></block>, créez des fichiers pour les groupes de ressources<block ref="24a4e7d8beea152fbef989b5391e857b" prefix=" " category="inline-code"></block> à<block ref="4df0910e4828ce9c7f4218f92cf86499" prefix=" " category="inline-code"></block> à l'aide du modèle suivant, puis remplissez les valeurs de paramètre fictif pour chaque service référençant l'exemple :</block>
  <block id="80f4c22d8a78e5d96cdf5bef28444426" category="admonition">Pour connaître la taille correcte à utiliser, reportez-vous à la section <block ref="152d8bea233357f34ffa00ccf219bae3" category="inline-link-macro-rx"></block>.</block>
  <block id="f9838993bed3d0e550ae346ed2e4355e" category="cell">stor_17.yml</block>
  <block id="de15a372e63adf3e9d172fcfe67bffbc" category="cell">i1b:100.127.103.17/16 i2b:100.128.104.17/16</block>
  <block id="5e71a5c8d7eefee3fe82fe28b69d3c1e" category="cell">ictad22a05</block>
  <block id="8cf4aacf94a115dfc0190ee6782190d3" category="cell">beegfs_s17_s18</block>
  <block id="7876b49b042d07da9a565db780a9b186" category="cell">stor_18.yml</block>
  <block id="e14872a3791e3d785c59a5fb1892c4cf" category="cell">i2b:100.128.104.18/16 i1b:100.127.103.18/16</block>
  <block id="291847ab33dfc1d81beed13f4d7a0519" category="cell">stor_19.yml</block>
  <block id="29d24f7d913acaf024704d56a3b47f4d" category="cell">i3b:100.127.103.19/16 i4b:100.128.104.19/16</block>
  <block id="114a9ab19efb0876a3622e54afc5bdbb" category="cell">ictad22a06</block>
  <block id="6a972920f626e0b0b8d505315beaf38b" category="cell">beegfs_s19_s20</block>
  <block id="943a4f354a2af18dac1fe2a6e14fe880" category="cell">stor_20.yml</block>
  <block id="e441e411ebace2ff01e6e612efceb07a" category="cell">i4b:100.128.104.20/16 i3b:100.127.103.20/16</block>
  <block id="a5aadbbde2e0b66fc661a126f5a1ce1e" category="cell">stor_21.yml</block>
  <block id="4a7361f8632968e437b2bae55a7d6a5e" category="cell">i1b:100.127.103.21/16 i2b:100.128.104.21/16</block>
  <block id="9c82263beb960ece0e5b6ac0604bb4d9" category="cell">beegfs_s21_s22</block>
  <block id="4879e56fe4d161ba3e4df67f961c483a" category="cell">stor_22.yml</block>
  <block id="8768cf88da2b645b99d30056c6b1f6e7" category="cell">i2b:100.128.104.22/16 i1b:100.127.103.22/16</block>
  <block id="316b3c9a6656c51b87a725bf1f678a52" category="cell">stor_23.yml</block>
  <block id="5eda737d72e69dcbdd869d84cc7c0e48" category="cell">i3b:100.127.103.23/16 i4b:100.128.104.23/16</block>
  <block id="2404c81b13915ef9d59e0ac6328f4c10" category="cell">beegfs_s23_s24</block>
  <block id="47662afeeaa16771e7d516dd96ade0b7" category="cell">stor_24.yml</block>
  <block id="a9088dda4778ef90eb3b6f87b070cd25" category="cell">i4b:100.128.104.24/16 i3b:100.127.103.24/16</block>
  <block id="b11764419626b2eff6352f3d8e6022e3" category="summary">Pour configurer un nœud de contrôle Ansible, identifiez une machine virtuelle ou physique avec un accès réseau aux ports de gestion de tous les nœuds de fichiers et de blocs qui peuvent être utilisés pour configurer la solution.</block>
  <block id="bfcf60c321d0d2cb85402c7a22d208b9" category="paragraph">Pour configurer un nœud de contrôle Ansible, vous devez identifier une machine virtuelle ou physique avec un accès réseau aux ports de gestion de tous les nœuds de fichiers et de blocs qui peuvent être utilisés pour configurer la solution.</block>
  <block id="c3ee5ddf91e65773d3e9d27f9e627350" category="inline-link">Documentation Ansible</block>
  <block id="c98e4789c5801c863a516b10b7663838" category="paragraph">Les étapes suivantes ont été testées sur CentOS 8.4. Pour connaître les étapes spécifiques à votre distribution Linux préférée, reportez-vous au<block ref="34c856f227a1cab1577af9d235784d24" category="inline-link-rx"></block>.</block>
  <block id="9987c24bf4e936399e49e8ef8615083d" category="list-text">Installer Python 3.9 et s'assurer que la version correcte de<block ref="62ad1c2a46c5298f3e2c95d3babf8d0c" prefix=" " category="inline-code"></block> est installé.</block>
  <block id="bc55433e1f3f1b08c02a0254a0f864c1" category="list-text">Créez des liens symboliques, en vous assurant que le binaire Python 3.9 est utilisé chaque fois<block ref="6e8efbe3a442748b716644025479aab5" prefix=" " category="inline-code"></block> ou<block ref="23eeeb4347bdd26bfc6b7ee9a3b755dd" prefix=" " category="inline-code"></block> est appelé.</block>
  <block id="e7a81038c18b15bf5d97b77fb110af03" category="list-text">Installez les packages Python requis par les collections NetApp BeeGFS.</block>
  <block id="7f883f5609524995f000fc99b8f5691a" category="admonition">Pour vous assurer que vous installez une version prise en charge d'Ansible et de tous les packages Python requis, consultez le fichier Lisezmoi de la collection BeeGFS. Les versions prises en charge sont également présentées dans le <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>.</block>
  <block id="a36d9a848f44be3e2b8d092a5861995a" category="list-text">Vérifiez que les versions correctes d'Ansible et de Python sont installées.</block>
  <block id="4ac0a4015ebef3209a5f3acb61110dd9" category="list-text">Stockez les inventaires Ansible utilisés pour décrire le déploiement BeeGFS dans des systèmes de contrôle source tels que Git ou BitBucket, puis installez Git pour interagir avec ces systèmes.</block>
  <block id="f2f38616eaf6d21846071c00e89109b4" category="list-text">Configurez SSH sans mot de passe. C'est le moyen le plus simple de permettre à Ansible d'accéder aux nœuds de fichiers BeeGFS distants à partir du nœud de contrôle Ansible.</block>
  <block id="3087af73e5990976755e4c56b6e7c754" category="list-text">Sur le nœud de contrôle Ansible, si nécessaire, générez une paire de clés publiques à l'aide de<block ref="5356c138de038f32891acc3ddf8f3ed6" prefix=" " category="inline-code"></block></block>
  <block id="c5d36867af8fc130f7a6b6bd87d51d23" category="list-text">Configurez SSH sans mot de passe sur chacun des nœuds de fichiers à l'aide de<block ref="db16ae2d4f692829fd5e7722c57dc5ff" prefix=" " category="inline-code"></block></block>
  <block id="c4e4fc85a76d5e87beac70d1fa166882" category="paragraph">Do *NOT* configurez SSH sans mot de passe sur les nœuds de bloc. Cela n'est ni pris en charge ni obligatoire.</block>
  <block id="03f38aac08b6c6c3e6e3afc965fedbcc" category="list-text">Utilisez Ansible Galaxy pour installer la version de la collection BeeGFS répertoriée dans <block ref="786d34f336ab7f462feb4fe8776c8670" category="inline-link-macro-rx"></block>.</block>
  <block id="b113449496b52721b53dc04e5120a57b" category="paragraph">Cette installation inclut des dépendances Ansible supplémentaires, telles que le logiciel NetApp SANtricity et les collections d'hôtes.</block>
  <block id="c38012b2187d10d4a33d168693918570" category="summary">Chaque module se compose de deux nœuds de fichiers x86 validés directement connectés à l'aide de l'InfiniBand HDR (200 Go) à deux nœuds de blocs NetApp.</block>
  <block id="0893812920a9268362b89a618b2f05c4" category="paragraph">Chaque module comprend deux nœuds de fichiers x86 validés directement connectés à deux nœuds de bloc à l'aide de câbles InfiniBand HDR (200 Go).</block>
  <block id="cf173c7219b93e53cad26c1f5975c527" category="admonition">Chaque élément de base inclut deux nœuds de fichiers BeeGFS, un minimum de deux éléments de base est requis pour établir le quorum dans le cluster de basculement. Bien qu'il soit possible de configurer un cluster à deux nœuds, certaines limites à cette configuration permettent d'empêcher le basculement de se produire dans certains scénarios. Si un cluster à deux nœuds est nécessaire, il est également possible d'intégrer un troisième périphérique comme Tiebreaker, bien qu'il ne soit pas couvert dans cette procédure de déploiement.</block>
  <block id="0cc464de9a37ad072fa7529593389b2a" category="paragraph">Sauf mention contraire, les étapes suivantes sont identiques pour chaque élément de base du cluster, que ce soit pour exécuter des métadonnées et des services de stockage BeeGFS ou des services de stockage uniquement.</block>
  <block id="ee6202c3dca3dfe457b79b5ff39c7765" category="list-text">Configurez chaque nœud de fichier BeeGFS avec quatre adaptateurs de canal hôte (HCA) à double port PCIe 4.0 ConnectX-6 en mode InfiniBand et installez-les dans les emplacements PCIe 2, 3, 5 et 6.</block>
  <block id="9df6f3b087eea6552beb54d44653501a" category="list-text">Configurez chaque nœud de bloc BeeGFS avec une carte d'interface hôte (HIC) à deux ports 200 Go et installez la HIC dans chacun de ses deux contrôleurs de stockage.</block>
  <block id="31562d2b8d25ec86381df6ff0157e4b7" category="paragraph">Placez les éléments de base de façon à ce que les deux nœuds de fichier BeeGFS se trouvent au-dessus des nœuds de bloc BeeGFS. La figure suivante montre la configuration matérielle correcte pour le bloc de construction BeeGFS (vue arrière).</block>
  <block id="7a549152f69a4c5a4d90a9ad467016da" category="paragraph"><block ref="7a549152f69a4c5a4d90a9ad467016da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e5081bbd0a64102ab8844f96776d6ea" category="admonition">La configuration de l'alimentation électrique pour les cas d'utilisation en production doit généralement utiliser des blocs d'alimentation redondants.</block>
  <block id="cf31d049daa8cd238cb4238371f2e5d0" category="list-text">Si nécessaire, installez les lecteurs dans chacun des nœuds de bloc BeeGFS.</block>
  <block id="eb86aba8f900c8f076cdcddafcf7271f" category="list-text">Si le module sera utilisé pour exécuter des métadonnées et des services de stockage BeeGFS et des disques plus petits sont utilisés pour les volumes de métadonnées, vérifiez qu'ils sont renseignés dans les emplacements de disque les plus à l'extérieur, comme indiqué dans la figure ci-dessous.</block>
  <block id="c448ee45144a8930f2211d0a4edb7b91" category="list-text">Pour toutes les configurations d'éléments de base, si un boîtier de disque n'est pas plein, assurez-vous qu'un nombre égal de disques est utilisé dans les emplacements 0–11 et 12–23 pour des performances optimales.</block>
  <block id="4885044112b3b6c6858ae6802eb99831" category="paragraph"><block ref="4885044112b3b6c6858ae6802eb99831" category="inline-image-macro-rx" type="image"></block></block>
  <block id="472ae30ca7767b7347c25c071e0e4b13" category="list-text">Pour câbler les nœuds de fichier et de bloc, utilisez des câbles en cuivre à connexion directe 1 m InfiniBand HDR de 200 Go, de sorte qu'ils correspondent à la topologie illustrée dans la figure ci-dessous.</block>
  <block id="835b8f1e6b31f0d45576eed50cfe4027" category="paragraph"><block ref="835b8f1e6b31f0d45576eed50cfe4027" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fd5b7ef2a561c49e1b59a838397af45" category="admonition">Les nœuds répartis entre plusieurs éléments de base ne sont jamais directement connectés. Chaque élément de base doit être considéré comme une unité autonome et toute communication entre les éléments de base se fait par le biais de commutateurs réseau.</block>
  <block id="ca7450c6e9a714419bebd35c8d11414a" category="list-text">Utilisez des câbles en cuivre à connexion directe 2 m (ou la longueur appropriée) InfiniBand HDR de 200 Go pour raccorder les ports InfiniBand restants de chaque nœud de fichiers aux commutateurs InfiniBand qui seront utilisés pour le réseau de stockage.</block>
  <block id="678e3f5ded0c872017877baf55a34219" category="paragraph">Si des commutateurs InfiniBand redondants sont utilisés, reliez les ports surlignés en vert clair dans la figure suivante aux différents commutateurs.</block>
  <block id="7a8dd1c52597fd7244751f757c26132e" category="paragraph"><block ref="7a8dd1c52597fd7244751f757c26132e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57f799feabdc3b75aa704ff51e74f4c1" category="list-text">Au besoin, assembler des éléments de construction supplémentaires en suivant les mêmes directives de câblage.</block>
  <block id="6a2ae129e5b77fd39f068e6cdee42d2a" category="admonition">Le nombre total d'éléments de base pouvant être déployés dans un rack unique dépend de l'alimentation et du refroidissement disponibles sur chaque site.</block>
  <block id="1d62eb925570a160f6a58cd18984f578" category="summary">La solution BeeGFS inclut des recommandations sur le dimensionnement de la performance et de la capacité qui étaient basées sur des tests de vérification.</block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="doc">Instructions de dimensionnement</block>
  <block id="6166a42aac4e50811124dbb35631ea78" category="paragraph">L'objectif de l'architecture modulaire est de créer une solution simple à dimensionner en ajoutant plusieurs éléments de base pour répondre aux exigences d'un système BeeGFS particulier. À l'aide des lignes directrices ci-dessous, vous pouvez estimer la quantité et les types de blocs de construction BeeGFS qui sont nécessaires pour répondre aux exigences de votre environnement.</block>
  <block id="a752ca5f8ca9bd168c12fc180ff734e3" category="paragraph">Notez que ces estimations sont les meilleures performances au cas par cas. Les applications de test des performances synthétiques sont écrites et utilisées pour optimiser l'utilisation des systèmes de fichiers sous-jacents d'une manière qui n'est pas forcément possible pour les applications réelles.</block>
  <block id="800f4a301937e5493aaaddfe77e10dd5" category="section-title">Dimensionnement de la performance</block>
  <block id="6875300666b544ca98e406bd6ca73da1" category="paragraph">Le tableau suivant indique le dimensionnement de performance recommandé.</block>
  <block id="83d4567aaaf81ff58ab394c3ad02accc" category="cell">Profil de configuration</block>
  <block id="58a15ea9e5c981b498a5c119456b9dd9" category="cell">1MiB lit</block>
  <block id="968dfca19c742301bc400a7c883b1594" category="cell">Écritures 1MiB</block>
  <block id="8cf5b688a1a209b630cab18001501c76" category="cell">Métadonnées + stockage</block>
  <block id="5d44d1f7b753dee2968cad82eef2f1dd" category="cell">62 GiBps</block>
  <block id="a5a649e4dec54d9f61f1cfc632dab412" category="cell">21 GiBps</block>
  <block id="dfab8e8b566f2d091e7ecb4b4d65060b" category="cell">Stockage uniquement</block>
  <block id="1d955116a3bafb864bcf6755485fce7e" category="cell">64 GiBps</block>
  <block id="419cfc02b324dc7d8faefa90ed608fb0" category="inline-link">Configuration minimale requise</block>
  <block id="e618e38f89f153e374a90674c51efb8f" category="paragraph">Le dimensionnement de la capacité des métadonnées est basé sur la « règle générale » selon laquelle 500 Go de capacité suffisent pour environ 150 millions de fichiers sur BeeGFS. (Pour plus d'informations, consultez la documentation BeeGFS pour<block ref="d422b619831c270410797364c04b1fb2" category="inline-link-rx"></block>.)</block>
  <block id="903cd75262aca9ec0b3a831bccc18869" category="paragraph">L'utilisation de fonctions telles que les listes de contrôle d'accès et le nombre de répertoires et de fichiers par répertoire affecte également la vitesse de consommation de l'espace de métadonnées. Les estimations de capacité de stockage tiennent compte de la capacité de disque utilisable ainsi que de la surcharge RAID 6 et XFS.</block>
  <block id="9490db12574d3954607c7e9d91d28809" category="section-title">Dimensionnement de la capacité pour les métadonnées + éléments de base du stockage</block>
  <block id="015d2cd8138605f0cec20c9dffe04a93" category="paragraph">Le tableau suivant indique le dimensionnement de la capacité recommandé pour les métadonnées et les éléments de base du stockage.</block>
  <block id="b897bc1ea15940ab83faf02e07b143bf" category="cell">Taille du disque (2+2 RAID 1) groupes de volumes de métadonnées</block>
  <block id="fa4beb4be6de6614b0cd1460e8d33b1f" category="cell">Capacité des métadonnées (nombre de fichiers)</block>
  <block id="070e4137f478af27755d228dba080d41" category="cell">Taille des disques (RAID 6 8+2) groupes de volumes de stockage</block>
  <block id="785d80cc95b60fc3365e05e3ae013331" category="cell">Capacité de stockage (contenu de fichiers)</block>
  <block id="be3ca1ec15ca4657e5ca3ec84a561090" category="cell">1,92 TO</block>
  <block id="71839d6e6fb59e239ad941d08b5e2519" category="cell">3,84 TO</block>
  <block id="a98c228c0d8903ba6926546f64321cc4" category="cell">7,68 TO</block>
  <block id="1f04a7c587f50d269f44d43229c966ac" category="cell">15,3 TO</block>
  <block id="a966f153f6f429bbd39c3ac2390ef970" category="admonition">Lors du dimensionnement des métadonnées et des éléments de base de stockage, vous pouvez réduire les coûts en utilisant des disques plus petits pour les groupes de volumes de métadonnées et les groupes de volumes de stockage.</block>
  <block id="f9fb1e607e840d5610c34a9f15da540e" category="section-title">Dimensionnement de la capacité pour les éléments de base uniquement destinés au stockage</block>
  <block id="cd9db38cfde636fa7c304f8e67d8708d" category="paragraph">Le tableau suivant indique la règle générale de dimensionnement de la capacité pour les éléments de base uniquement liés au stockage.</block>
  <block id="bc893b2686532fc683cb056beffd08aa" category="cell">Taille des disques (RAID 6 10+2) groupes de volumes de stockage</block>
  <block id="4f7d0f08c61d0cc981b973ba853e2c6f" category="cell">59,89 TO</block>
  <block id="22f3cf273453d70fdc724d513005c81d" category="cell">11980 TO</block>
  <block id="e4c2850d67996ecfe5e0b56e9637a470" category="cell">251,89TB</block>
  <block id="f7c8918f0c24047e89e5842785e7b8ef" category="cell">58,55 TO</block>
  <block id="3cf8b9e44b7a1eb7154f2b777094e670" category="admonition">Les performances et la surcharge liée à la capacité de l'inclusion du service de gestion dans le premier élément de base sont minimales, sauf si le verrouillage global des fichiers est activé.</block>
  <block id="39f54b8b12af6ae0edd74b4db43d9959" category="summary">La configuration matérielle de BeeGFS sur NetApp inclut des nœuds de fichiers et le câblage réseau.</block>
  <block id="a80f40a4cf172e4461c613d2afc0bade" category="doc">Configuration matérielle</block>
  <block id="a6f76304e97d4b2df31a130d24073f88" category="section-title">Configuration de nœud de fichiers</block>
  <block id="8e9473694bc8ee293e1f6c4f730ab4ed" category="paragraph">Les nœuds de fichiers ont deux sockets de CPU configurés en zones NUMA distinctes, qui incluent un accès local à un nombre égal de slots PCIe et de mémoire.</block>
  <block id="81fb4a697d99bad44c068f68db513e26" category="paragraph">Les adaptateurs InfiniBand doivent être placés dans les connecteurs ou les cartes de montage PCI appropriés, de sorte que la charge de travail soit équilibrée sur les voies PCIe et les canaux de mémoire disponibles. Pour équilibrer la charge de travail, vous pouvez isoler intégralement le travail des services BeeGFS vers un nœud NUMA particulier. L'objectif est d'atteindre les mêmes performances pour chaque nœud de fichiers que s'il s'agissait de deux serveurs à socket unique indépendants.</block>
  <block id="26dc1928abfabc3027cfa2e4f0b2f57f" category="paragraph">La figure suivante montre la configuration NUMA du nœud de fichiers.</block>
  <block id="84d47488591b2b0cb81b407a80494c91" category="paragraph"><block ref="84d47488591b2b0cb81b407a80494c91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc560c8656cb52d0c2376a0dbb2ac436" category="paragraph">Les processus BeeGFS sont épinglés à une zone NUMA particulière pour s'assurer que les interfaces utilisées se trouvent dans la même zone. Cette configuration évite d'avoir besoin d'un accès à distance via la connexion inter-socket. La connexion inter-sockets est parfois appelée liaison QPI ou GMI2 ; même dans les architectures de processeurs modernes, ils peuvent être un goulot d'étranglement lors de l'utilisation de réseaux haut débit comme HDR InfiniBand.</block>
  <block id="037505dd545df2577c95982dd52a9497" category="section-title">Configuration des câbles réseau</block>
  <block id="2efc6e5efcfc3424383b80badbc6f2f8" category="paragraph">Dans un élément de base, chaque nœud de fichier est connecté à deux nœuds de bloc grâce à quatre connexions InfiniBand redondantes. En outre, chaque nœud de fichiers dispose de quatre connexions redondantes au réseau de stockage InfiniBand.</block>
  <block id="c2b0d4abc479963299ef11f7007b04d9" category="paragraph">Dans la figure suivante, notez que :</block>
  <block id="ccebd32ee2768501ecf2042e521d090c" category="list-text">Tous les ports de nœuds de fichiers indiqués en vert sont utilisés pour la connexion au maillage Storage Fabric ; tous les autres ports de nœuds de fichiers sont les connexions directes aux nœuds de blocs.</block>
  <block id="01be869a64586dc6df5d40be148742a7" category="list-text">Deux ports InfiniBand d'une zone NUMA spécifique se connectent aux contrôleurs A et B du même nœud de bloc.</block>
  <block id="92d102b77ed7526653d6ed77bc5f9297" category="list-text">Les ports du nœud NUMA 0 se connectent toujours au premier nœud de bloc.</block>
  <block id="41d34f3f75f0a6f23825fec8c1f6b167" category="list-text">Les ports du nœud NUMA 1 se connectent au second nœud de bloc.</block>
  <block id="058a7d9db61c859b343066aa0c6cd3c7" category="paragraph"><block ref="058a7d9db61c859b343066aa0c6cd3c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="109d8b81996cf829eba8acc62259eaee" category="admonition">Pour les réseaux de stockage avec commutateurs redondants, les ports indiqués en vert clair doivent se connecter à un commutateur et les ports en vert foncé à un autre commutateur.</block>
  <block id="1109e0767ef0b323f02f85cdaa9a589d" category="paragraph">La configuration de câblage illustrée dans la figure permet à chaque service BeeGFS de :</block>
  <block id="12e9ec8c0cb3aa87bfb400a73712d79b" category="list-text">Exécuter dans la même zone NUMA, quel que soit le nœud de fichier qui exécute le service BeeGFS.</block>
  <block id="488f6220ee8bab2e1e3621f7f99b598c" category="list-text">Disposer de chemins optimaux secondaires au réseau de stockage frontal et aux nœuds de blocs internes, quel que soit l'endroit où une défaillance se produit</block>
  <block id="e2ae85c4e917fafc3b545710dcc3fdf1" category="list-text">Réduisez l'impact sur la performance si un nœud de fichiers ou un contrôleur d'un nœud de blocs nécessite une maintenance.</block>
  <block id="76af1dbb7a81b9258eeb702dd63164e2" category="paragraph">Pour exploiter la bande passante bidirectionnelle PCIe complète, vérifiez que un port de chaque adaptateur InfiniBand se connecte à la structure de stockage, et que l'autre port est connecté à un nœud de bloc. La vitesse maximale théorique d'un port InfiniBand HDR est de 25 Gbit/s (ne tenant pas compte de la signalisation et des autres frais généraux). La bande passante unidirectionnelle maximale d'un slot PCIe 4.0 x16 est de 32 Gbit/s, ce qui crée un goulot d'étranglement potentiel lors de l'implémentation de nœuds de fichiers intégrant des adaptateurs InfiniBand à double port qui peuvent théoriquement gérer 50 Gbit/s de bande passante.</block>
  <block id="33f3e0c9879fd051eb380c62267a24cf" category="paragraph">La figure suivante montre la conception de câblage utilisée pour exploiter la bande passante bidirectionnelle PCIe complète.</block>
  <block id="5a81a38e29a457f16f6a1a9146cb73de" category="paragraph"><block ref="5a81a38e29a457f16f6a1a9146cb73de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e366b0b441e75fcafac2db7ff979a799" category="inline-link-macro">Configuration logicielle</block>
  <block id="1a72dacfce92d062255a929bbb18fc8d" category="paragraph">Pour chaque service BeeGFS, utilisez la même carte pour connecter le port préféré utilisé pour le trafic client avec le chemin vers le contrôleur de nœuds de bloc qui est le principal propriétaire de ces volumes de services. Pour plus d'informations, voir <block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block>.</block>
  <block id="883ccbea6264c3d9c8ea56267b290a0a" category="summary">La configuration logicielle de BeeGFS sur NetApp inclut des composants réseau BeeGFS, des nœuds de bloc EF600, des nœuds de fichiers BeeGFS, des groupes de ressources et des services BeeGFS.</block>
  <block id="dea1b03288253149cb4c55f3c4f10e3e" category="section-title">Configuration réseau BeeGFS</block>
  <block id="391f99769ce2b9374f0421ace7ce5ac5" category="paragraph">La configuration du réseau BeeGFS comprend les composants suivants.</block>
  <block id="f05f92f283e258444df8e73ac9508c74" category="list-text">*IP flottantes* les adresses IP flottantes sont un type d'adresse IP virtuelle qui peut être routée dynamiquement vers n'importe quel serveur du même réseau. Plusieurs serveurs peuvent posséder la même adresse IP flottante, mais elle ne peut être active que sur un seul serveur à la fois.</block>
  <block id="76a7e91177d008d5a202ef507a9049d7" category="paragraph">Chaque service de serveur BeeGFS possède sa propre adresse IP qui peut se déplacer entre les nœuds de fichiers en fonction de l'emplacement d'exécution du service de serveur BeeGFS. Cette configuration IP flottante permet à chaque service de basculer indépendamment vers l'autre nœud de fichiers. Le client a simplement besoin de connaître l'adresse IP d'un service BeeGFS particulier; il n'est pas nécessaire de savoir quel nœud de fichier exécute actuellement ce service.</block>
  <block id="527f436644c629cc1f2330d74c5c29b4" category="list-text">*Configuration multi-homing du serveur BeeGFS* pour augmenter la densité de la solution, chaque nœud de fichiers a plusieurs interfaces de stockage avec des adresses IP configurées dans le même sous-réseau IP.</block>
  <block id="5a19238d05fdcdb09e439e41a0a94349" category="paragraph">Des configurations supplémentaires sont nécessaires pour s'assurer que cette configuration fonctionne comme prévu avec la pile réseau Linux, car par défaut, les requêtes à une interface peuvent être traitées sur une autre interface si leurs adresses IP se trouvent dans le même sous-réseau. Outre d'autres inconvénients, ce comportement par défaut rend impossible l'établissement ou la maintenance des connexions RDMA.</block>
  <block id="e7a28f6c997a9c0eba41eb574b5f829c" category="paragraph">Le déploiement Ansible gère le serrage du comportement de la RP (reverse path) et du protocole ARP (Address Resolution Protocol), ainsi que la vérification du démarrage et de l'arrêt d'adresses IP flottantes ; les routes et règles IP correspondantes sont créées dynamiquement pour permettre à la configuration réseau multihomée de fonctionner correctement.</block>
  <block id="99e50b7bb7e3ca73eb910eaf99c6f100" category="list-text">*Configuration multi-rail client BeeGFS* _Multi-rail_ désigne la capacité d'une application d'utiliser des « rails » de réseau indépendants multiples pour augmenter les performances.</block>
  <block id="24cb2caf398043c3ad552915f0ec2b22" category="paragraph">Bien que BeeGFS peut utiliser RDMA pour la connectivité, BeeGFS utilise IPoIB pour simplifier la recherche et la création de connexions RDMA. Pour permettre aux clients BeeGFS d'utiliser plusieurs interfaces InfiniBand, vous pouvez configurer chaque client avec une adresse IP située dans un sous-réseau différent, puis configurer les interfaces préférées pour la moitié des services serveur BeeGFS dans chaque sous-réseau.</block>
  <block id="89b4732ecad8d523a7b684af09ad56ee" category="paragraph">Dans le schéma suivant, les interfaces surlignées en vert clair se trouvent dans un sous-réseau IP (par exemple,<block ref="7cef287dacfa3692b6efc37f4ca39736" prefix=" " category="inline-code"></block>) et les interfaces vert foncé sont situées dans un autre sous-réseau (par exemple,<block ref="2a298c9255d4013ca9132c446207b890" prefix=" " category="inline-code"></block>).</block>
  <block id="12ec3f7db1a39d49d76e159a6fc9be24" category="paragraph">La figure suivante montre l'équilibrage du trafic sur plusieurs interfaces client BeeGFS.</block>
  <block id="8336bf936a644f2a0962fc710a65d3db" category="paragraph"><block ref="8336bf936a644f2a0962fc710a65d3db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02eef1a6d9aefa452755edb315057e27" category="paragraph">Comme chaque fichier de BeeGFS est généralement réparti sur plusieurs services de stockage, la configuration multi-rail permet au client d'atteindre un débit supérieur à celui d'un seul port InfiniBand. Par exemple, l'exemple de code suivant montre une configuration commune de répartition des fichiers qui permet au client d'équilibrer le trafic entre les deux interfaces :</block>
  <block id="7a11ff2c7aa2ff0eccecba650f1db9f5" category="paragraph">L'utilisation de deux sous-réseaux IPoIB est une distinction logique. Si vous le souhaitez, vous pouvez utiliser un seul sous-réseau InfiniBand physique (réseau de stockage).</block>
  <block id="315faf76d806cf96ff685ed2e65a9d16" category="inline-link">Prise en charge de RDMA BeeGFS</block>
  <block id="96002ab5a7c353b76ef0cc2e390f7131" category="admonition">Le support multi-rail a été ajouté dans BeeGFS 7.3.0 pour permettre l'utilisation de plusieurs interfaces IB dans un seul sous-réseau IPoIB. Le design de la solution BeeGFS sur NetApp a été développé avant la disponibilité générale de BeeGFS 7.3.0, et démontre ainsi l'utilisation de deux sous-réseaux IP pour utiliser deux interfaces IB sur les clients BeeGFS. L'un des avantages de l'approche de sous-réseau IP multiple est d'éliminer la nécessité de configurer plusieurs systèmes d'accueil sur les nœuds clients BeeGFS (pour plus d'informations, voir<block ref="bb2f67f854c27129a1f13b908e56ca65" category="inline-link-rx"></block>).</block>
  <block id="b28b500a27afaa858536ee53a4c02d91" category="section-title">Configuration de nœud en mode bloc EF600</block>
  <block id="6e88eb560b5c117f0226888b924af1c5" category="paragraph">Les nœuds de blocs comprennent deux contrôleurs RAID actifs/actifs avec accès partagé au même ensemble de lecteurs. En général, chaque contrôleur possède la moitié des volumes configurés sur le système, mais il peut reprendre l'autre contrôleur si nécessaire.</block>
  <block id="674757e2095af366602187ca856f8ec4" category="paragraph">Le logiciel de chemins d'accès multiples des nœuds de fichiers détermine le chemin actif et optimisé vers chaque volume et le déplace automatiquement vers l'autre chemin d'accès en cas de défaillance du câble, de l'adaptateur ou du contrôleur.</block>
  <block id="458cd7cdbda7e7a38853eae8ce0e9662" category="paragraph">Le schéma suivant illustre la disposition du contrôleur dans les nœuds de bloc EF600.</block>
  <block id="896dfe770f6add65f01e361850b05b91" category="paragraph"><block ref="896dfe770f6add65f01e361850b05b91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4adca73c8e2d619dedc4eb6a42bc966" category="paragraph">Pour faciliter la solution haute disponibilité du disque partagé, les volumes sont mappés sur les deux nœuds de fichiers de manière à ce qu'ils puissent prendre en charge les uns les autres selon les besoins. Le diagramme suivant montre un exemple de configuration du service BeeGFS et de la propriété du volume préféré pour des performances maximales. L'interface à gauche de chaque service BeeGFS indique l'interface préférée que les clients et les autres services utilisent pour le contacter.</block>
  <block id="3a7342602381a86e862da535061f4da7" category="paragraph"><block ref="3a7342602381a86e862da535061f4da7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1bff1512ad9e19d6469659f6a916a7e" category="paragraph">Dans l'exemple précédent, les clients et les services serveur préfèrent communiquer avec le service de stockage 1 via l'interface i1b. Le service de stockage 1 utilise l'interface i1a comme chemin préféré pour communiquer avec ses volumes (Storage_tgt_101, 102) sur le contrôleur A du premier nœud de bloc. Cette configuration utilise la bande passante PCIe bidirectionnelle complète disponible pour l'adaptateur InfiniBand et offre de meilleures performances avec un adaptateur HDR InfiniBand à deux ports que le tout avec PCIe 4.0.</block>
  <block id="f4fa0385d373373f4ab191231ead5909" category="section-title">Configuration de nœud de fichier BeeGFS</block>
  <block id="5e2d5eb9f991b81a298fb57212c715fe" category="paragraph">Les nœuds de fichiers BeeGFS sont configurés dans un cluster haute disponibilité (HA) pour faciliter le basculement des services BeeGFS entre plusieurs nœuds de fichiers.</block>
  <block id="f409d0a0c329860646597bbcc45fcc4b" category="inline-link">Formation Red Hat pour les modules complémentaires haute disponibilité</block>
  <block id="48a9bfc91c9cb5a8f6f7fc37080d3b95" category="paragraph">La conception du cluster HA repose sur deux projets Linux HA largement utilisés : Corosync pour l'appartenance à un cluster et Pacemaker pour la gestion des ressources de cluster. Pour plus d'informations, voir<block ref="a896e9cb42c24f9ab5c574f54ad83b08" category="inline-link-rx"></block>.</block>
  <block id="79b70ba13b6d273b53c66d816a15830d" category="paragraph">NetApp a rédigé et étendu plusieurs agents de ressources OCF (Open Cluster Framework) pour permettre au cluster de démarrer et de surveiller intelligemment les ressources BeeGFS.</block>
  <block id="ff07f4dbc22a6f0ecb4a11bfb6136d40" category="section-title">Clusters HA BeeGFS</block>
  <block id="7a189557128751d94f2d8bca38ccf462" category="paragraph">De façon générale, lorsque vous démarrez un service BeeGFS (avec ou sans HA), quelques ressources doivent être en place :</block>
  <block id="3f1f71800ded6b59769a66de67dd7d86" category="list-text">Adresses IP où le service est accessible, généralement configurées par Network Manager.</block>
  <block id="03eb5c90128e244e904f61d22569b4af" category="list-text">Les systèmes de fichiers sous-jacents sont utilisés comme cibles de BeeGFS pour stocker des données.</block>
  <block id="510de0f837e4aacf9e6eb3c08926bcff" category="paragraph">Celles-ci sont généralement définies dans<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block> Et monté par systemd.</block>
  <block id="49990dbe44b62019deed5be9f5c437a3" category="list-text">Un service systemd responsable du démarrage des processus BeeGFS lorsque les autres ressources sont prêtes.</block>
  <block id="4f26c3922778ca3d5247b1281f6843af" category="paragraph">Sans logiciel supplémentaire, ces ressources ne démarrent que sur un seul nœud de fichiers. Par conséquent, si le nœud de fichier passe hors ligne, une partie du système de fichiers BeeGFS est inaccessible.</block>
  <block id="c60a1b018b03670c1a1a93baf9da5d45" category="paragraph">Comme plusieurs nœuds peuvent démarrer chaque service BeeGFS, Pacemaker doit s'assurer que chaque service et chaque ressource dépendante sont exécutés sur un seul nœud à la fois. Par exemple, si deux nœuds tentent de démarrer le même service BeeGFS, il y a un risque de corruption des données s'ils essaient tous les deux d'écrire sur les mêmes fichiers sur la cible sous-jacente. Pour éviter ce scénario, Pacemaker utilise Corosync pour maintenir en toute fiabilité l'état du cluster global en mode synchrone sur tous les nœuds et établir le quorum.</block>
  <block id="a96d4ad8c651d8ff21de193227e20f4d" category="paragraph">En cas de défaillance dans le cluster, Pacemaker réagit et redémarre les ressources BeeGFS sur un autre nœud. Dans certains cas, il se peut que Pacemaker ne puisse pas communiquer avec le nœud défectueux d'origine pour confirmer que les ressources sont arrêtées. Pour vérifier que le nœud est arrêté avant de redémarrer les ressources BeeGFS ailleurs, Pacemaker déligne le nœud défectueux, idéalement en retirant l'alimentation.</block>
  <block id="ad22605bb834d1c650f3b2f1e5c76401" category="paragraph">De nombreux agents d'escrime open source sont disponibles pour permettre à Pacemaker de verrouiller un nœud avec une unité de distribution d'alimentation (PDU) ou à l'aide du contrôleur BMC (Baseboard Management Controller) de serveur avec des API telles que Redfish.</block>
  <block id="05273fb3cfbaf5190eee8cfc0c3e0597" category="paragraph">Lorsque BeeGFS est exécuté dans un cluster HA, tous les services BeeGFS et les ressources sous-jacentes sont gérés par Pacemaker dans des groupes de ressources. Chaque service BeeGFS et les ressources dont il dépend sont configurés dans un groupe de ressources qui assure le démarrage et l'arrêt des ressources dans le bon ordre et qui sont situés sur le même nœud.</block>
  <block id="de25b213ff1f6f931a4d9c0f59bbed69" category="paragraph">Pour chaque groupe de ressources BeeGFS, Pacemaker exécute une ressource de surveillance BeeGFS personnalisée qui est chargée de détecter les conditions de défaillance et de déclencher intelligemment les basculements lorsqu'un service BeeGFS n'est plus accessible sur un nœud particulier.</block>
  <block id="e33abb1ba19f563eaa662796e8b3021b" category="paragraph">La figure suivante montre les services et les dépendances de BeeGFS contrôlés par Pacemaker.</block>
  <block id="bedf97f40f223046eb65b7acad7c0a92" category="paragraph"><block ref="bedf97f40f223046eb65b7acad7c0a92" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5346cef6f7de3aac02ebdfc1ae9b6f27" category="inline-link">Documentation BeeGFS sur Multi-mode</block>
  <block id="c4ae8913dc1f6c9fed7961516b16defd" category="admonition">Pour que plusieurs services BeeGFS du même type soient démarrés sur le même nœud, Pacemaker est configuré pour démarrer les services BeeGFS à l'aide de la méthode de configuration Multi-mode. Pour plus d'informations, reportez-vous à la section<block ref="bc179f675bb7a303402ecb902ab09448" category="inline-link-rx"></block>.</block>
  <block id="553c30108a127bc2c66537e58970be9e" category="paragraph">Comme les services BeeGFS doivent pouvoir démarrer sur plusieurs nœuds, le fichier de configuration pour chaque service (normalement situé à<block ref="af1cad80e288805d61b78377a6d2c339" prefix=" " category="inline-code"></block>) Est stocké sur l'un des volumes E-Series utilisés comme cible BeeGFS pour ce service. Cela rend la configuration et les données d'un service BeeGFS accessibles à tous les nœuds qui peuvent avoir besoin d'exécuter le service.</block>
  <block id="ce0a47ccdc84e9c90b9185aea530a07b" category="summary">Pour prendre en charge la solution BeeGFS sur NetApp, qui associe le système de fichiers parallèle BeeGFS et les systèmes de stockage NetApp EF600, vous devez utiliser un équipement, un câblage et des configurations spécifiques.</block>
  <block id="fb7e8abee0ed4186f8c4b871d0ea6ac3" category="doc">Présentation du design</block>
  <block id="7cac973d2abc65a232606799a99be23c" category="paragraph">En savoir plus :</block>
  <block id="6ee419ed5a936cfed45771da0b746c94" category="list-text"><block ref="6ee419ed5a936cfed45771da0b746c94" category="inline-link-macro-rx"></block></block>
  <block id="1ce6299bc86692b3e97783bdba904848" category="list-text"><block ref="1ce6299bc86692b3e97783bdba904848" category="inline-link-macro-rx"></block></block>
  <block id="2c39c30b16a5c14e4b3bd73361f541c5" category="list-text"><block ref="2c39c30b16a5c14e4b3bd73361f541c5" category="inline-link-macro-rx"></block></block>
  <block id="b7f5b93ad68dd5ab95107b85145443e8" category="list-text"><block ref="b7f5b93ad68dd5ab95107b85145443e8" category="inline-link-macro-rx"></block></block>
  <block id="a51906ad0f905e303cf3b09d82ec1db0" category="list-text"><block ref="a51906ad0f905e303cf3b09d82ec1db0" category="inline-link-macro-rx"></block></block>
  <block id="66136a118d01240429805a157ae4b538" category="summary">Lorsque vous suivez la configuration standard des quatre volumes par pool de stockage pour les éléments de base de deuxième génération, reportez-vous à ces pourcentages recommandés.</block>
  <block id="13d38edc52fe6e049aae05e6fce1573a" category="paragraph">Lorsque vous suivez la configuration standard des quatre volumes par pool de stockage pour les éléments de base de deuxième génération, consultez le tableau suivant.</block>
  <block id="2d115a94acc324947afb0abf7c47d665" category="paragraph">Ce tableau fournit les pourcentages recommandés à utiliser comme taille de volume dans<block ref="8ca968d07b3817015da8919c700152f5" prefix=" " category="inline-code"></block> Pour chaque cible de stockage ou de métadonnées BeeGFS :</block>
  <block id="ec8691da9bf60fda22f12e08033d054b" category="cell">Taille du disque</block>
  <block id="6f6cb72d544962fa333e2e34ce64f719" category="cell">Taille</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="cell">18</block>
  <block id="d81fdeb5a429e85d04118048e4b3485d" category="cell">21.5</block>
  <block id="6303058eb2f22355195922bb9eeac265" category="cell">22.5</block>
  <block id="1ff1de774005f8da13f42943881c655f" category="cell">24</block>
  <block id="b6f404dc4372a8369386a51240b69703" category="admonition">Les recommandations ci-dessus ne s'appliquent pas au pool de stockage contenant le service de gestion, ce qui devrait réduire la taille ci-dessus de .25 % pour allouer 1 % du pool de stockage aux données de gestion.</block>
  <block id="cede28c203641f70169adaabc10df9b6" category="inline-link">Tr-4800 : Annexe A : compréhension de la longévité et du sur-provisionnement des disques SSD</block>
  <block id="dab022c0b8356780eb602bc87effd71f" category="paragraph">Pour comprendre comment ces valeurs ont été déterminées, reportez-vous à la section<block ref="fa826cd698d934925bfe1b514e70b591" category="inline-link-rx"></block>.</block>
  <block id="648f6c52aa693f2de99c600333c97b66" category="summary">Ce site inclut des informations spécifiques à la solution NetApp Verified Architecture (NVA) pour BeeGFS sur NetApp.</block>
  <block id="745f22cbd412f2eab6c6bf95417e8b09" category="doc">Ce qui est inclus dans ce site</block>
  <block id="6e86c5fc1c43e7a07f5837a535b5e721" category="paragraph">Ce site fournit des informations spécifiques à la deuxième génération de l'architecture vérifiée NetApp (NVA) pour BeeGFS sur NetApp.</block>
  <block id="c3c2c202fc482927fedd6635ee958a46" category="paragraph">Ce site comprend les informations suivantes :</block>
  <block id="669bf329256f5b0b2230171919bbeb26" category="list-text">Considérations relatives à la conception de l'architecture utilisées pour déterminer l'équipement, le câblage et les configurations spécifiques nécessaires pour prendre en charge l'architecture. Pour plus d'informations, voir <block ref="8a079cef168d8fb38e2a71896a9c949a" category="inline-link-macro-rx"></block>.</block>
  <block id="3714b9e12645295206bbb65334c84955" category="list-text">Instructions de déploiement à l'aide de serveurs de fichiers BeeGFS (nœuds de fichiers) validés reliés à des systèmes de stockage bloc (nœuds de blocs). Pour plus d'informations, voir <block ref="a0c3e44fdc4233e262adc49376e31e83" category="inline-link-macro-rx"></block>.</block>
  <block id="8c2de6dc6972aa428c25b73867ee0c6c" category="inline-link-macro">NetApp EF-Series ai avec NVIDIA DGX A100 et BeeGFS</block>
  <block id="cd781fa1b22842d6ce65495c1f1e7f32" category="paragraph">Ce site propose _NOT_ des informations de conception et de déploiement pour la première génération de la solution. Pour obtenir le contenu complet de la génération précédente, reportez-vous à la section <block ref="7c75f12548abfaad3f9a226ecdfc54d3" category="inline-link-macro-rx"></block>.</block>
  <block id="51bfd24e79e0939d84e9230980db5f18" category="summary">La solution BeeGFS sur NetApp est actuellement de sa deuxième conception générationnelle.</block>
  <block id="fa0de4179a84e742d2d88028d16bf137" category="doc">Générations de conception</block>
  <block id="51c16b7415d506b9bbcedd7241c7c1c0" category="paragraph">La première et la deuxième génération incluent une architecture de base qui inclut un système de fichiers BeeGFS et un système de stockage NVMe EF600. Cependant, la deuxième génération s'appuie sur la première pour inclure ces avantages supplémentaires :</block>
  <block id="20667306535e51f69f34371b95abfd0b" category="list-text">Doublez les performances et la capacité, tout en n'ajoutant que 2U d'espace rack</block>
  <block id="edcc56d654a1a9362699f309c738a185" category="list-text">Haute disponibilité (HA) qui repose sur un design matériel à deux niveaux à disque partagé</block>
  <block id="e79ef600cb60c3e821f1cef23dcb17c1" category="list-text">Qualification externe pour les architectures NVIDIA DGX A100 SuperPOD et NVIDIA BasePOD</block>
  <block id="189fdda096d5b994e140eac128f464e1" category="section-title">Seconde conception générationnelle</block>
  <block id="1e5b7e91f7684d1e82eca499bd3e9f00" category="paragraph">La deuxième génération de BeeGFS sur NetApp est optimisée pour répondre aux besoins de performance des workloads exigeants, notamment l'informatique haute performance (HPC) et le machine learning de style HPC (ML), le deep learning (DL) et d'intelligence artificielle (IA) similaires. Grâce à l'architecture haute disponibilité (HA) à disque partagé, la solution BeeGFS sur NetApp répond également aux besoins de durabilité et de disponibilité des données des entreprises et autres entreprises qui ne peuvent pas se permettre de temps d'indisponibilité ni de perte de données quand elles recherchent un stockage qui peut évoluer pour rester en phase avec leurs charges de travail et leurs cas d'utilisation. Non seulement NetApp vérifie cette solution, mais elle a également réussi la qualification externe en tant qu'option de stockage pour le NVIDIA DGX SuperPOD et le DGX BasePOD.</block>
  <block id="145c927b5996411105e8a05381bfab75" category="section-title">Première conception générationnelle</block>
  <block id="41ae1cb2edd9d144116e252e5f5c4e54" category="paragraph">La première génération de BeeGFS sur NetApp a été conçue pour les workloads d'apprentissage machine (ML) et d'intelligence artificielle (IA) à l'aide des systèmes de stockage NVMe NetApp EF600, du système de fichiers parallèle BeeGFS, des systèmes NVIDIA DGX™ A100 et des switchs IB NVIDIA® Mellanox® Quantum™ QM8700 200 Gbit/s. Cette conception comprend également une InfiniBand (IB) 200 Gbit/s pour la structure d'interconnexion des clusters de stockage et de calcul, afin d'offrir une architecture entièrement basée sur IB pour les charges de travail hautes performances.</block>
  <block id="cb0e1ee82028e21bcb25d1cedee42a90" category="paragraph">Pour plus d'informations sur la première génération, voir <block ref="7c75f12548abfaad3f9a226ecdfc54d3" category="inline-link-macro-rx"></block>.</block>
  <block id="c8a0fcd1a15bb039926f56fd15ce82e9" category="summary">Termes et concepts qui s'appliquent à la solution BeeGFS sur NetApp.</block>
  <block id="5d146c3fd3b69782d69f66b386b88a4c" category="doc">Termes et concepts</block>
  <block id="5710fc980ad3cc07a2d53a30f8e42802" category="paragraph">Les termes et concepts suivants s'appliquent à la solution BeeGFS sur NetApp.</block>
  <block id="cf5f3091e30dee6597885d8c0e0c357f" category="cell">Durée</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="0a40e3c91a3a55c9a37428c6d194d0e5" category="paragraph">L'IA</block>
  <block id="10a99475af71a950df10ae4fb41e6b27" category="paragraph">L'intelligence artificielle.</block>
  <block id="206b11a774f63418bae21625e6f6d2fb" category="paragraph">Inventaire Ansible</block>
  <block id="4278d92c9bdf11d430a86f440cffbb06" category="paragraph">Structure de répertoire contenant les fichiers YAML qui sont utilisés pour décrire le cluster BeeGFS HA souhaité.</block>
  <block id="396262ee936f3d3e26ff0e60bea6cae0" category="paragraph">BMC</block>
  <block id="20e7cb5fddc6ef60deff83e38954fc9c" category="paragraph">Contrôleur de gestion de la carte mère. Parfois appelé processeur de service.</block>
  <block id="399cda935f5cb9e0b94eaf42309257fb" category="paragraph">nœuds de blocs</block>
  <block id="56977f2bee9d2716e5224e95ceb72839" category="paragraph">Systèmes de stockage NetApp FAS.</block>
  <block id="fac04ca68a48af91f0290001604a2463" category="paragraph">clients</block>
  <block id="bee5e0147cd9d283376a2d2533650ca7" category="paragraph">Nœuds de serveur.</block>
  <block id="f5ce9f5cb682a1f863d5a8c51ac28683" category="paragraph">DL</block>
  <block id="3a113e532fcdd400cdf83ef62ac9d9de" category="paragraph">Apprentissage profond.</block>
  <block id="c404903bef63acba3e3abe370e09474f" category="paragraph">nœuds de fichiers</block>
  <block id="2118e5d99e7b7d309a8f82e52f89ab22" category="paragraph">Serveurs de fichiers BeeGFS.</block>
  <block id="594c16ca0695f6665d7cf4971707adf6" category="paragraph">HAUTE DISPONIBILITÉ</block>
  <block id="b5c55115b0714618209ee9459023bad1" category="paragraph">Haute disponibilité.</block>
  <block id="a25baf723f95fbcbceae8399b638f108" category="paragraph">HIC</block>
  <block id="2d5307a091565cb524b7c0a2c48a1588" category="paragraph">Carte d'interface hôte.</block>
  <block id="2f569257101cf136a49d983584bfc44f" category="paragraph">HPC</block>
  <block id="9a3968cd0518e869657fa99f060cd8f2" category="paragraph">Informatique hautes performances.</block>
  <block id="06a52007ec390481940877b63a4b7c61" category="paragraph">Les workloads de type HPC</block>
  <block id="221d47451f4f42c2e516a414798b6e1e" category="paragraph">Les charges de travail de type HPC se caractérisent généralement par plusieurs nœuds de calcul ou GPU nécessitant l'accès au même dataset en parallèle pour faciliter une tâche de calcul ou d'entraînement distribuée. Ces jeux de données comprennent souvent des fichiers volumineux qui doivent être répartis sur plusieurs nœuds de stockage physique, afin d'éliminer les goulets d'étranglement matériels traditionnels qui empêchent l'accès simultané à un seul fichier.</block>
  <block id="d01fd9b01e9dde8bd3dc247afbfb7218" category="paragraph">ML</block>
  <block id="65abbc2190f8ea8522de3b7df3397302" category="paragraph">Apprentissage machine.</block>
  <block id="85587c49afa2ea2adacd4bbcdb57d064" category="paragraph">NLP</block>
  <block id="1e8218217ed7a37de1bd5f394a253db8" category="paragraph">Traitement du langage naturel.</block>
  <block id="04808383df00e6501c912f8fae661f73" category="paragraph">NLU</block>
  <block id="f0f701867a5e02fa406b05e22df7ae03" category="paragraph">Compréhension du langage naturel.</block>
  <block id="af33781ae5dd2f5ffb194a90989038a8" category="paragraph">NVA</block>
  <block id="4119dd754c8118aa6a1bb36f194a2f52" category="paragraph">Le programme NetApp Verified Architecture (NVA) propose des configurations de référence et des conseils de dimensionnement pour des charges de travail et des cas d'utilisation spécifiques. Ces solutions sont testées en profondeur, conçues pour réduire les risques de déploiement et accélérer le délai de mise sur le marché.</block>
  <block id="cef5ab698867f39ec4b495cba708da1a" category="summary">La solution BeeGFS sur NetApp associe le système de fichiers parallèle BeeGFS aux systèmes de stockage NetApp EF600 à une infrastructure fiable, évolutive et économique qui s'adapte aux besoins des workloads les plus exigeants.</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="doc">Présentation de la solution</block>
  <block id="038a39033a8ecd147024e4510f646b8c" category="paragraph">Cette conception tire parti de la densité des performances fournie par les débits réseau et matériel de stockage et de serveur d'entreprise les plus récents, Ils requièrent des nœuds de fichiers dotés de deux processeurs AMD EPYC 7003 « Milan », ainsi que la prise en charge de PCIe 4.0 avec des connexions directes via une InfiniBand de 200 Go (HDR) pour des nœuds de bloc offrant une connectivité NVMe de bout en bout et NVMeOF via le protocole NVMe/IB.</block>
  <block id="c6ff1c8ffcd7024a30e7240129bf57a8" category="section-title">Programme NVA</block>
  <block id="f109ec830b8ab112f8e89da398d4ca0f" category="paragraph">La solution BeeGFS sur NetApp fait partie du programme NVA (NetApp Verified Architecture), qui fournit aux clients des configurations de référence et des conseils de dimensionnement pour des workloads et des cas d'utilisation spécifiques. Les solutions NVA sont minutieusement testées et conçues pour réduire les risques de déploiement et accélérer le délai de mise sur le marché.</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">Cas d'utilisation</block>
  <block id="9a250aa43ea6738ca4cd441c42e26b4e" category="paragraph">Les utilisations suivantes s'appliquent à la solution BeeGFS sur NetApp :</block>
  <block id="f743e786ba2a29eb033d8f7e1e2101d3" category="inline-link">BeeGFS pour l'IA : faits plutôt que fiction</block>
  <block id="b761cb5be0f07b26af56bda6c19cf90a" category="list-text">L'intelligence artificielle (IA), comprenant le machine learning (ML), le deep learning (DL), le traitement du langage naturel à grande échelle (NLP) et la compréhension du langage naturel (NLU). Pour plus d'informations, voir<block ref="e0ec3865f791595484686c9b79436d0e" category="inline-link-rx"></block>.</block>
  <block id="3476c4aa4908c2b49f576f13d95d657a" category="inline-link">Pourquoi BeeGFS va bien au-delà de l'HPC</block>
  <block id="4becc7ac7e53ca421f06307e37478c8a" category="list-text">Informatique hautes performances (HPC), y compris les applications accélérées par MPI (interface de transmission de messages) et d'autres techniques informatiques distribuées. Pour plus d'informations, voir<block ref="3f795d4ce44ed51872cb7704a4553f2a" category="inline-link-rx"></block>.</block>
  <block id="89b4dd8e856627d44ffe8d3d0066cd98" category="list-text">Charges de travail applicatives caractérisées par :</block>
  <block id="c9ccfce7935790c9fd0d9ccf98da5177" category="list-text">Lecture ou écriture dans des fichiers supérieurs à 1 Go</block>
  <block id="680e47afa4860ce2ac4a078a0d466121" category="list-text">Lecture ou écriture dans le même fichier par plusieurs clients (dizaines, centaines et milliers)</block>
  <block id="56e0e65d3207ad1f0f7efb003935c936" category="list-text">Jeux de données de plusieurs téraoctets ou de plusieurs pétaoctets.</block>
  <block id="f36d694578bdc30f9cfa5faeb163df61" category="list-text">Environnements qui nécessitent un seul espace de noms de stockage optimal pour un mélange de fichiers de petite ou de grande taille.</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">Avantages</block>
  <block id="abc4f101e3891d158ab6ad80a3568c46" category="paragraph">Voici les principaux avantages de BeeGFS sur NetApp :</block>
  <block id="f1161b5399c6f13433f0d7ef82e26dfc" category="list-text">La disponibilité de conceptions matérielles vérifiées permet l'intégration complète des composants matériels et logiciels pour assurer des performances prévisibles et une fiabilité optimale.</block>
  <block id="d678167c236b5d1af08b550c5038cccb" category="list-text">Déploiement et gestion avec Ansible pour une simplicité et une cohérence à grande échelle.</block>
  <block id="82a72442e588bfcf2e472da1d9834f2a" category="inline-link">Présentation d'un cadre de surveillance des solutions NetApp E-Series</block>
  <block id="e30389e6b0882b87124e5401375e84e3" category="list-text">Contrôle et observabilité fournis avec l'analyseur de performance E-Series et le plug-in BeeGFS. Pour plus d'informations, voir<block ref="5fd4bf3409228b006228517662906ac3" category="inline-link-rx"></block>.</block>
  <block id="fc20f26327fc88da82154f6c09f6991d" category="list-text">Haute disponibilité dotée d'une architecture de disques partagés qui assure la durabilité et la disponibilité des données.</block>
  <block id="d47615808883de28c6943d206bf0d2cb" category="inline-link">Kubernetes et BeeGFS : un récit d'investissement pérenne</block>
  <block id="7f62321e8e75c63a1fe94a4d41435dac" category="list-text">Prise en charge des fonctionnalités modernes de gestion et d'orchestration des workloads à l'aide de conteneurs et de Kubernetes. Pour plus d'informations, voir<block ref="3ba4b256f7ab4762b0c431fc1809aa9b" category="inline-link-rx"></block>.</block>
  <block id="cf03dce6d27c37ae2bf803a5ad8ddb93" category="section-title">Architecture HAUTE DISPONIBILITÉ</block>
  <block id="5c306284db745339f153886fd666ba5f" category="paragraph">BeeGFS sur NetApp étend les fonctionnalités de la version BeeGFS Enterprise en créant une solution entièrement intégrée avec du matériel NetApp qui offre une architecture haute disponibilité (HA) de disque partagé.</block>
  <block id="5481b5a39e7ecc68d8956711964cffcb" category="admonition">L'édition communautaire BeeGFS peut être utilisée gratuitement. Cependant, l'édition entreprise exige l'achat d'un contrat d'abonnement de support professionnel auprès d'un partenaire comme NetApp. L'édition entreprise permet d'utiliser plusieurs fonctions supplémentaires, notamment la résilience, l'application de quotas et les pools de stockage.</block>
  <block id="d1d1e6e3c28393c984fbb987be60324d" category="paragraph">La figure suivante compare les architectures haute disponibilité sans partage et à disque partagé.</block>
  <block id="2840bfa899c06356961cfdc8e84723c3" category="paragraph"><block ref="2840bfa899c06356961cfdc8e84723c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52feb691d73302501483cced28704021" category="inline-link">Annonce de la haute disponibilité pour BeeGFS prise en charge par NetApp</block>
  <block id="0bd36571bea371893d99d201b7835845" category="paragraph">Pour plus d'informations, voir<block ref="eb50143d83b72cd897fd47297781957c" category="inline-link-rx"></block>.</block>
  <block id="d51d5ee15f404c2f4f7863bebcde1fac" category="section-title">Ansible</block>
  <block id="733ba000742537e7a4435573aca51393" category="inline-link">Galaxy Ansible</block>
  <block id="6ec27f578410cadd1a5e4b274d75cdb2" category="inline-link">NetApp E-Series GitHub</block>
  <block id="d643841fe27d769d39ef1865b69cb48b" category="paragraph">BeeGFS sur NetApp est fourni et déployé à l'aide d'Ansible Automation, qui est hébergé sur GitHub et Ansible Galaxy (la collection BeeGFS est disponible sur<block ref="6e6b4aec10f34b8873e2101fed073d9a" category="inline-link-rx"></block> et<block ref="6e9ef2e0fff4844f9560394ab05a51e9" category="inline-link-rx"></block>). Bien qu'Ansible soit principalement testé avec le matériel utilisé pour assembler les éléments de base BeeGFS, vous pouvez le configurer de sorte qu'il s'exécute sur presque tous les serveurs x86 à l'aide d'une distribution Linux prise en charge.</block>
  <block id="dcd417571f5073f074067e7d0d445a2e" category="inline-link">Déploiement de BeeGFS avec E-Series Storage</block>
  <block id="cb8de1e2639bc0378b3714cf6ba35837" category="paragraph">Pour plus d'informations, voir<block ref="8af04fa161ecb5f3ec4feab8d52e96c8" category="inline-link-rx"></block>.</block>
  <block id="e69ebf3ec790efafa5cfc7b6502ccfe4" category="summary">La solution BeeGFS sur NetApp inclut des critères de conception architecturale qui permettent de déterminer l'équipement, le câblage et les configurations qui sont requis pour prendre en charge les workloads validés.</block>
  <block id="ebd8431a0b14e9588377860f5d21d80b" category="doc">Présentation de l'architecture</block>
  <block id="dc3f25ceea15d952c20a612e806039b4" category="section-title">Architecture modulaire</block>
  <block id="f968e1fab577166d28baa278b7fbec71" category="paragraph">Le système de fichiers BeeGFS peut être déployé et adapté de différentes manières, en fonction des besoins en stockage. Par exemple, certains cas d'utilisation mettant en avant de nombreux fichiers de petite taille bénéficieront d'une performance et d'une capacité supplémentaires de métadonnées, tandis que les cas d'utilisation comportant moins de fichiers volumineux peuvent favoriser une capacité de stockage et des performances supérieures pour le contenu réel des fichiers. Ces considérations ont un impact sur les différentes dimensions du déploiement d'un système de fichiers parallèle, ce qui ajoute de la complexité à la conception et au déploiement d'un système de fichiers.</block>
  <block id="a0f56902d72268743383af795844da43" category="paragraph">En réponse à ces défis, NetApp a conçu une architecture d'éléments de base standard qui permet une évolutivité horizontale de chaque catégorie. De façon générale, les éléments de base BeeGFS sont déployés dans l'un des trois profils de configuration suivants :</block>
  <block id="cbebd598c304febe3d9ce528a39f79ca" category="list-text">Un élément de base unique, incluant la gestion BeeGFS, les métadonnées et les services de stockage</block>
  <block id="f606793c59d48b54b2b3a18a70dd823d" category="list-text">Des métadonnées BeeGFS plus un élément de base du stockage</block>
  <block id="5d36a489380874ed227d193957d972de" category="list-text">Un élément de base de stockage BeeGFS uniquement</block>
  <block id="3679eaa30562d3f5040cb64c625a3455" category="paragraph">Le seul changement matériel entre ces trois options est l'utilisation de lecteurs plus petits pour les métadonnées BeeGFS. Dans le cas contraire, toutes les modifications de configuration sont appliquées via le logiciel. En outre, avec Ansible comme moteur de déploiement, la configuration du profil souhaité pour un élément de base particulier simplifie les tâches de configuration.</block>
  <block id="0623572375a27997b16aa8f259513278" category="paragraph">Pour plus de détails, voir <block ref="27bdb301347b8d7fa8a057384825ba6a" category="inline-xref-macro-rx"></block>.</block>
  <block id="e3b101a8b62b6541bfde340117b3f92b" category="section-title">Services de système de fichiers</block>
  <block id="26e699f65c8724efd549a1445c4b9eb3" category="paragraph">Le système de fichiers BeeGFS inclut les principaux services suivants :</block>
  <block id="a9effde6a4743049a20cd75e19532999" category="list-text">*Service de gestion.* registres et contrôle tous les autres services.</block>
  <block id="edd29dd37a407bf6bdd3dcefe97db0d5" category="list-text">*Service de stockage.* stocke le contenu des fichiers d'utilisateur distribués appelé fichiers de bloc de données.</block>
  <block id="dc134a7a2e4d2cbe6789c47709b38b35" category="list-text">*Service de métadonnées.* assure le suivi de la disposition du système de fichiers, du répertoire, des attributs de fichier, etc.</block>
  <block id="bfd4d1f28f912adef70ff502946f2d7a" category="list-text">*Service client.* monte le système de fichiers pour accéder aux données stockées.</block>
  <block id="94ab5c559c66cc4fc4b2e1c1ed4b00a3" category="paragraph">La figure suivante présente les composants et les relations de la solution BeeGFS utilisés avec les systèmes NetApp E-Series.</block>
  <block id="bfcf7994ec645acbf0e62ec0cc0d8135" category="paragraph"><block ref="bfcf7994ec645acbf0e62ec0cc0d8135" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ac96964e53d6a8061e16551c85e7b05" category="paragraph">En tant que système de fichiers parallèle, BeeGFS répartit ses fichiers sur plusieurs nœuds de serveur afin de maximiser les performances en lecture/écriture et l'évolutivité. Les nœuds de serveur fonctionnent ensemble pour fournir un système de fichiers unique pouvant être monté et accessible simultanément par d'autres nœuds de serveur, communément appelés _clients_. Ces clients peuvent voir et consommer le système de fichiers distribué de la même manière qu'un système de fichiers local tel que NTFS, XFS ou ext4.</block>
  <block id="2cd4f3c05097f81722656ab8de9b6a25" category="paragraph">Les quatre services principaux fonctionnent sur un large éventail de distributions Linux prises en charge et communiquent via n'importe quel réseau compatible TCP/IP ou RDMA, y compris InfiniBand (IB), Omni-Path (OPA) et RDMA over Converged Ethernet (RoCE). Les services de serveur BeeGFS (gestion, stockage et métadonnées) sont des démons d'espace utilisateur, alors que le client est un module de noyau natif (sans patchless). Tous les composants peuvent être installés ou mis à jour sans redémarrage. Vous pouvez en outre exécuter n'importe quelle combinaison de services sur le même nœud.</block>
  <block id="006d93ef4f9eec646f24191298096ff5" category="section-title">Nœuds vérifiés</block>
  <block id="c96c4db6ed51cc2193de3faf12adec4b" category="paragraph">La solution BeeGFS sur NetApp inclut les nœuds vérifiés suivants : le système de stockage NetApp EF600 (nœud bloc) et le serveur Lenovo ThinkSystem SR665 (nœud de fichier).</block>
  <block id="27413f72a901dfdce9c9f5b55bb8de24" category="section-title">Nœud bloc : système de stockage EF600</block>
  <block id="c9423adc70506c44748bf2f624d7f901" category="paragraph">La baie 100 % Flash NetApp EF600 assure un accès aux données cohérent en temps quasi réel avec un nombre illimité de workloads. Pour alimenter rapidement et en continu les données des applications d'IA et HPC, les systèmes de stockage EF600 fournissent jusqu'à 2 millions d'IOPS en lecture cache, des temps de réponse inférieurs à 100 microsecondes et un débit de lecture séquentielle de 42 Gbit/s dans un seul boîtier.</block>
  <block id="651e200415759284120b2ec1a66b1a96" category="section-title">Nœud de fichier : serveur Lenovo ThinkSystem SR665</block>
  <block id="6b9e4d337aab66ffe52d7442d4de33cd" category="paragraph">Le SR665 est un serveur 2U à deux sockets doté de la technologie PCIe 4.0. Lorsqu'elle est configurée pour répondre aux besoins de cette solution, elle permet d'exécuter des services de fichiers BeeGFS dans une configuration bien équilibrée avec la disponibilité du débit et des IOPS fournie par les nœuds E-Series à connexion directe.</block>
  <block id="18bc6212071e7cb1cca90788a40a9301" category="inline-link">Site Web de Lenovo</block>
  <block id="81024062a06a8ee37394167df6e2e925" category="paragraph">Pour plus d'informations sur le Lenovo SR665, reportez-vous à la section<block ref="2cce034b75e116efa73dc639a17202fa" category="inline-link-rx"></block>.</block>
  <block id="4b2aed7f56892904807d2a0dba262f91" category="section-title">Conception matérielle vérifiée</block>
  <block id="9e33e1f9796877cc85735e8b785ca26f" category="paragraph">Les éléments de base de la solution (illustrée dans la figure ci-dessous) utilisent deux serveurs PCIe 4.0 à double socket pour la couche de fichiers BeeGFS et deux systèmes de stockage EF600 comme la couche bloc.</block>
  <block id="9aff371c3d72ae246b764db116d45c50" category="paragraph"><block ref="9aff371c3d72ae246b764db116d45c50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c48dcdddb94107a7a67762c9d1dbe6f" category="admonition">Chaque élément de base inclut deux nœuds de fichiers BeeGFS, un minimum de deux éléments de base est requis pour établir le quorum dans le cluster de basculement. Vous pouvez configurer un cluster à deux nœuds, mais cette configuration présente des limites susceptibles d'empêcher un basculement réussi. Si vous avez besoin d'un cluster à deux nœuds, vous pouvez incorporer un troisième périphérique en tant qu'Tiebreaker (mais cette conception n'est pas couverte par ce site).</block>
  <block id="6a07b0ff8ee12bcea9aba90004bdf2e9" category="paragraph">Chaque élément de base offre une haute disponibilité via une conception matérielle à deux niveaux qui sépare les domaines de défaillance des couches de fichiers et de blocs. Chaque Tier peut basculer indépendamment, ce qui améliore la résilience et réduit le risque de pannes en cascade. L'utilisation de la technologie HDR InfiniBand associée à NVMeOF offre un débit élevé et une latence minimale entre les nœuds de fichiers et de blocs, avec une redondance complète et une sursouscription suffisante des liaisons pour éviter que la conception désagrégée ne devienne un goulot d'étranglement, même si le système est partiellement dégradé.</block>
  <block id="3c08ab3aeeb113b43a410e04cd194da5" category="paragraph">La solution BeeGFS sur NetApp s'exécute sur tous les éléments de base du déploiement. Le premier élément de base déployé doit exécuter des services de gestion BeeGFS, de métadonnées et de stockage (appelé élément de base). Tous les éléments de base ultérieurs sont configurés via le logiciel pour exécuter des services de métadonnées et de stockage BeeGFS ou uniquement des services de stockage. La disponibilité de différents profils de configuration pour chaque élément de base permet de faire évoluer les métadonnées du système de fichiers ou la capacité et les performances du stockage en utilisant les mêmes plateformes matérielles sous-jacentes et la même conception d'éléments de base.</block>
  <block id="8c75634d2e6f2b333be16514a845f21a" category="paragraph">Jusqu'à cinq éléments de base sont combinés dans un cluster Linux HA autonome, garantissant un nombre raisonnable de ressources par gestionnaire de ressources de cluster (Pacemaker) et réduisant la surcharge de messagerie requise pour maintenir la synchronisation des membres du cluster (Corosync). Un minimum de deux blocs de construction par grappe est recommandé pour permettre à un nombre suffisant de membres d'établir le quorum. Un ou plusieurs de ces clusters autonomes BeeGFS HA sont combinés pour créer un système de fichiers BeeGFS (illustré dans la figure suivante) qui est accessible aux clients comme un seul espace de noms de stockage.</block>
  <block id="68f8e190e5b0a73975772032f02e616d" category="paragraph"><block ref="68f8e190e5b0a73975772032f02e616d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2656fcaf8e3676a2cbef703871ecdf24" category="paragraph">Bien qu'au final, le nombre d'éléments de base par rack dépend des besoins en alimentation et en climatisation d'un site donné, La solution a été conçue de sorte à déployer jusqu'à cinq éléments de base dans un seul rack 42U tout en laissant de l'espace à deux commutateurs InfiniBand 1U utilisés pour le réseau de stockage/données. Chaque module nécessite huit ports IB (quatre par commutateur pour la redondance). Ainsi, cinq blocs de construction laissent la moitié des ports sur un commutateur InfiniBand HDR à 40 ports (comme le NVIDIA QM8700) disponible pour implémenter une topologie FAT-Tree ou non bloquante similaire. Cette configuration garantit une évolutivité verticale du nombre de racks de stockage ou de calcul/GPU sans goulets d'étranglement du réseau. Il est également possible d'utiliser une structure de stockage sursouscrite à l'aide des recommandations du fournisseur de la structure de stockage.</block>
  <block id="70fe669a3a23094d7db9486a417dbef3" category="paragraph">L'image suivante montre une topologie arborescence FAT à 80 nœuds.</block>
  <block id="2fcf68f5d15d3841e3d288e4c8a6107c" category="paragraph"><block ref="2fcf68f5d15d3841e3d288e4c8a6107c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d6a8fb7565b3c37b0228984862a3977c" category="paragraph">En utilisant Ansible comme moteur de déploiement pour déployer BeeGFS sur NetApp, les administrateurs peuvent gérer tout l'environnement en utilisant une infrastructure moderne comme du code. Cela simplifie considérablement le fonctionnement d'un système complexe, permettant aux administrateurs de définir et d'ajuster la configuration en un seul emplacement, puis de s'assurer de son application cohérente quelle que soit la taille de l'environnement. La collection BeeGFS est disponible à partir de<block ref="6e6b4aec10f34b8873e2101fed073d9a" category="inline-link-rx"></block> et<block ref="6e9ef2e0fff4844f9560394ab05a51e9" category="inline-link-rx"></block>.</block>
  <block id="e95081b0e85f690a9bdcb41ea940c186" category="summary">Pour implémenter la solution BeeGFS sur NetApp, assurez-vous que votre environnement répond aux exigences technologiques.</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">Configuration matérielle requise</block>
  <block id="d53750273c9ab2292caf240393c86d48" category="paragraph">Le tableau suivant répertorie les composants matériels requis pour implémenter un élément de base de deuxième génération unique de la solution BeeGFS sur NetApp.</block>
  <block id="27d858ba39131558c9ade0aa37a22659" category="admonition">Ils peuvent varier selon la mise en œuvre de la solution et les besoins du client.</block>
  <block id="e93f994f01c537c4e2f7d8528c3eb5e9" category="cell">Nombre</block>
  <block id="16cc6ce48a597aebb8ab5132cb3523dc" category="cell">Composant matériel</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="cell">De formation</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="paragraph">2</block>
  <block id="6c6f9283374bfbf220de6327277c1815" category="paragraph">Nœuds de fichiers BeeGFS.</block>
  <block id="2864e4eb2e0cb17f0531cd785e63c7da" category="paragraph">Pour atteindre les performances attendues, chaque nœud de fichier doit remplir ou dépasser la configuration suivante.</block>
  <block id="31d64135897b5391e512521bf41f9777" category="paragraph">*Processeurs:*</block>
  <block id="b95b123279b2f800990f9c2191373708" category="list-text">2 AMD EPYC 7343 16C 3.2 GHz.</block>
  <block id="4616efc57076900a6225244dcfc89027" category="list-text">Configuré comme deux zones NUMA.</block>
  <block id="13519812c056b113bbb6f853259e7691" category="paragraph">*Mémoire:*</block>
  <block id="2c271e30e1c41fa7fc170637cbe07507" category="list-text">256 GO.</block>
  <block id="4b0f34cee48d8b67ee838abeca68c9a6" category="list-text">16x 16 Go TruDDR4 3800 MHz (2Rx8 1,2V) RDIMM-A (préférez des barrettes DIMM plus petites sur moins de barrettes DIMM plus grandes).</block>
  <block id="3449cc07bd9fb49ca5e13dd993a70e88" category="list-text">Rempli pour maximiser la bande passante de la mémoire.</block>
  <block id="9f5ef4bd76579737bfe585f29a5951e8" category="paragraph">*Extension PCIe : quatre emplacements PCE Gen4 x16 :*</block>
  <block id="f00f227030eb163a017a1730e0ddefb6" category="list-text">Deux emplacements par zone NUMA.</block>
  <block id="d12719622b3ae7d145ba3994f18ac93f" category="list-text">Chaque slot doit fournir suffisamment d'alimentation/de refroidissement pour l'adaptateur Mellanox MCX4653106A-HDAT.</block>
  <block id="a631c0a4a9b408ccc2559c2a3323af51" category="paragraph">*Divers:*</block>
  <block id="61591a2035ff0c79f159e510d399af20" category="list-text">Deux disques SATA 1 To 7200 tr/min (ou comparables) configurés en RAID 1 pour le système d'exploitation.</block>
  <block id="47c626e648f05fcfc94552cad7e0f210" category="list-text">Adaptateur 10GbE OCP 3.0 (ou équivalent) pour la gestion du système d'exploitation intrabande.</block>
  <block id="30a4226a3d02d27336f749ae5dcd893b" category="list-text">1GbE BMC avec Redfish API pour la gestion de serveurs hors bande.</block>
  <block id="173ee7b6334b65c38509a87b47bd79da" category="list-text">Deux blocs d'alimentation et ventilateurs de performances remplaçables à chaud.</block>
  <block id="84edc2766d3f7158f313edb5aed216f7" category="list-text">Les câbles InfiniBand optiques Mellanox doivent être pris en charge si nécessaire pour atteindre les commutateurs InfiniBand de stockage.</block>
  <block id="2d6de8e1dccd3e2e9834a5a60d4566de" category="paragraph">*Lenovo SR665:*</block>
  <block id="d89c6895636b2b8a24392a0f977e2684" category="list-text">Un modèle NetApp personnalisé inclut la version requise du firmware du contrôleur XClarity requise pour prendre en charge les adaptateurs Mellanox ConnectX-6 à deux ports. Contactez NetApp pour en savoir plus sur le processus de commande.</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8</block>
  <block id="df57d52bbf8cf40e07c14985e453c567" category="cell">Mellanox ConnectX-6 HCA (pour les nœuds de fichiers).</block>
  <block id="ebf2a6ec614aa7ef6c7da2be9e2c23a7" category="list-text">Adaptateurs de canal hôte MCX653106A-HDAT (HDR IB 200 Go, QSFP56 à deux ports, PCIe4.0 x16).</block>
  <block id="151b6979304b49e9f2fa40146bc63177" category="cell">1 m de câbles InfiniBand HDR (pour les connexions directes de nœud/bloc).</block>
  <block id="334ee84af8f0aba772fc0297b7d99d85" category="list-text">MCP1650-H001E30 (câble en cuivre passif Mellanox de 1 m, IB HDR, jusqu'à 200 Gbit/s, QSFP56, 30 AWG).</block>
  <block id="1d09a937487a970ae4b132b9d1bbd92e" category="paragraph">La longueur peut être ajustée pour tenir compte des distances plus longues entre les nœuds de fichier et de bloc si nécessaire.</block>
  <block id="3c947c9bfa7d34adb44f61243d2bdaf0" category="cell">Câbles InfiniBand HDR (pour les connexions de nœud de fichiers/commutateur de stockage)</block>
  <block id="826f9c9f2a5a5dd3ddf276fdf6370236" category="paragraph">Nécessite des câbles HDR InfiniBand (émetteurs-récepteurs QSFP56) de la longueur appropriée pour connecter des nœuds de fichiers aux switchs de lames de stockage. Les options possibles sont les suivantes :</block>
  <block id="43f0edb9f1ba2bdb6e116f1a9ebc5efa" category="list-text">MCP1650-H002E26 (câble en cuivre passif Mellanox de 2 m, IB HDR, jusqu'à 200 Go/s, QSFP56, 30 AWG).</block>
  <block id="e2c1cd9a1de33e9b1dfe101cbbeac58b" category="list-text">MFS1S00-H003E (câble à fibre active Mellanox de 3 m, IB HDR, jusqu'à 200 Go/s, QSFP56).</block>
  <block id="5fbc0fc6a38b0dbbeffcd2c2d4dcac9d" category="cell">Nœuds de blocs E-Series</block>
  <block id="604f81d1187ffc116528d5f0ab32fb11" category="paragraph">Deux contrôleurs EF600 configurés comme suit :</block>
  <block id="577a9a467c2913dcad30956ec32e78e6" category="list-text">Mémoire : 256 Go (128 Go par contrôleur).</block>
  <block id="7e4c29cb3d75f6a12c915cb4eaaf3a1e" category="list-text">Adaptateur : 2 ports 200 Go/HDR (NVMe/IB).</block>
  <block id="d0fbc950f348eb754ea8bad25fabc0a7" category="list-text">Disques : configurés pour correspondre à la capacité souhaitée.</block>
  <block id="7ddb33edf227a18eb76201fcb9e2c9db" category="section-title">Configuration logicielle requise</block>
  <block id="440907229edb210984831982728c0047" category="paragraph">Pour des performances et une fiabilité prévisibles, les versions de la solution BeeGFS sur NetApp sont testées avec des versions spécifiques des composants logiciels requis pour implémenter la solution.</block>
  <block id="5fea6233624bde259c99b82e6d7de3c6" category="section-title">Configuration requise pour le déploiement de logiciels</block>
  <block id="699b33acca98ab1d3eb0d684f59f1c98" category="paragraph">Le tableau suivant répertorie les exigences logicielles déployées automatiquement dans le cadre du déploiement BeeGFS basé sur Ansible.</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">Logiciel</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">Version</block>
  <block id="eb57eb77389d7d4e71c5790c9c6ec1a7" category="cell">BeeGFS</block>
  <block id="9197ec103d780b6779cb78eec6afce31" category="cell">7.2.6</block>
  <block id="51cf7c858a71d06ee12a42cfbff97da7" category="cell">Corosync</block>
  <block id="5d2d6ad0b2b4cf8622bcf4cddca922d1" category="cell">3.1.5-1</block>
  <block id="d95adee972ae170512bd3bdbce557054" category="cell">Stimulateur cardiaque</block>
  <block id="300cc3f7d5595a3ab5ad8f666e682b51" category="cell">2.1.0-8</block>
  <block id="0a0d34e3921098e12d40efeb9e5b64ff" category="cell">OpenSM</block>
  <block id="571ffe54d5507ffba520fd66014b973a" category="paragraph">openmm-5.9.0 (à partir de mlnx_ofed 5.4-1.0.3.0)</block>
  <block id="fc9d1b1033b1fe0ed02e41584f187a0d" category="admonition">Uniquement nécessaire pour les connexions directes afin d'activer la virtualisation.</block>
  <block id="13f2a3097f055e043d74b20940df2658" category="section-title">Configuration requise pour le nœud de contrôle Ansible</block>
  <block id="83d32979307efd813f41ef5070206fd3" category="paragraph">La solution BeeGFS sur NetApp est déployée et gérée à partir d'un nœud de contrôle Ansible. Pour plus d'informations, reportez-vous à la section<block ref="4410f583cbabaee2389115371eb2ab02" category="inline-link-rx"></block>.</block>
  <block id="158a122309f0454b31e4853755a5962a" category="paragraph">Les exigences logicielles répertoriées dans les tableaux suivants sont spécifiques à la version de la collection NetApp BeeGFS Ansible indiquée ci-dessous.</block>
  <block id="c34646f8692ab9a9dce46b8b8b249892" category="cell">2.11 lorsqu'il est installé via pip : ansible-4.7.0 et ansible-core &lt; 2.12,&gt;=2.11.6</block>
  <block id="a7f5f35426b927411fc9231b56382173" category="cell">Python</block>
  <block id="47588d4b158a37889ddf44eeb8e88b0f" category="cell">3.9</block>
  <block id="d35d779fe31977939a0a72c5c962d2af" category="cell">Packs Python supplémentaires</block>
  <block id="77d3bd829df9097aa38d64335f6aad7f" category="cell">Cryptographie-35.0.0, netaddr-0.8.0</block>
  <block id="6f82e755e888096a221d29f2d5410b52" category="cell">Collection BeeGFS Ansible</block>
  <block id="272f0a04b740763e0a29316bc4af89a4" category="cell">3.0.0</block>
  <block id="5510cedb08df4208db0688e41cea716f" category="section-title">Configuration requise pour les nœuds de fichiers</block>
  <block id="eae2868fd17cac4569887ad9ccca42c2" category="paragraph">Red Hat Enterprise Linux</block>
  <block id="c902ad984234c1eef95b7912574d9aeb" category="paragraph">Red Hat 8.4 Server Physical avec haute disponibilité (2 sockets).</block>
  <block id="1f8b1bc6c0a349e88a3353e347489a9a" category="admonition">Les nœuds de fichiers nécessitent un abonnement Red Hat Enterprise Linux Server valide et le module complémentaire haute disponibilité de Red Hat Enterprise Linux.</block>
  <block id="2488fead2064d4aeb886afc1a0010ee7" category="cell">Noyau Linux</block>
  <block id="d4b0f66130f05055ad49d7919514984a" category="cell">4.18.0-305.25.1.el8_4.x86_64</block>
  <block id="f6883581bd882ffdf705127738982586" category="cell">Pilotes InfiniBand / RDMA</block>
  <block id="3882d32c66e7e768145ecd8f104b0c08" category="cell">Boîte de réception</block>
  <block id="0f8b40e8389c6b79812629492fb9facd" category="cell">Microprogramme HCA ConnectX-6</block>
  <block id="4ebe5da399ec2e4a8aa42aee4a85eef5" category="cell">FW : 20.31.1014</block>
  <block id="1669d53b71fac20015fb08bdb7e0f816" category="cell">PXE : 3.6.0403</block>
  <block id="56f186085ad1743522ca2a29632d91eb" category="cell">UEFI : 14.24.0013</block>
  <block id="fbc534ed33feffdfe8fc56e7cde13e6e" category="section-title">Exigences liées aux nœuds en mode bloc EF600</block>
  <block id="e791d47d690cbc6aa7c7f9434ebd2fa1" category="cell">SANtricity OS</block>
  <block id="aa64d564cff905bb777c7f6cceb9c9d3" category="cell">11.70.2</block>
  <block id="b384b3cf4ffa3a81a88e8687dd6ca028" category="cell">NVSRAM</block>
  <block id="2bd1a0272130dcc2055e0f904d00fe3c" category="cell">N6000-872834-D06.dlp</block>
  <block id="b89cb5f38b54c6181858af1281dcaeef" category="cell">Micrologiciel de lecteur</block>
  <block id="df4607ba320342072b2dc12271b08d2f" category="cell">Dernière version disponible pour les modèles de lecteurs utilisés.</block>
  <block id="024464eb7b3fd909a9746dff88c6b9c9" category="section-title">Supplémentaires requise</block>
  <block id="61440af9eaf0ce02a7d08f34876b087d" category="paragraph">L'équipement indiqué dans le tableau suivant a été utilisé pour la validation, mais des alternatives appropriées peuvent être utilisées si nécessaire. En général, NetApp recommande d'exécuter les dernières versions de logiciels pour éviter les problèmes inattendus.</block>
  <block id="81a57f3c03234ff1f2a69dde51a4eb30" category="cell">Logiciel installé</block>
  <block id="3ba6b98074aa537a4599a5717fc1667c" category="list-text">2 switchs InfiniBand 200 Gb Mellanox MQ700</block>
  <block id="5506d82b19c7fb79ef3ae9c724240c8e" category="list-text">Micrologiciel 3.9.2110</block>
  <block id="d80c6d0ee3d3645d6e79f023da5f811d" category="paragraph">*1x nœud de contrôle Ansible (virtualisé) :*</block>
  <block id="b5d77813b4d6bf45ad5812887dddc3b6" category="list-text">Processeurs : processeur Intel(R) Xeon(R) Gold 6146 à 3,20 GHz</block>
  <block id="ed7e62a0a7749f5ecdeacff73f47cd74" category="list-text">Mémoire: 8 Go</block>
  <block id="9b127271fc710f9ccddb6752d4706302" category="list-text">Stockage local : 24 Go</block>
  <block id="0da4148b13259a822cbef39b72084c99" category="list-text">CentOS Linux 8.4.2105</block>
  <block id="4c082b998d02b58acba9fe2b7c4fa784" category="list-text">Noyau 4.18.0-305.3.1.el8.x86_64</block>
  <block id="e213de1dde80716b46e639e6e4211241" category="paragraph">Les versions Ansible et Python installés correspondent à celles du tableau ci-dessus.</block>
  <block id="bc5f18e7f65533d407f6b5c4ee36f1a8" category="paragraph">*10x clients BeeGFS (nœuds CPU):*</block>
  <block id="ba4ebea566ef71314e819a2849f2df50" category="list-text">Processeur : 1 processeur AMD EPYC 7302 16 cœurs à 3 GHz</block>
  <block id="e21bd6758a43c483b7d0071867188cf3" category="list-text">Mémoire : 128 Go</block>
  <block id="6045a9bd677549ebf210bae5890c8473" category="list-text">Réseau : 2 x Mellanox MCX4653106A-HDAT (un port connecté par adaptateur).</block>
  <block id="73611f9a837b7a25dad3a9c5d1a98658" category="list-text">Ubuntu 20.04</block>
  <block id="5c102f668db12e3182739e89576e526b" category="list-text">Noyau: 5.4.0-100-générique</block>
  <block id="11c40f47f4b43c52533122c701bc0c0c" category="list-text">Pilotes InfiniBand : Mellanox OFED 5.4-1.0.3.0</block>
  <block id="03fa34a7812c6af1b694c2914333785b" category="paragraph">*1x BeeGFS client (nœud GPU):*</block>
  <block id="6299da9dcf5c047e5fda43f47d185352" category="list-text">Processeurs : 2 processeurs AMD EPYC 7742 64 cœurs à 2,25 GHz</block>
  <block id="9278571d707ba27f73c7811c10c50142" category="list-text">Mémoire : 1 To</block>
  <block id="d4974e31435247f5311454d41461425a" category="paragraph">Ce système est basé sur la plateforme NVIDIA IDA HGX A100 et inclut quatre GPU A100.</block>
  <block id="71f5771dab663d80ba4dad1627e3386a" category="summary">Présentation de la mise à niveau</block>
  <block id="818c6e601a24f72750da0f6c9b8ebe28" category="paragraph">Lorem ipsum dolor sit amet, consectetur adipisciting elit, sed do eiusmod tentor incididunt ut lamore et dolore magna aliqua.</block>
  <block id="014e0772632604acc6760e28c820cb22" category="summary">Vue d'ensemble du dépannage</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">Les mentions légales donnent accès aux déclarations de copyright, aux marques, aux brevets, etc.</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">Mentions légales</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">Droits d'auteur</block>
  <block id="09e95b77ffe81fe465a83ba99efad5c8" category="paragraph"><block ref="09e95b77ffe81fe465a83ba99efad5c8" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">Marques déposées</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp, le logo NETAPP et les marques mentionnées sur la page des marques commerciales NetApp sont des marques commerciales de NetApp, Inc. Les autres noms de sociétés et de produits peuvent être des marques commerciales de leurs propriétaires respectifs.</block>
  <block id="7aa531e9acfe2b98e34d2c92fe9846ff" category="paragraph"><block ref="7aa531e9acfe2b98e34d2c92fe9846ff" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">Brevets</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">Vous trouverez une liste actuelle des brevets appartenant à NetApp à l'adresse suivante :</block>
  <block id="d7f1fbcf9ce4e42f705add574d262b2c" category="paragraph"><block ref="d7f1fbcf9ce4e42f705add574d262b2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">Politique de confidentialité</block>
  <block id="fc248f74f5e36542f7f5627b8610e9a3" category="paragraph"><block ref="fc248f74f5e36542f7f5627b8610e9a3" category="inline-link-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">Source ouverte</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">Les fichiers de notification fournissent des informations sur les droits d'auteur et les licences de tiers utilisés dans le logiciel NetApp.</block>
  <block id="cc1ba14f8dc9bd7ba20e2aa654cde10b" category="inline-link">Remarque : pour les systèmes d'exploitation SANtricity E-Series/EF-Series</block>
  <block id="2dae7f81af3097152530b0bc519d7eb1" category="paragraph"><block ref="2dae7f81af3097152530b0bc519d7eb1" category="inline-link-rx"></block></block>
  <block id="4929a64464b43e326e35b25ce7e3ceeb" category="sidebar">La solution BeeGFS sur NetApp est une architecture vérifiée NetApp (NVA), qui combine le système de fichiers parallèle BeeGFS avec les systèmes de stockage NetApp EF600. Cette solution offre une infrastructure fiable, évolutive et économique qui s'adapte à vos charges de travail les plus extrêmes.</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="sidebar">Commencez</block>
  <block id="12623d7cc9dff74b7325aa809ffc84df" category="sidebar">Blog : apprenez-en plus sur BeeGFS et E-Series</block>
  <block id="0af9e7bf64a8e8c1b37ec554248f3d14" category="sidebar">Blog - BeeGFS pour débutants</block>
  <block id="6316c96cdd51a54d33d0011cf5f10c81" category="sidebar">Blog - HA pour BeeGFS</block>
  <block id="d5bc9778dcd2b28ce384782d014e53fc" category="sidebar">Vidéo : accélération des workloads d'IA avec BeeGFS sur NetApp</block>
  <block id="b89fcecfac1f6b8376165aabe5b6c5ee" category="sidebar">Documents supplémentaires</block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="sidebar">Documentation produit NetApp</block>
  <block id="dbd68e15f4c30d2a47d780a9bf4f3da1" category="sidebar">Documentation BeeGFS</block>
  <block id="ba13e086fe19056a379b6240e05651a8" category="sidebar">Tr-4915 : déplacement des données avec E-Series et BeeGFS pour l'IA</block>
  <block id="974ad78dc53c253ebfe5b2b8b376f353" category="sidebar">Les outils prennent en charge</block>
  <block id="d564be87f67790fe4b92faa0eea29c48" category="sidebar">Collections NetApp E-Series sur Ansible Galaxy</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="sidebar">Matrice d'interopérabilité NetApp</block>
  <block id="668e2078ef1b1722c77cdb5c523a4463" category="sidebar">Base de connaissances NetApp</block>
  <block id="2bae42f280067110dfd52cc69a468364" category="sidebar">Active IQ (connexion requise)</block>
  <block id="c35665ae18bf4eff9afa413fcb281b07" category="sidebar">BeeGFS sur les documents NetApp</block>
  <block id="f40341c80e215542b4fdfe4e2f2e2a21" category="sidebar">Ce qui est inclus dans ce site</block>
  <block id="539652fdf317cc6e27c7373dc6fe13d3" category="sidebar">Examen du design de la solution</block>
  <block id="6c24b1b24585abc1454b91e5eb163103" category="sidebar">Déploiement de la solution</block>
  <block id="c5d1e465274381bca5df236c2a5a7d57" category="sidebar">Déployez des logiciels</block>
  <block id="97ecf64b4f2550ec2c53f49bb9fde847" category="sidebar">Configurez le nœud de contrôle Ansible</block>
  <block id="f99ff2e7716d2f6aa55979e838f0a328" category="sidebar">Créer un inventaire Ansible</block>
  <block id="da7f5c02044100badae24523f01941a2" category="sidebar">Définir des éléments de base BeeGFS</block>
  <block id="8025f3ce3e3e1dd003430788c4be8b5e" category="sidebar">Faire évoluer les clusters BeeGFS</block>
  <block id="e304a70d2f42f62cefb9b474f73a1e91" category="sidebar">Pourcentages de volume recommandés</block>
  <block id="aa00436c66c8456a1c9ef0a12178a4ab" category="paragraph-title">Sous-réseau A : 100.127.0.0/16</block>
  <block id="079e5887eeb92f6f17c9fa25fd464e2a" category="paragraph-title">Sous-réseau B : 100.128.0.0/16</block>
  <block id="015dd422187100bd2a53cae756db5bcd" category="paragraph-title">Un élément de base BeeGFS (gestion, métadonnées et stockage)</block>
  <block id="2eb32f267ab2864aa50a3171522c1574" category="paragraph-title">Métadonnées BeeGFS + élément de base du stockage</block>
  <block id="2cf619569e1d3422599fa7ba3fff04f2" category="paragraph-title">Élément de base BeeGFS uniquement pour le stockage</block>
  <block id="9443a11095bad63a50d95ece24842fb2" category="paragraph-title">Trois éléments de base BeeGFS</block>
  <block id="3c793d71f0d81892f28ab10f661381c8" category="paragraph-title">Un seul élément de base de métadonnées BeeGFS + stockage</block>
  <block id="94c5de0e8c5b79f8b061a00a2d638234" category="paragraph-title">Deux métadonnées BeeGFS + éléments de base du stockage</block>
  <block id="53c31a8ba69af9d096629948d271d34d" category="paragraph-title">Câblage pour exploiter la bande passante</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="paragraph-title">Description de la tâche</block>
  <block id="48c7c41b72e1d678923ce3571aa65b2d" category="paragraph-title">Étape</block>
  <block id="02cf3373667b246c17c8d054c073a372" category="paragraph">Architectures dérivées avec variations dans les recommandations de déploiement :</block>
  <block id="2e93d3c37349d17095fd0dca7d6fe097" category="inline-link-macro">Élément de base haute capacité</block>
  <block id="8a43f7c3e77834cf43b5398c116033e3" category="list-text"><block ref="8a43f7c3e77834cf43b5398c116033e3" category="inline-link-macro-rx"></block></block>
  <block id="119c6b2e3908d75335ad13f9fead045a" category="cell">1,938,577,200</block>
  <block id="753b107ce954fb125f0557af947a86c5" category="cell">51,77 TO</block>
  <block id="bb586a502f621b433b3966d68c887364" category="cell">3,880,388,400</block>
  <block id="8b2e1597e74fb68a87ef415a1ce004fc" category="cell">103,55 TO</block>
  <block id="9c0aa8a6ddcfe00cef8951f0edd99c58" category="cell">8,125,278,000</block>
  <block id="b0baa6e5c027744d7e7f2a93d8686bf5" category="cell">28.74 TO</block>
  <block id="edd8590257b34c7c6f57e06f28bb9460" category="cell">17,269,854,000</block>
  <block id="0d9c02ec5b1f4c4a835073aa142d0b7f" category="cell">460.60 TO</block>
  <block id="f8ed0cba5469cc89e05fa4d3025eca1b" category="summary">Les variations de conception d'un bloc de construction haute capacité.</block>
  <block id="8b074fc693c7d8fd35c61de8fe2dee9a" category="doc">Élément de base haute capacité</block>
  <block id="fb5708557d5e7c6d44ac55ef4c09a054" category="paragraph">La solution BeeGFS est conçue de façon très performante. Les clients recherchant des cas d'utilisation de grande capacité doivent observer les variations des caractéristiques de conception et de performances décrites ici.</block>
  <block id="800f7da804cf784ad962d085fbc70486" category="section-title">Configuration matérielle et logicielle</block>
  <block id="90f177623f1131fc7f45e82db6189a1b" category="paragraph">Les configurations matérielles et logicielles de l'élément de base haute capacité sont standard, mais les contrôleurs EF600 doivent être remplacés par des contrôleurs EF300, avec une option qui permet de connecter entre 1 et 7 tiroirs d'extension IOM avec 60 disques chacun pour chaque baie de stockage, un total de 2 à 14 tiroirs d'extension par module.</block>
  <block id="467fccc62f2ea7630303f15d47a54aa7" category="paragraph">Les clients qui déploient un design d'éléments de base haute capacité n'utilisent probablement que la configuration de type élément de base, qui comprend la gestion BeeGFS, les métadonnées et les services de stockage pour chaque nœud. Pour garantir une rentabilité accrue, les nœuds de stockage haute capacité doivent provisionner des volumes de métadonnées sur les disques NVMe du boîtier de contrôleur EF300 et provisionner les volumes de stockage sur les disques NL-SAS des tiroirs d'extension.</block>
  <block id="774f4231e5651061791e65cf90314897" category="paragraph"><block ref="774f4231e5651061791e65cf90314897" category="inline-image-macro-rx" type="image"></block></block>
  <block id="267aa4fef181a2097a06345c854cc106" category="paragraph">Ces recommandations de dimensionnement supposent que les blocs de base haute capacité sont configurés avec un groupe de volumes SSD NVMe 2+2 pour les métadonnées dans le boîtier EF300 de base et six groupes de volumes NL-SAS 8+2 par plateau d'extension IOM pour le stockage.</block>
  <block id="963320465e8fcfa25188a669a43858c4" category="cell">Taille du disque (disques durs haute capacité)</block>
  <block id="55fd8e839de07671a6869fad80279ab9" category="cell">Capacité par BB (1 plateau)</block>
  <block id="001115a96afe0add22e654316239365a" category="cell">Capacité par BB (2 plateaux)</block>
  <block id="b9781606af717d9b153714ca7a3a2d33" category="cell">Capacité par BB (3 plateaux)</block>
  <block id="345ffe7c9ac213823037fbcdca8f4ef2" category="cell">Capacité par BB (4 plateaux)</block>
  <block id="6b7e0bcfc566b639bc0d10bad9f871dd" category="cell">4 TO</block>
  <block id="676efbc64df1b4909842616f91027d96" category="cell">43TB</block>
  <block id="25c359cf674976f1bd282922ff6ed0e3" category="cell">878 TO</block>
  <block id="1416acbb13ce37c62934fde6e37b3c6b" category="cell">1317 TO</block>
  <block id="3aa071e61efaac2113f5fc251c03b688" category="cell">1756 TO</block>
  <block id="0706c165b0123479cffaac9b374484f0" category="cell">8 TO</block>
  <block id="76a91245e71b558dbe0040ea8b7b3c21" category="cell">2634 TO</block>
  <block id="dd9fa1084ca34ce21c6b127bd37446b9" category="cell">3512 TO</block>
  <block id="1191f788083da9194f8eef9400d10898" category="cell">10 TO</block>
  <block id="6587b6d3747beeadda1eccb500e9771b" category="cell">1097 TO</block>
  <block id="3a89d830e84dc7715fe902bb9adac448" category="cell">2195 TO</block>
  <block id="1024776bf84a4c2469e49539ac248790" category="cell">3292 TO</block>
  <block id="0af601e969fa263e021792cfd1dfd4af" category="cell">4390 TO</block>
  <block id="aad11c7dd0feb18c08cb728eea0a8c46" category="cell">12 To</block>
  <block id="0fc4914bd341e29e4eef438ff8c44bdb" category="cell">3951 TO</block>
  <block id="4d63a00ef9361479d55d2914d7f75e28" category="cell">5268 TO</block>
  <block id="324f218b8144e744b54eb58e0bf14eea" category="cell">16 TO</block>
  <block id="af4d6969d11876b269a31ebb39d7c34e" category="cell">7024 TO</block>
  <block id="7ba1b40b5eed0a67df50aa00c907f9ac" category="cell">18 TO</block>
  <block id="23f86ea0b6ba63be94542d36e1d0ac20" category="cell">1975 TO</block>
  <block id="01dbb09e4b3f7243c1cae305daf2972a" category="cell">5927 TO</block>
  <block id="547259566f92db3383cbd2575b9d68c1" category="cell">7902 TO</block>
  <block id="585389cefc924819e7ab6d5b7eba5f03" category="paragraph">Architectures dérivées avec des variations de conception et de performances :</block>
  <block id="f45c646cffcf39011c125e7523fa9149" category="summary">Les variations de déploiement pour un élément de base haute capacité.</block>
  <block id="fc6e06f3e4cfc328095f04c8f44c28f1" category="paragraph">Le guide de déploiement de la solution BeeGFS standard décrit les procédures et les recommandations pour répondre aux exigences des workloads de haute performance. Les clients cherchant à répondre aux besoins en capacité élevés doivent observer les variations du déploiement et les recommandations décrites ici.</block>
  <block id="cbfb14f470701bf93424d757c624369a" category="section-title">Contrôleurs</block>
  <block id="174e6193fff9ed7c9b1839367e007f13" category="paragraph">Pour les éléments de base haute capacité, les contrôleurs EF600 doivent être remplacés par des contrôleurs EF300, chacun avec une HIC Cascade installée pour l'extension SAS. Chaque nœud de bloc aura un nombre minimal de SSD NVMe dans le boîtier de la baie pour le stockage de métadonnées BeeGFS et sera relié à des tiroirs d'extension dotés de disques durs NL-SAS pour les volumes de stockage BeeGFS.</block>
  <block id="1ec9226d3745f2995d2686d2450831c7" category="paragraph">La configuration du noeud fichier à noeud bloc reste la même.</block>
  <block id="af932b84cc0c8562c0e572647564048f" category="section-title">Placement des disques</block>
  <block id="f96a95c482225ca6a9b4c17bfa47d918" category="paragraph">Chaque nœud de bloc exige un minimum de 4 SSD NVMe pour le stockage de métadonnées BeeGFS. Ces lecteurs doivent être placés dans les emplacements les plus extérieurs du boîtier.</block>
  <block id="778e10a0753cc201500f1209098b9b5f" category="paragraph"><block ref="778e10a0753cc201500f1209098b9b5f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdd528ca6f274d102819b008b189961c" category="section-title">Bacs d'extension</block>
  <block id="6627fde89324d2cbb6afd245e3d32d35" category="paragraph">L'élément de base haute capacité peut être dimensionné avec 1-7, 60 tiroirs d'extension de disque par matrice de stockage.</block>
  <block id="80b4ce0c4b11e4d8c7c4a14614b871f7" category="inline-link-macro">Consultez la section câblage EF300 pour les tiroirs disques</block>
  <block id="25ada85328148d5356ce4edd989b1f40" category="paragraph">Pour obtenir des instructions sur le câble de chaque bac d'extension, <block ref="8c170f7da852d665db7cd9113b2ed6bb" category="inline-link-macro-rx"></block>.</block>
  <block id="0607ff4a53c90b270dd9fd9fce5c3d92" category="sidebar">Option haute capacité</block>
</blocks>